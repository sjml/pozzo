import{S as e,i as t,s as o,A as n,y as r,c as i,w as l,z as s,b as c,m as u,B as d,t as p,a,d as h,g as f,f as $,h as m,C as g,D as w,E as k,j as v,l as x,n as y,F as C,G as j,H as M,I as G,L as b,R as D,J as P,K as I,M as T,x as S,e as N,N as O,O as B,P as A,Q as H,T as z,k as E,q as L,r as V,U as R,V as U}from"./main-29f6f7fd.js";import{M as Z}from"./Markdown-ff0971a1.js";function _(e,t,o){const n=e.slice();return n[28]=t[o],n[30]=o,n}function W(e,t,o){const n=e.slice();return n[28]=t[o],n[30]=o,n}function q(e){let t,o,n,g,w,k,v,x,y,C,j,G,b,D;o=new M({props:{margin:"0 0 0 10px",title:e[5]?"Commit Changes":"Edit Description",isToggled:e[5],$$slots:{default:[F]},$$scope:{ctx:e}}}),o.$on("click",e[10]);let P=e[0].photos.length>0&&J(e);return w=new M({props:{margin:"0 0 0 30px",title:"Move Up",isDisabled:0==e[1],$$slots:{default:[Q]},$$scope:{ctx:e}}}),w.$on("click",e[16]),v=new M({props:{margin:"0",title:"Move Down",isDisabled:e[1]==e[7].photoGroups.length-1,$$slots:{default:[X]},$$scope:{ctx:e}}}),v.$on("click",e[17]),j=new M({props:{margin:"0 10px 0 0",title:"Merge with Above",isDisabled:0==e[1],$$slots:{default:[Y]},$$scope:{ctx:e}}}),j.$on("click",e[18]),b=new M({props:{margin:"0 0 0 10px",title:"Delete Group",isDisabled:1==e[7].photoGroups.length,$$slots:{default:[ee]},$$scope:{ctx:e}}}),b.$on("click",e[19]),{c(){t=r("div"),i(o.$$.fragment),n=l(),P&&P.c(),g=l(),i(w.$$.fragment),k=l(),i(v.$$.fragment),x=l(),y=r("div"),C=l(),i(j.$$.fragment),G=l(),i(b.$$.fragment),s(y,"class","spacer svelte-62eu0n"),s(t,"class","controls svelte-62eu0n")},m(e,r){c(e,t,r),u(o,t,null),d(t,n),P&&P.m(t,null),d(t,g),u(w,t,null),d(t,k),u(v,t,null),d(t,x),d(t,y),d(t,C),u(j,t,null),d(t,G),u(b,t,null),D=!0},p(e,n){const r={};32&n[0]&&(r.title=e[5]?"Commit Changes":"Edit Description"),32&n[0]&&(r.isToggled=e[5]),2&n[1]&&(r.$$scope={dirty:n,ctx:e}),o.$set(r),e[0].photos.length>0?P?(P.p(e,n),1&n[0]&&p(P,1)):(P=J(e),P.c(),p(P,1),P.m(t,g)):P&&(f(),a(P,1,1,(()=>{P=null})),$());const i={};2&n[0]&&(i.isDisabled=0==e[1]),2&n[1]&&(i.$$scope={dirty:n,ctx:e}),w.$set(i);const l={};130&n[0]&&(l.isDisabled=e[1]==e[7].photoGroups.length-1),2&n[1]&&(l.$$scope={dirty:n,ctx:e}),v.$set(l);const s={};2&n[0]&&(s.isDisabled=0==e[1]),2&n[1]&&(s.$$scope={dirty:n,ctx:e}),j.$set(s);const c={};128&n[0]&&(c.isDisabled=1==e[7].photoGroups.length),2&n[1]&&(c.$$scope={dirty:n,ctx:e}),b.$set(c)},i(e){D||(p(o.$$.fragment,e),p(P),p(w.$$.fragment,e),p(v.$$.fragment,e),p(j.$$.fragment,e),p(b.$$.fragment,e),D=!0)},o(e){a(o.$$.fragment,e),a(P),a(w.$$.fragment,e),a(v.$$.fragment,e),a(j.$$.fragment,e),a(b.$$.fragment,e),D=!1},d(e){e&&m(t),h(o),P&&P.d(),h(w),h(v),h(j),h(b)}}}function F(e){let t,o,n,r,i;return{c(){t=G("svg"),o=G("rect"),n=G("path"),r=G("line"),i=G("line"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"d","M92.68629,216H48a8,8,0,0,1-8-8V163.31371a8,8,0,0,1,2.34315-5.65686l120-120a8,8,0,0,1,11.3137,0l44.6863,44.6863a8,8,0,0,1,0,11.3137l-120,120A8,8,0,0,1,92.68629,216Z"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","136"),s(r,"y1","64"),s(r,"x2","192"),s(r,"y2","120"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"x1","44"),s(i,"y1","156"),s(i,"x2","100"),s(i,"y2","212"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,l){c(e,t,l),d(t,o),d(t,n),d(t,r),d(t,i)},d(e){e&&m(t)}}}function J(e){let t,o;return t=new M({props:{margin:"0 0 0 10px",isToggled:e[0].hasMap,title:(e[0].hasMap?"Hide":"Show")+" Map",$$slots:{default:[K]},$$scope:{ctx:e}}}),t.$on("click",e[15]),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};1&o[0]&&(n.isToggled=e[0].hasMap),1&o[0]&&(n.title=(e[0].hasMap?"Hide":"Show")+" Map"),2&o[1]&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function K(e){let t,o,n,r,i;return{c(){t=G("svg"),o=G("rect"),n=G("polyline"),r=G("polygon"),i=G("polyline"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"points","96 184 32 200 32 56 96 40"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"points","160 216 96 184 96 40 160 72 160 216"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"points","160 72 224 56 224 200 160 216"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,l){c(e,t,l),d(t,o),d(t,n),d(t,r),d(t,i)},d(e){e&&m(t)}}}function Q(e){let t,o,n,r;return{c(){t=G("svg"),o=G("rect"),n=G("line"),r=G("polyline"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"x1","128"),s(n,"y1","216"),s(n,"x2","128"),s(n,"y2","40"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"points","56 112 128 40 200 112"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,i){c(e,t,i),d(t,o),d(t,n),d(t,r)},d(e){e&&m(t)}}}function X(e){let t,o,n,r;return{c(){t=G("svg"),o=G("rect"),n=G("line"),r=G("polyline"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"x1","128"),s(n,"y1","40"),s(n,"x2","128"),s(n,"y2","216"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"points","56 144 128 216 200 144"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,i){c(e,t,i),d(t,o),d(t,n),d(t,r)},d(e){e&&m(t)}}}function Y(e){let t,o,n,r,i;return{c(){t=G("svg"),o=G("rect"),n=G("polygon"),r=G("line"),i=G("line"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"points","32 120 128 24 224 120 176 120 176 140 80 140 80 120 32 120"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","176"),s(r,"y1","212"),s(r,"x2","80"),s(r,"y2","212"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"x1","176"),s(i,"y1","176"),s(i,"x2","80"),s(i,"y2","176"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,l){c(e,t,l),d(t,o),d(t,n),d(t,r),d(t,i)},d(e){e&&m(t)}}}function ee(e){let t,o,n,r,i,l,u;return{c(){t=G("svg"),o=G("rect"),n=G("line"),r=G("line"),i=G("line"),l=G("path"),u=G("path"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"x1","215.99609"),s(n,"y1","60"),s(n,"x2","39.99609"),s(n,"y2","60.00005"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","104"),s(r,"y1","104"),s(r,"x2","104"),s(r,"y2","168"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"x1","152"),s(i,"y1","104"),s(i,"x2","152"),s(i,"y2","168"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(l,"d","M199.99609,60.00005V208a8,8,0,0,1-8,8h-128a8,8,0,0,1-8-8v-148"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","24"),s(u,"d","M168,60V36a16,16,0,0,0-16-16H104A16,16,0,0,0,88,36V60"),s(u,"fill","none"),s(u,"stroke","currentColor"),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,s){c(e,t,s),d(t,o),d(t,n),d(t,r),d(t,i),d(t,l),d(t,u)},d(e){e&&m(t)}}}function te(e){let t,o,n;return o=new b({props:{loader:"PhotoMap",photos:e[0].photos}}),{c(){t=r("div"),i(o.$$.fragment),s(t,"class","photoGroupMap svelte-62eu0n")},m(e,r){c(e,t,r),u(o,t,null),n=!0},p(e,t){const n={};1&t[0]&&(n.photos=e[0].photos),o.$set(n)},i(e){n||(p(o.$$.fragment,e),n=!0)},o(e){a(o.$$.fragment,e),n=!1},d(e){e&&m(t),h(o)}}}function oe(e){let t,o,n;return o=new Z({props:{markdown:e[0].description}}),{c(){t=r("div"),i(o.$$.fragment),s(t,"class","description svelte-62eu0n")},m(e,r){c(e,t,r),u(o,t,null),n=!0},p(e,t){const n={};1&t[0]&&(n.markdown=e[0].description),o.$set(n)},i(e){n||(p(o.$$.fragment,e),n=!0)},o(e){a(o.$$.fragment,e),n=!1},d(e){e&&m(t),h(o)}}}function ne(e){let t,o,n;return{c(){t=r("textarea"),s(t,"cols","500"),s(t,"rows","5"),s(t,"class","description editing svelte-62eu0n")},m(r,i){c(r,t,i),I(t,e[6]),o||(n=T(t,"input",e[20]),o=!0)},p(e,o){64&o[0]&&I(t,e[6])},i:S,o:S,d(e){e&&m(t),o=!1,n()}}}function re(e){let t,o,n;return o=new M({props:{margin:"0 0 0 10px",title:(e[4]?"Exit":"Enter")+" Reorder Mode",$$slots:{default:[ie]},$$scope:{ctx:e}}}),o.$on("click",e[21]),{c(){t=r("div"),i(o.$$.fragment),s(t,"class","reorderButton svelte-62eu0n"),g(t,"toggled",e[4])},m(e,r){c(e,t,r),u(o,t,null),n=!0},p(e,n){const r={};16&n[0]&&(r.title=(e[4]?"Exit":"Enter")+" Reorder Mode"),2&n[1]&&(r.$$scope={dirty:n,ctx:e}),o.$set(r),16&n[0]&&g(t,"toggled",e[4])},i(e){n||(p(o.$$.fragment,e),n=!0)},o(e){a(o.$$.fragment,e),n=!1},d(e){e&&m(t),h(o)}}}function ie(e){let t,o,n,r,i,l;return{c(){t=G("svg"),o=G("rect"),n=G("polyline"),r=G("line"),i=G("polyline"),l=G("line"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"points","192 144 224 176 192 208"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","32"),s(r,"y1","176"),s(r,"x2","224"),s(r,"y2","176"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"points","64 112 32 80 64 48"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(l,"x1","224.00006"),s(l,"y1","80"),s(l,"x2","32.00006"),s(l,"y2","80"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256")},m(e,s){c(e,t,s),d(t,o),d(t,n),d(t,r),d(t,i),d(t,l)},d(e){e&&m(t)}}}function le(e){let t,o,n,i,l;const u=[ue,ce],d=[];function h(e,t){return e[8]?0:1}return o=h(e),n=d[o]=u[o](e),{c(){t=r("div"),n.c(),s(t,"class","photos svelte-62eu0n"),s(t,"style",i=`height: ${e[3]?.containerHeight||0}px;`)},m(e,n){c(e,t,n),d[o].m(t,null),l=!0},p(e,r){let c=o;o=h(e),o===c?d[o].p(e,r):(f(),a(d[c],1,1,(()=>{d[c]=null})),$(),n=d[o],n?n.p(e,r):(n=d[o]=u[o](e),n.c()),p(n,1),n.m(t,null)),(!l||8&r[0]&&i!==(i=`height: ${e[3]?.containerHeight||0}px;`))&&s(t,"style",i)},i(e){l||(p(n),l=!0)},o(e){a(n),l=!1},d(e){e&&m(t),d[o].d()}}}function se(e){let t,o;return t=new b({props:{loader:"EditableLayout",photoList:e[0].photos}}),t.$on("reordered",e[12]),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};1&o[0]&&(n.photoList=e[0].photos),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function ce(e){let t,o,n=e[0].photos,r=[];for(let t=0;t<n.length;t+=1)r[t]=pe(_(e,n,t));const i=e=>a(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=N()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n),o=!0},p(e,o){if(137&o[0]){let l;for(n=e[0].photos,l=0;l<n.length;l+=1){const i=_(e,n,l);r[l]?(r[l].p(i,o),p(r[l],1)):(r[l]=pe(i),r[l].c(),p(r[l],1),r[l].m(t.parentNode,t))}for(f(),l=n.length;l<r.length;l+=1)i(l);$()}},i(e){if(!o){for(let e=0;e<n.length;e+=1)p(r[e]);o=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)a(r[e]);o=!1},d(e){O(r,e),e&&m(t)}}}function ue(e){let t,o;return t=new B({props:{photos:e[0].photos,$$slots:{default:[fe]},$$scope:{ctx:e}}}),t.$on("splitGroup",e[22]),t.$on("makeNewGroup",e[23]),t.$on("deleted",e[13]),t.$on("moved",e[14]),t.$on("coverChanged",e[24]),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};1&o[0]&&(n.photos=e[0].photos),137&o[0]|2&o[1]&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function de(e){let t,o,n;return t=new H({props:{size:"medium",photo:e[28],layoutDims:e[3].boxes[e[30]]}}),{c(){i(t.$$.fragment),o=l()},m(e,r){u(t,e,r),c(e,o,r),n=!0},p(e,o){const n={};1&o[0]&&(n.photo=e[28]),8&o[0]&&(n.layoutDims=e[3].boxes[e[30]]),t.$set(n)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){a(t.$$.fragment,e),n=!1},d(e){h(t,e),e&&m(o)}}}function pe(e){let t,o;return t=new A({props:{to:`/${e[7].type}/${e[7].slug}/${e[28].id}`,$$slots:{default:[de]},$$scope:{ctx:e}}}),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};129&o[0]&&(n.to=`/${e[7].type}/${e[7].slug}/${e[28].id}`),9&o[0]|2&o[1]&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function ae(e){let t,o,n;return t=new H({props:{size:"medium",photo:e[28],layoutDims:e[3].boxes[e[30]]}}),{c(){i(t.$$.fragment),o=l()},m(e,r){u(t,e,r),c(e,o,r),n=!0},p(e,o){const n={};1&o[0]&&(n.photo=e[28]),8&o[0]&&(n.layoutDims=e[3].boxes[e[30]]),t.$set(n)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){a(t.$$.fragment,e),n=!1},d(e){h(t,e),e&&m(o)}}}function he(e){let t,o;return t=new A({props:{to:`/${e[7].type}/${e[7].slug}/${e[28].id}`,$$slots:{default:[ae]},$$scope:{ctx:e}}}),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};129&o[0]&&(n.to=`/${e[7].type}/${e[7].slug}/${e[28].id}`),9&o[0]|2&o[1]&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function fe(e){let t,o,n=e[0].photos,r=[];for(let t=0;t<n.length;t+=1)r[t]=he(W(e,n,t));const i=e=>a(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=N()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n),o=!0},p(e,o){if(137&o[0]){let l;for(n=e[0].photos,l=0;l<n.length;l+=1){const i=W(e,n,l);r[l]?(r[l].p(i,o),p(r[l],1)):(r[l]=he(i),r[l].c(),p(r[l],1),r[l].m(t.parentNode,t))}for(f(),l=n.length;l<r.length;l+=1)i(l);$()}},i(e){if(!o){for(let e=0;e<n.length;e+=1)p(r[e]);o=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)a(r[e]);o=!1},d(e){O(r,e),e&&m(t)}}}function $e(e){let t,o,i,u,h,g,v,x,y,C,j,M=e[8]&&e[7].type==n.Album&&q(e),G=e[0].hasMap&&e[0].photos.length>0&&te(e);const b=[ne,oe],D=[];function P(e,t){return e[5]?0:e[0].description.length>0?1:-1}~(u=P(e))&&(h=D[u]=b[u](e));let I=e[8]&&e[7].type==n.Album&&e[0].photos.length>1&&re(e);const T=[se,le],S=[];function N(e,t){return e[4]?0:e[3]?1:-1}return~(x=N(e))&&(y=S[x]=T[x](e)),{c(){t=r("div"),M&&M.c(),o=l(),G&&G.c(),i=l(),h&&h.c(),g=l(),I&&I.c(),v=l(),y&&y.c(),s(t,"class","photoGroup svelte-62eu0n"),w((()=>e[25].call(t)))},m(n,r){c(n,t,r),M&&M.m(t,null),d(t,o),G&&G.m(t,null),d(t,i),~u&&D[u].m(t,null),d(t,g),I&&I.m(t,null),d(t,v),~x&&S[x].m(t,null),C=k(t,e[25].bind(t)),j=!0},p(e,r){e[8]&&e[7].type==n.Album?M?(M.p(e,r),384&r[0]&&p(M,1)):(M=q(e),M.c(),p(M,1),M.m(t,o)):M&&(f(),a(M,1,1,(()=>{M=null})),$()),e[0].hasMap&&e[0].photos.length>0?G?(G.p(e,r),1&r[0]&&p(G,1)):(G=te(e),G.c(),p(G,1),G.m(t,i)):G&&(f(),a(G,1,1,(()=>{G=null})),$());let l=u;u=P(e),u===l?~u&&D[u].p(e,r):(h&&(f(),a(D[l],1,1,(()=>{D[l]=null})),$()),~u?(h=D[u],h?h.p(e,r):(h=D[u]=b[u](e),h.c()),p(h,1),h.m(t,g)):h=null),e[8]&&e[7].type==n.Album&&e[0].photos.length>1?I?(I.p(e,r),385&r[0]&&p(I,1)):(I=re(e),I.c(),p(I,1),I.m(t,v)):I&&(f(),a(I,1,1,(()=>{I=null})),$());let s=x;x=N(e),x===s?~x&&S[x].p(e,r):(y&&(f(),a(S[s],1,1,(()=>{S[s]=null})),$()),~x?(y=S[x],y?y.p(e,r):(y=S[x]=T[x](e),y.c()),p(y,1),y.m(t,null)):y=null)},i(e){j||(p(M),p(G),p(h),p(I),p(y),j=!0)},o(e){a(M),a(G),a(h),a(I),a(y),j=!1},d(e){e&&m(t),M&&M.d(),G&&G.d(),~u&&D[u].d(),I&&I.d(),~x&&S[x].d(),C()}}}function me(e,t,o){let r,i;v(e,x,(e=>o(7,r=e))),v(e,y,(e=>o(8,i=e)));var l=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function l(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,s)}c((n=n.apply(e,t||[])).next())}))};const s=C();let c,{photoGroup:u}=t,{photoGroupIndex:d}=t,p=null;let a,h=!1,f=!1;function $(){return l(this,void 0,void 0,(function*(){if(null==u.hasMap)return;const e=yield D(`/group/edit/${u.id}`,{params:{hasMap:u.hasMap,description:u.description},method:"POST",authorize:!0});e.success?s("perusalChangeNeeded"):console.error(e)}))}return e.$$set=e=>{"photoGroup"in e&&o(0,u=e.photoGroup),"photoGroupIndex"in e&&o(1,d=e.photoGroupIndex)},e.$$.update=()=>{5&e.$$.dirty[0]&&function(e,t){l(this,void 0,void 0,(function*(){if(!t||!e)return;const n=e.photos.map((e=>e.aspect));o(3,p=j(n,{targetRowHeight:300,containerWidth:t,containerPadding:10,widowLayoutStyle:"center"}))}))}(u,c)},[u,d,c,p,h,f,a,r,i,s,function(){return l(this,void 0,void 0,(function*(){f?(o(0,u.description=a,u),yield $(),o(5,f=!1)):(o(6,a=u.description),o(5,f=!0))}))},$,function(e){return l(this,void 0,void 0,(function*(){const t=yield D(`/group/reorder/${u.id}`,{params:{newOrdering:e.detail.newPhotos.map((e=>e.id))},method:"POST",authorize:!0});t.success?(o(0,u.photos=e.detail.newPhotos,u),s("perusalChangeNeeded")):console.error(t)}))},function(e){return l(this,void 0,void 0,(function*(){const t=yield D("/photo/delete",{params:{photoIDs:e.detail.deleted.map((e=>e.id))},method:"POST",authorize:!0});t.success?(o(0,u.photos=u.photos.filter((t=>e.detail.deleted.indexOf(t)<0)),u),s("perusalChangeNeeded")):console.error(t)}))},function(e){return l(this,void 0,void 0,(function*(){if(r.type==n.Dynamic){const t=yield D("/photo/copy",{params:{copies:e.detail.moved.map((t=>({photoID:t.id,albumID:e.detail.targetAlbumID})))},method:"POST",authorize:!0});t.success?"unsorted"==r.slug&&(o(0,u.photos=u.photos.filter((t=>e.detail.moved.indexOf(t)<0)),u),s("perusalChangeNeeded")):console.error(t)}else{const t=yield D("/photo/move",{params:{photoIDs:e.detail.moved.map((e=>e.id)),fromGroupID:u.id,toAlbumID:e.detail.targetAlbumID},method:"POST",authorize:!0});t.success?(o(0,u.photos=u.photos.filter((t=>e.detail.moved.indexOf(t)<0)),u),s("perusalChangeNeeded")):console.error(t)}}))},()=>{o(0,u.hasMap=!u.hasMap,u),$()},()=>s("shiftGroup",{groupIdx:d,group:u,movement:-1}),()=>s("shiftGroup",{groupIdx:d,group:u,movement:1}),()=>s("mergeUp",{groupIdx:d,group:u}),()=>s("deleteGroup",{groupIdx:d,group:u}),function(){a=this.value,o(6,a)},()=>{o(4,h=!h)},e=>s("splitGroup",Object.assign(e.detail,{originGroup:u})),e=>s("makeNewGroup",Object.assign(e.detail,{originGroup:u})),function(t){P(e,t)},function(){c=this.clientWidth,o(2,c)}]}class ge extends e{constructor(e){super(),t(this,e,me,$e,o,{photoGroup:0,photoGroupIndex:1},[-1,-1])}}function we(e,t,o){const n=e.slice();return n[24]=t[o],n[26]=o,n}function ke(e){let t,o,i,u,h,g,w,k,v,x,y,C,j=e[4]&&e[3].type!=n.Tag&&!Ee&&xe(e);function M(e,t){return e[0]?Ce:ye}let G=M(e),b=G(e),D=e[4]&&e[3].type==n.Album&&je(e);const P=[Ne,Se],I=[];function T(e,t){return e[0]?0:1}h=T(e),g=I[h]=P[h](e);let S=e[3].hasMap&&e[5].photoSet.length>0&&Oe(e);const O=[Ae,Be],B=[];function A(e,t){return e[5].photoSet.length>0?0:1}return v=A(e),x=B[v]=O[v](e),{c(){j&&j.c(),t=l(),o=r("div"),b.c(),i=l(),D&&D.c(),u=l(),g.c(),w=l(),S&&S.c(),k=l(),x.c(),y=N(),s(o,"class","titleRow svelte-1wfj0uw")},m(e,n){j&&j.m(e,n),c(e,t,n),c(e,o,n),b.m(o,null),d(o,i),D&&D.m(o,null),c(e,u,n),I[h].m(e,n),c(e,w,n),S&&S.m(e,n),c(e,k,n),B[v].m(e,n),c(e,y,n),C=!0},p(e,r){e[4]&&e[3].type!=n.Tag&&!Ee?j?(j.p(e,r),24&r&&p(j,1)):(j=xe(e),j.c(),p(j,1),j.m(t.parentNode,t)):j&&(f(),a(j,1,1,(()=>{j=null})),$()),G===(G=M(e))&&b?b.p(e,r):(b.d(1),b=G(e),b&&(b.c(),b.m(o,i))),e[4]&&e[3].type==n.Album?D?(D.p(e,r),24&r&&p(D,1)):(D=je(e),D.c(),p(D,1),D.m(o,null)):D&&(f(),a(D,1,1,(()=>{D=null})),$());let l=h;h=T(e),h===l?I[h].p(e,r):(f(),a(I[l],1,1,(()=>{I[l]=null})),$(),g=I[h],g?g.p(e,r):(g=I[h]=P[h](e),g.c()),p(g,1),g.m(w.parentNode,w)),e[3].hasMap&&e[5].photoSet.length>0?S?(S.p(e,r),40&r&&p(S,1)):(S=Oe(e),S.c(),p(S,1),S.m(k.parentNode,k)):S&&(f(),a(S,1,1,(()=>{S=null})),$());let s=v;v=A(e),v===s?B[v].p(e,r):(f(),a(B[s],1,1,(()=>{B[s]=null})),$(),x=B[v],x?x.p(e,r):(x=B[v]=O[v](e),x.c()),p(x,1),x.m(y.parentNode,y))},i(e){C||(p(j),p(D),p(g),p(S),p(x),C=!0)},o(e){a(j),a(D),a(g),a(S),a(x),C=!1},d(e){j&&j.d(e),e&&m(t),e&&m(o),b.d(),D&&D.d(),e&&m(u),I[h].d(e),e&&m(w),S&&S.d(e),e&&m(k),B[v].d(e),e&&m(y)}}}function ve(e){let t;return{c(){t=r("div"),t.textContent="Loading…"},m(e,o){c(e,t,o)},p:S,i:S,o:S,d(e){e&&m(t)}}}function xe(e){let t,o;return t=new b({props:{loader:"UploadZone"}}),t.$on("done",e[15]),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p:S,i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function ye(e){let t,o,n=e[3].title+"";return{c(){t=r("h2"),o=R(n),s(t,"class","svelte-1wfj0uw")},m(e,n){c(e,t,n),d(t,o)},p(e,t){8&t&&n!==(n=e[3].title+"")&&U(o,n)},d(e){e&&m(t)}}}function Ce(e){let t,o,n;return{c(){t=r("h2"),s(t,"contenteditable","true"),s(t,"class","editing svelte-1wfj0uw"),void 0===e[1]&&w((()=>e[16].call(t)))},m(r,i){c(r,t,i),void 0!==e[1]&&(t.innerHTML=e[1]),o||(n=T(t,"input",e[16]),o=!0)},p(e,o){2&o&&e[1]!==t.innerHTML&&(t.innerHTML=e[1])},d(e){e&&m(t),o=!1,n()}}}function je(e){let t,o,n,d,g,w,k,v,x;t=new M({props:{margin:"0 0 0 10px",title:e[0]?"Commit Changes":"Edit Title and Description",isToggled:e[0],$$slots:{default:[Me]},$$scope:{ctx:e}}}),t.$on("click",e[7]),n=new M({props:{margin:"0 0 0 10px",title:e[3].isPrivate?"Make Public":"Make Private",$$slots:{default:[De]},$$scope:{ctx:e}}}),n.$on("click",e[17]);let y=e[5].photoSet.length>0&&Pe(e);return v=new M({props:{margin:"0 0 0 10px",title:"Delete Album",$$slots:{default:[Te]},$$scope:{ctx:e}}}),v.$on("click",e[14]),{c(){i(t.$$.fragment),o=l(),i(n.$$.fragment),d=l(),y&&y.c(),g=l(),w=r("div"),k=l(),i(v.$$.fragment),s(w,"class","spacer svelte-1wfj0uw")},m(e,r){u(t,e,r),c(e,o,r),u(n,e,r),c(e,d,r),y&&y.m(e,r),c(e,g,r),c(e,w,r),c(e,k,r),u(v,e,r),x=!0},p(e,o){const r={};1&o&&(r.title=e[0]?"Commit Changes":"Edit Title and Description"),1&o&&(r.isToggled=e[0]),134217728&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r);const i={};8&o&&(i.title=e[3].isPrivate?"Make Public":"Make Private"),134217736&o&&(i.$$scope={dirty:o,ctx:e}),n.$set(i),e[5].photoSet.length>0?y?(y.p(e,o),32&o&&p(y,1)):(y=Pe(e),y.c(),p(y,1),y.m(g.parentNode,g)):y&&(f(),a(y,1,1,(()=>{y=null})),$());const l={};134217728&o&&(l.$$scope={dirty:o,ctx:e}),v.$set(l)},i(e){x||(p(t.$$.fragment,e),p(n.$$.fragment,e),p(y),p(v.$$.fragment,e),x=!0)},o(e){a(t.$$.fragment,e),a(n.$$.fragment,e),a(y),a(v.$$.fragment,e),x=!1},d(e){h(t,e),e&&m(o),h(n,e),e&&m(d),y&&y.d(e),e&&m(g),e&&m(w),e&&m(k),h(v,e)}}}function Me(e){let t,o,n,r,i;return{c(){t=G("svg"),o=G("rect"),n=G("path"),r=G("line"),i=G("line"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"d","M92.68629,216H48a8,8,0,0,1-8-8V163.31371a8,8,0,0,1,2.34315-5.65686l120-120a8,8,0,0,1,11.3137,0l44.6863,44.6863a8,8,0,0,1,0,11.3137l-120,120A8,8,0,0,1,92.68629,216Z"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","136"),s(r,"y1","64"),s(r,"x2","192"),s(r,"y2","120"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"x1","44"),s(i,"y1","156"),s(i,"x2","100"),s(i,"y2","212"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256"),s(t,"class","svelte-1wfj0uw")},m(e,l){c(e,t,l),d(t,o),d(t,n),d(t,r),d(t,i)},d(e){e&&m(t)}}}function Ge(e){let t,o,n,r,i,l,u;return{c(){t=G("svg"),o=G("rect"),n=G("line"),r=G("line"),i=G("line"),l=G("line"),u=G("path"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"x1","201.14971"),s(n,"y1","127.30467"),s(n,"x2","223.95961"),s(n,"y2","166.81257"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","154.18201"),s(r,"y1","149.26298"),s(r,"x2","161.29573"),s(r,"y2","189.60689"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"x1","101.72972"),s(i,"y1","149.24366"),s(i,"x2","94.61483"),s(i,"y2","189.59423"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(l,"x1","54.80859"),s(l,"y1","127.27241"),s(l,"x2","31.88882"),s(l,"y2","166.97062"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","24"),s(u,"d","M31.99943,104.87509C48.81193,125.68556,79.63353,152,128,152c48.36629,0,79.18784-26.31424,96.00039-47.12468"),s(u,"fill","none"),s(u,"stroke","currentColor"),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256"),s(t,"class","svelte-1wfj0uw")},m(e,s){c(e,t,s),d(t,o),d(t,n),d(t,r),d(t,i),d(t,l),d(t,u)},d(e){e&&m(t)}}}function be(e){let t,o,n,r;return{c(){t=G("svg"),o=G("rect"),n=G("path"),r=G("circle"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"d","M128,55.99219C48,55.99219,16,128,16,128s32,71.99219,112,71.99219S240,128,240,128,208,55.99219,128,55.99219Z"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"cx","128"),s(r,"cy","128"),s(r,"r","32"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256"),s(t,"class","svelte-1wfj0uw")},m(e,i){c(e,t,i),d(t,o),d(t,n),d(t,r)},d(e){e&&m(t)}}}function De(e){let t;function o(e,t){return e[3].isPrivate?Ge:be}let n=o(e),r=n(e);return{c(){r.c(),t=N()},m(e,o){r.m(e,o),c(e,t,o)},p(e,i){n!==(n=o(e))&&(r.d(1),r=n(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&m(t)}}}function Pe(e){let t,o;return t=new M({props:{margin:"0 0 0 10px",isToggled:e[3].hasMap,title:(e[3].hasMap?"Hide":"Show")+" Map",$$slots:{default:[Ie]},$$scope:{ctx:e}}}),t.$on("click",e[18]),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};8&o&&(n.isToggled=e[3].hasMap),8&o&&(n.title=(e[3].hasMap?"Hide":"Show")+" Map"),134217728&o&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function Ie(e){let t,o,n,r,i;return{c(){t=G("svg"),o=G("rect"),n=G("polyline"),r=G("polygon"),i=G("polyline"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"points","96 184 32 200 32 56 96 40"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"points","160 216 96 184 96 40 160 72 160 216"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"points","160 72 224 56 224 200 160 216"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256"),s(t,"class","svelte-1wfj0uw")},m(e,l){c(e,t,l),d(t,o),d(t,n),d(t,r),d(t,i)},d(e){e&&m(t)}}}function Te(e){let t,o,n,r,i,l,u;return{c(){t=G("svg"),o=G("rect"),n=G("line"),r=G("line"),i=G("line"),l=G("path"),u=G("path"),s(o,"width","256"),s(o,"height","256"),s(o,"fill","none"),s(n,"x1","215.99609"),s(n,"y1","60"),s(n,"x2","39.99609"),s(n,"y2","60.00005"),s(n,"fill","none"),s(n,"stroke","currentColor"),s(n,"stroke-linecap","round"),s(n,"stroke-linejoin","round"),s(n,"stroke-width","24"),s(r,"x1","104"),s(r,"y1","104"),s(r,"x2","104"),s(r,"y2","168"),s(r,"fill","none"),s(r,"stroke","currentColor"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","24"),s(i,"x1","152"),s(i,"y1","104"),s(i,"x2","152"),s(i,"y2","168"),s(i,"fill","none"),s(i,"stroke","currentColor"),s(i,"stroke-linecap","round"),s(i,"stroke-linejoin","round"),s(i,"stroke-width","24"),s(l,"d","M199.99609,60.00005V208a8,8,0,0,1-8,8h-128a8,8,0,0,1-8-8v-148"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"stroke-linecap","round"),s(l,"stroke-linejoin","round"),s(l,"stroke-width","24"),s(u,"d","M168,60V36a16,16,0,0,0-16-16H104A16,16,0,0,0,88,36V60"),s(u,"fill","none"),s(u,"stroke","currentColor"),s(u,"stroke-linecap","round"),s(u,"stroke-linejoin","round"),s(u,"stroke-width","24"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"fill","currentColor"),s(t,"viewBox","0 0 256 256"),s(t,"class","svelte-1wfj0uw")},m(e,s){c(e,t,s),d(t,o),d(t,n),d(t,r),d(t,i),d(t,l),d(t,u)},d(e){e&&m(t)}}}function Se(e){let t,o,n;return o=new Z({props:{markdown:e[3].description}}),{c(){t=r("div"),i(o.$$.fragment),s(t,"class","description svelte-1wfj0uw")},m(e,r){c(e,t,r),u(o,t,null),n=!0},p(e,t){const n={};8&t&&(n.markdown=e[3].description),o.$set(n)},i(e){n||(p(o.$$.fragment,e),n=!0)},o(e){a(o.$$.fragment,e),n=!1},d(e){e&&m(t),h(o)}}}function Ne(e){let t,o,n;return{c(){t=r("textarea"),s(t,"cols","500"),s(t,"rows","10"),s(t,"class","description editing svelte-1wfj0uw")},m(r,i){c(r,t,i),I(t,e[2]),o||(n=T(t,"input",e[19]),o=!0)},p(e,o){4&o&&I(t,e[2])},i:S,o:S,d(e){e&&m(t),o=!1,n()}}}function Oe(e){let t,o,n;return o=new b({props:{loader:"PhotoMap",photos:e[5].photoSet}}),{c(){t=r("div"),i(o.$$.fragment),s(t,"class","albumMap svelte-1wfj0uw")},m(e,r){c(e,t,r),u(o,t,null),n=!0},p(e,t){const n={};32&t&&(n.photos=e[5].photoSet),o.$set(n)},i(e){n||(p(o.$$.fragment,e),n=!0)},o(e){a(o.$$.fragment,e),n=!1},d(e){e&&m(t),h(o)}}}function Be(e){let t;return{c(){t=r("div"),t.textContent="(There are no photos in this album… yet.)",s(t,"class","description svelte-1wfj0uw")},m(e,o){c(e,t,o)},p:S,i:S,o:S,d(e){e&&m(t)}}}function Ae(e){let t,o,n=e[3].photoGroups,r=[];for(let t=0;t<n.length;t+=1)r[t]=He(we(e,n,t));const i=e=>a(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=N()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);c(e,t,n),o=!0},p(e,o){if(16136&o){let l;for(n=e[3].photoGroups,l=0;l<n.length;l+=1){const i=we(e,n,l);r[l]?(r[l].p(i,o),p(r[l],1)):(r[l]=He(i),r[l].c(),p(r[l],1),r[l].m(t.parentNode,t))}for(f(),l=n.length;l<r.length;l+=1)i(l);$()}},i(e){if(!o){for(let e=0;e<n.length;e+=1)p(r[e]);o=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)a(r[e]);o=!1},d(e){O(r,e),e&&m(t)}}}function He(e){let t,o;return t=new ge({props:{photoGroup:e[24],photoGroupIndex:e[26]}}),t.$on("splitGroup",e[9]),t.$on("makeNewGroup",e[10]),t.$on("shiftGroup",e[11]),t.$on("mergeUp",e[12]),t.$on("deleteGroup",e[13]),t.$on("coverChanged",e[8]),t.$on("perusalChangeNeeded",e[20]),{c(){i(t.$$.fragment)},m(e,n){u(t,e,n),o=!0},p(e,o){const n={};8&o&&(n.photoGroup=e[24]),t.$set(n)},i(e){o||(p(t.$$.fragment,e),o=!0)},o(e){a(t.$$.fragment,e),o=!1},d(e){h(t,e)}}}function ze(e){let t,o,n,i;const l=[ve,ke],u=[];function d(e,t){return null==e[3]?0:1}return o=d(e),n=u[o]=l[o](e),{c(){t=r("div"),n.c(),s(t,"class","album svelte-1wfj0uw")},m(e,n){c(e,t,n),u[o].m(t,null),i=!0},p(e,[r]){let i=o;o=d(e),o===i?u[o].p(e,r):(f(),a(u[i],1,1,(()=>{u[i]=null})),$(),n=u[o],n?n.p(e,r):(n=u[o]=l[o](e),n.c()),p(n,1),n.m(t,null))},i(e){i||(p(n),i=!0)},o(e){a(n),i=!1},d(e){e&&m(t),u[o].d()}}}let Ee=!1;function Le(e,t,o){let n,r,i,l;v(e,x,(e=>o(3,n=e))),v(e,z,(e=>o(21,r=e))),v(e,y,(e=>o(4,i=e))),v(e,E,(e=>o(5,l=e)));var s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function l(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,s)}c((n=n.apply(e,t||[])).next())}))};const c=C();let u,d,p=!1;function a(){var e;return s(this,void 0,void 0,(function*(){if(null==n.hasMap||null==n.isPrivate)return;const t=yield D(`/album/edit/${n.id}`,{params:{hasMap:n.hasMap,isPrivate:n.isPrivate,description:n.description,title:n.title,coverPhoto:(null===(e=n.coverPhoto)||void 0===e?void 0:e.id)||-1},method:"POST",authorize:!0});t.success||console.error(t)}))}function h(e,t){return s(this,void 0,void 0,(function*(){const o=yield D("/group/new",{params:{albumID:n.id,fromGroup:e,photoIDs:t.map((e=>e.id))},method:"POST",authorize:!0});o.success?c("structuralChange"):console.error(o)}))}return[p,u,d,n,i,l,c,function(){return s(this,void 0,void 0,(function*(){p?(L(x,n.title=u,n),L(x,n.description=d,n),yield a(),o(0,p=!1)):(o(1,u=n.title),o(2,d=n.description),o(0,p=!0))}))},a,function(e){const t=r[0].id,o=[];e.detail.originGroup.photos.forEach((e=>{(e.id==t||o.length>0)&&o.push(e)})),h(e.detail.originGroup.id,o)},function(e){h(e.detail.originGroup.id,r)},function(e){return s(this,void 0,void 0,(function*(){const t=n.photoGroups.splice(e.detail.groupIdx,1)[0];L(x,n.photoGroups=n.photoGroups.slice(0,e.detail.groupIdx+e.detail.movement).concat(t).concat(n.photoGroups.slice(e.detail.groupIdx+e.detail.movement)),n);const o=yield D(`/album/reorderGroups/${n.id}`,{params:{newOrdering:n.photoGroups.map((e=>e.id))},method:"POST",authorize:!0});o.success||console.error(o)}))},function(e){return s(this,void 0,void 0,(function*(){if(0==e.detail.groupIdx)return void console.error("Invalid merge index.");const t=n.photoGroups[e.detail.groupIdx],o=n.photoGroups[e.detail.groupIdx-1],r=yield D(`/group/merge/${t.id}`,{params:{into:o.id},method:"POST",authorize:!0});r.success?c("structuralChange"):console.error(r)}))},function(e){return s(this,void 0,void 0,(function*(){const t=yield D("/group/delete",{authorize:!0,method:"POST",params:{groupID:e.detail.group.id}});t.success?c("structuralChange"):console.error(t)}))},function(e){return s(this,void 0,void 0,(function*(){const e=yield D("/album/delete",{authorize:!0,method:"POST",params:{albumID:n.id}});e.success?V("/"):console.error(e)}))},()=>c("uploaded"),function(){u=this.innerHTML,o(1,u)},()=>{L(x,n.isPrivate=!n.isPrivate,n),a()},()=>{L(x,n.hasMap=!n.hasMap,n),a()},function(){d=this.value,o(2,d)},function(t){P(e,t)}]}export default class extends e{constructor(e){super(),t(this,e,Le,ze,o,{})}}
