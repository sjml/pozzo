import{S as e,i as t,s as o,y as n,z as r,b as s,x as l,h as a,a7 as c,a4 as i,w as u,U as p,B as h,V as d,t as m,c as g,m as f,ad as P,a as $,d as v,g as y,f as k,e as w,N as q,j as L,k as C,l as x,ae as I,o as b,p as G,q as M,H as N,I as j,L as V,af as O,ag as S,r as A,ah as W}from"./main-8fa4d074.js";import{M as R}from"./Markdown-f5170e7f.js";function U(e){let t,o;return{c(){t=n("video"),r(t,"class","main svelte-18nqc1q"),t.src!==(o=e[0])&&r(t,"src",o),t.controls=!0,r(t,"poster",e[1])},m(e,o){s(e,t,o)},p(e,[n]){1&n&&t.src!==(o=e[0])&&r(t,"src",o),2&n&&r(t,"poster",e[1])},i:l,o:l,d(e){e&&a(t)}}}function z(e,t,o){let n,r,{photoWhichIsReallyAVideo:s}=t;return c((()=>{o(1,r=i("large",s.hash,s.uniq));const e=s.originalFilename.split(".").pop();o(0,n=i("orig",s.hash,s.uniq,e))})),e.$$set=e=>{"photoWhichIsReallyAVideo"in e&&o(2,s=e.photoWhichIsReallyAVideo)},[n,r,s]}class F extends e{constructor(e){super(),t(this,e,z,U,o,{photoWhichIsReallyAVideo:2})}}function T(e,t,o){const n=e.slice();return n[7]=t[o],n}function _(e){let t,o,l;return o=new R({props:{markdown:e[0].currentGroup.description}}),{c(){t=n("div"),g(o.$$.fragment),r(t,"class","interstitial svelte-1ys6eqe")},m(e,n){s(e,t,n),f(o,t,null),l=!0},p(e,t){const n={};1&t&&(n.markdown=e[0].currentGroup.description),o.$set(n)},i(e){l||(m(o.$$.fragment,e),l=!0)},o(e){$(o.$$.fragment,e),l=!1},d(e){e&&a(t),v(o)}}}function B(e){let t,o,n,r;const l=[H,D],c=[];function i(e,t){return e[0].currentPhoto.isVideo?1:0}return t=i(e),o=c[t]=l[t](e),{c(){o.c(),n=w()},m(e,o){c[t].m(e,o),s(e,n,o),r=!0},p(e,r){let s=t;t=i(e),t===s?c[t].p(e,r):(y(),$(c[s],1,1,(()=>{c[s]=null})),k(),o=c[t],o?o.p(e,r):(o=c[t]=l[t](e),o.c()),m(o,1),o.m(n.parentNode,n))},i(e){r||(m(o),r=!0)},o(e){$(o),r=!1},d(e){c[t].d(e),e&&a(n)}}}function D(e){let t,o;return t=new F({props:{photoWhichIsReallyAVideo:e[0].currentPhoto}}),{c(){g(t.$$.fragment)},m(e,n){f(t,e,n),o=!0},p(e,o){const n={};1&o&&(n.photoWhichIsReallyAVideo=e[0].currentPhoto),t.$set(n)},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function H(e){let t,o;return t=new W({props:{photo:e[0].currentPhoto,lazy:!1,size:ee,objectFit:"contain"}}),{c(){g(t.$$.fragment)},m(e,n){f(t,e,n),o=!0},p(e,o){const n={};1&o&&(n.photo=e[0].currentPhoto),t.$set(n)},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function E(e){let t,o,l,c,i,g,f,P,v,w,L,C,x,I,b,G,M,N,j,V,O,S,A,W=e[0].currentPhoto.title+"",R=(e[0].currentPhoto.tags.length>0?e[0].currentPhoto.tags.join(", "):"(None)")+"",U=e[0].currentPhoto.uploadTimeStamp+"",z=e[2].contentLicense.length>0&&J(e),F=e[0].currentPhoto.gpsLat&&e[0].currentPhoto.gpsLon&&Q(e),_=e[3],B=[];for(let t=0;t<_.length;t+=1)B[t]=Y(T(e,_,t));return{c(){t=n("div"),o=n("div"),l=n("span"),l.textContent="Title:",c=u(),i=p(W),g=u(),z&&z.c(),f=u(),P=n("hr"),v=u(),F&&F.c(),w=u(),L=n("table"),C=n("tr"),x=n("td"),x.textContent="Tags",I=u(),b=n("td"),G=p(R),M=u();for(let e=0;e<B.length;e+=1)B[e].c();N=u(),j=n("tr"),V=n("td"),V.textContent="Uploaded: ",O=n("td"),S=p(U),r(l,"class","label svelte-1ys6eqe"),r(o,"class","title svelte-1ys6eqe"),r(x,"class","label svelte-1ys6eqe"),r(b,"class","value"),r(V,"class","label svelte-1ys6eqe"),r(L,"class","photoMeta svelte-1ys6eqe"),r(t,"class","metadata svelte-1ys6eqe")},m(e,n){s(e,t,n),h(t,o),h(o,l),h(o,c),h(o,i),h(t,g),z&&z.m(t,null),h(t,f),h(t,P),h(t,v),F&&F.m(t,null),h(t,w),h(t,L),h(L,C),h(C,x),h(C,I),h(C,b),h(b,G),h(L,M);for(let e=0;e<B.length;e+=1)B[e].m(L,null);h(L,N),h(L,j),h(j,V),h(j,O),h(O,S),A=!0},p(e,o){if((!A||1&o)&&W!==(W=e[0].currentPhoto.title+"")&&d(i,W),e[2].contentLicense.length>0?z?(z.p(e,o),4&o&&m(z,1)):(z=J(e),z.c(),m(z,1),z.m(t,f)):z&&(y(),$(z,1,1,(()=>{z=null})),k()),e[0].currentPhoto.gpsLat&&e[0].currentPhoto.gpsLon?F?(F.p(e,o),1&o&&m(F,1)):(F=Q(e),F.c(),m(F,1),F.m(t,w)):F&&(y(),$(F,1,1,(()=>{F=null})),k()),(!A||1&o)&&R!==(R=(e[0].currentPhoto.tags.length>0?e[0].currentPhoto.tags.join(", "):"(None)")+"")&&d(G,R),9&o){let t;for(_=e[3],t=0;t<_.length;t+=1){const n=T(e,_,t);B[t]?B[t].p(n,o):(B[t]=Y(n),B[t].c(),B[t].m(L,N))}for(;t<B.length;t+=1)B[t].d(1);B.length=_.length}(!A||1&o)&&U!==(U=e[0].currentPhoto.uploadTimeStamp+"")&&d(S,U)},i(e){A||(m(z),m(F),A=!0)},o(e){$(z),$(F),A=!1},d(e){e&&a(t),z&&z.d(),F&&F.d(),q(B,e)}}}function J(e){let t,o,l,c,y,k,w,q,L,C,x,I,b,G,M,j,V,O,S,A,W,R,U,z,F,T=e[0].currentPhoto.width+"",_=e[0].currentPhoto.height+"",B=P(e[0].currentPhoto.size)+"",D=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`;return R=new N({props:{margin:"0 10px 0 0",$$slots:{default:[K]},$$scope:{ctx:e}}}),{c(){t=n("tr"),o=n("td"),o.textContent="Original: ",l=n("td"),c=p(T),y=p("Ã—"),k=p(_),w=p(" ("),q=p(B),L=p(")"),C=u(),x=n("div"),I=n("a"),b=n("img"),j=u(),V=p(D),S=u(),A=n("div"),W=n("a"),g(R.$$.fragment),r(o,"class","label svelte-1ys6eqe"),b.src!==(G=`/img/licenses/${e[2].contentLicense.slice(3)}.svg`)&&r(b,"src",G),r(b,"alt",M=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`),r(b,"class","svelte-1ys6eqe"),r(I,"href",O=`https://creativecommons.org/licenses/${e[2].contentLicense.slice(3)}/4.0/`),r(I,"target","_blank"),r(I,"class","svelte-1ys6eqe"),r(x,"class","license svelte-1ys6eqe"),r(W,"href",U=i("orig",e[0].currentPhoto.hash,e[0].currentPhoto.uniq)),r(W,"download",z=e[0].currentPhoto.originalFilename),r(W,"class","svelte-1ys6eqe"),r(A,"class","dlOrig svelte-1ys6eqe")},m(e,n){s(e,t,n),h(t,o),h(t,l),h(l,c),h(l,y),h(l,k),h(l,w),h(l,q),h(l,L),s(e,C,n),s(e,x,n),h(x,I),h(I,b),h(I,j),h(I,V),s(e,S,n),s(e,A,n),h(A,W),f(R,W,null),F=!0},p(e,t){(!F||1&t)&&T!==(T=e[0].currentPhoto.width+"")&&d(c,T),(!F||1&t)&&_!==(_=e[0].currentPhoto.height+"")&&d(k,_),(!F||1&t)&&B!==(B=P(e[0].currentPhoto.size)+"")&&d(q,B),(!F||4&t&&b.src!==(G=`/img/licenses/${e[2].contentLicense.slice(3)}.svg`))&&r(b,"src",G),(!F||4&t&&M!==(M=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`))&&r(b,"alt",M),(!F||4&t)&&D!==(D=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`)&&d(V,D),(!F||4&t&&O!==(O=`https://creativecommons.org/licenses/${e[2].contentLicense.slice(3)}/4.0/`))&&r(I,"href",O);const o={};1024&t&&(o.$$scope={dirty:t,ctx:e}),R.$set(o),(!F||1&t&&U!==(U=i("orig",e[0].currentPhoto.hash,e[0].currentPhoto.uniq)))&&r(W,"href",U),(!F||1&t&&z!==(z=e[0].currentPhoto.originalFilename))&&r(W,"download",z)},i(e){F||(m(R.$$.fragment,e),F=!0)},o(e){$(R.$$.fragment,e),F=!1},d(e){e&&a(t),e&&a(C),e&&a(x),e&&a(S),e&&a(A),v(R)}}}function K(e){let t,o,l,c,i,p,d;return{c(){t=j("svg"),o=j("rect"),l=j("polyline"),c=j("line"),i=j("path"),p=u(),d=n("div"),d.textContent="Download Original",r(o,"width","256"),r(o,"height","256"),r(o,"fill","none"),r(l,"points","86 110 128 152 170 110"),r(l,"fill","none"),r(l,"stroke","currentColor"),r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","24"),r(c,"x1","128"),r(c,"y1","39.97056"),r(c,"x2","128"),r(c,"y2","151.97056"),r(c,"fill","none"),r(c,"stroke","currentColor"),r(c,"stroke-linecap","round"),r(c,"stroke-linejoin","round"),r(c,"stroke-width","24"),r(i,"d","M224,136v72a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V136"),r(i,"fill","none"),r(i,"stroke","currentColor"),r(i,"stroke-linecap","round"),r(i,"stroke-linejoin","round"),r(i,"stroke-width","24"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"fill","currentColor"),r(t,"viewBox","0 0 256 256"),r(t,"class","svelte-1ys6eqe")},m(e,n){s(e,t,n),h(t,o),h(t,l),h(t,c),h(t,i),s(e,p,n),s(e,d,n)},d(e){e&&a(t),e&&a(p),e&&a(d)}}}function Q(e){let t,o,l,c,i,d,P,y,k,w,q,L,C,x,I,b;return o=new V({props:{loader:"PhotoMap",photos:[e[0].currentPhoto],exploreIconOnly:!0,popups:!1}}),{c(){t=n("div"),g(o.$$.fragment),l=u(),c=n("div"),i=p("{"),d=u(),P=n("a"),y=p("OpenStreetMap"),w=p("\n                | "),q=n("a"),L=p("Google Maps"),x=u(),I=p("}"),r(t,"class","photoMap svelte-1ys6eqe"),r(P,"target","_blank"),r(P,"href",k="https://www.openstreetmap.org/?mlat="+e[0].currentPhoto.gpsLat+"&mlon="+e[0].currentPhoto.gpsLon+"#map=18/"+e[0].currentPhoto.gpsLat+"/"+e[0].currentPhoto.gpsLon),r(P,"class","svelte-1ys6eqe"),r(q,"target","_blank"),r(q,"href",C="https://www.google.com/maps/search/?api=1&query="+e[0].currentPhoto.gpsLat+","+e[0].currentPhoto.gpsLon),r(q,"class","svelte-1ys6eqe"),r(c,"class","mapLinks svelte-1ys6eqe")},m(e,n){s(e,t,n),f(o,t,null),s(e,l,n),s(e,c,n),h(c,i),h(c,d),h(c,P),h(P,y),h(c,w),h(c,q),h(q,L),h(c,x),h(c,I),b=!0},p(e,t){const n={};1&t&&(n.photos=[e[0].currentPhoto]),o.$set(n),(!b||1&t&&k!==(k="https://www.openstreetmap.org/?mlat="+e[0].currentPhoto.gpsLat+"&mlon="+e[0].currentPhoto.gpsLon+"#map=18/"+e[0].currentPhoto.gpsLat+"/"+e[0].currentPhoto.gpsLon))&&r(P,"href",k),(!b||1&t&&C!==(C="https://www.google.com/maps/search/?api=1&query="+e[0].currentPhoto.gpsLat+","+e[0].currentPhoto.gpsLon))&&r(q,"href",C)},i(e){b||(m(o.$$.fragment,e),b=!0)},o(e){$(o.$$.fragment,e),b=!1},d(e){e&&a(t),v(o),e&&a(l),e&&a(c)}}}function X(e){let t,o,l,c,i,m,g=e[7].value+"",f=(null==e[7].filter?e[0].currentPhoto[e[7].key]:e[7].filter(e[0].currentPhoto[e[7].key]))+"";return{c(){t=n("tr"),o=n("td"),l=p(g),c=u(),i=n("td"),m=p(f),r(o,"class","label svelte-1ys6eqe"),r(i,"class","value")},m(e,n){s(e,t,n),h(t,o),h(o,l),h(t,c),h(t,i),h(i,m)},p(e,t){1&t&&f!==(f=(null==e[7].filter?e[0].currentPhoto[e[7].key]:e[7].filter(e[0].currentPhoto[e[7].key]))+"")&&d(m,f)},d(e){e&&a(t)}}}function Y(e){let t,o=null!=e[0].currentPhoto[e[7].key]&&X(e);return{c(){o&&o.c(),t=w()},m(e,n){o&&o.m(e,n),s(e,t,n)},p(e,n){null!=e[0].currentPhoto[e[7].key]?o?o.p(e,n):(o=X(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&a(t)}}}function Z(e){let t,o,l,c,i,p;const h=[B,_],d=[];function g(e,t){return e[0].currentPhoto?0:e[0].currentGroup?1:-1}~(o=g(e))&&(l=d[o]=h[o](e));let f=e[0].currentPhoto&&e[1]&&E(e);return{c(){t=n("div"),l&&l.c(),c=u(),f&&f.c(),i=w(),r(t,"class","fullPerusal svelte-1ys6eqe")},m(e,n){s(e,t,n),~o&&d[o].m(t,null),s(e,c,n),f&&f.m(e,n),s(e,i,n),p=!0},p(e,[n]){let r=o;o=g(e),o===r?~o&&d[o].p(e,n):(l&&(y(),$(d[r],1,1,(()=>{d[r]=null})),k()),~o?(l=d[o],l?l.p(e,n):(l=d[o]=h[o](e),l.c()),m(l,1),l.m(t,null)):l=null),e[0].currentPhoto&&e[1]?f?(f.p(e,n),3&n&&m(f,1)):(f=E(e),f.c(),m(f,1),f.m(i.parentNode,i)):f&&(y(),$(f,1,1,(()=>{f=null})),k())},i(e){p||(m(l),m(f),p=!0)},o(e){$(l),$(f),p=!1},d(e){e&&a(t),~o&&d[o].d(),e&&a(c),f&&f.d(e),e&&a(i)}}}const ee="large";function te(e,t,o){let n,r,s,l;L(e,C,(e=>o(0,n=e))),L(e,x,(e=>o(5,r=e))),L(e,I,(e=>o(1,s=e))),L(e,b,(e=>o(2,l=e)));const a=[{key:"creationDate",value:"Taken",filter:O},{key:"mime",value:"Format"},{key:"make",value:"Camera Make"},{key:"model",value:"Camera Model"},{key:"lens",value:"Lens"},{key:"aperture",value:"Aperture",filter:e=>`f/${e}`},{key:"iso",value:"ISO"},{key:"shutterSpeed",value:"Shutter Speed",filter:S}];let{perusalIdentifier:c}=t;return G((()=>{M(C,n.currentIdx=-1,n),M(C,n.currentPhoto=null,n),M(C,n.currentGroup=null,n)})),e.$$set=e=>{"perusalIdentifier"in e&&o(4,c=e.perusalIdentifier)},e.$$.update=()=>{16&e.$$.dirty&&function(e){if(e.startsWith("g")){M(C,n.currentPhoto=null,n);const t=parseInt(e.slice(1));if(isNaN(t))n.currentGroup;else{const e=n.nodes.findIndex((e=>!e.hasOwnProperty("hash")&&(e.id==t||void 0)));-1==e?M(C,n.currentGroup=null,n):(M(C,n.currentIdx=e,n),M(C,n.currentGroup=n.nodes[e],n))}}else{M(C,n.currentGroup=null,n);const t=parseInt(e);if(isNaN(t))M(C,n.currentPhoto=null,n);else{const e=n.nodes.findIndex((e=>!!e.hasOwnProperty("hash")&&(e.id==t||void 0)));-1==e?M(C,n.currentPhoto=null,n):(M(C,n.currentIdx=e,n),M(C,n.currentPhoto=n.nodes[e],n))}}null==n.currentPhoto&&null==n.currentGroup&&A(`/${r.type}/${r.slug}`)}(c)},[n,s,l,a,c]}export default class extends e{constructor(e){super(),t(this,e,te,Z,o,{perusalIdentifier:4})}}
