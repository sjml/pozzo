function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function a(t){let e;return l(t,(t=>e=t))(),e}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e,n,o){if(t){const i=d(t,e,n,o);return t[0](i)}}function d(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function f(t,e,n,o,i,r,s){const l=function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(e,o,i,r);if(l){const i=d(e,n,o,s);t.p(i,l)}}function h(t,e,n=e){return t.set(n),e}const p="undefined"!=typeof window;let m=p?()=>window.performance.now():()=>Date.now(),g=p?t=>requestAnimationFrame(t):t;const w=new Set;function $(t){w.forEach((e=>{e.c(t)||(w.delete(e),e.f())})),0!==w.size&&g($)}function v(t){let e;return 0===w.size&&g($),{promise:new Promise((n=>{w.add(e={c:t,f:n})})),abort(){w.delete(e)}}}function y(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function j(t){return document.createElement(t)}function C(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function T(){return E(" ")}function M(){return E("")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function L(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function D(t){return function(e){e.target===this&&t.call(this,e)}}function P(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e){t.value=null==e?"":e}let R;function B(){if(void 0===R){R=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){R=!0}}return R}function z(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=j("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=B();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=_(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=_(n.contentWindow,"resize",e)}),y(t,n),()=>{(o||i&&n.contentWindow)&&i(),x(n)}}function H(t,e,n){t.classList[n?"add":"remove"](e)}function I(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}class q{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=j(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)b(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(x)}}const N=new Set;let F,W=0;function V(t,e,n,o,i,r,s,l=0){const a=16.666/o;let c="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*r(t);c+=100*t+`%{${s(o,1-o)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=t.ownerDocument;N.add(f);const h=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(j("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${i}ms 1 both`,W+=1,d}function U(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),W-=i,W||g((()=>{W||(N.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),N.clear())})))}function Y(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:o}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),i="none"===o.transform?"":o.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function G(t){F=t}function X(){if(!F)throw new Error("Function called outside component initialization");return F}function Z(t){X().$$.on_mount.push(t)}function J(t){X().$$.on_destroy.push(t)}function K(){const t=X();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=I(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}function Q(t){return X().$$.context.get(t)}function tt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const et=[],nt=[],ot=[],it=[],rt=Promise.resolve();let st=!1;function lt(){st||(st=!0,rt.then(ft))}function at(){return lt(),rt}function ct(t){ot.push(t)}let ut=!1;const dt=new Set;function ft(){if(!ut){ut=!0;do{for(let t=0;t<et.length;t+=1){const e=et[t];G(e),ht(e.$$)}for(G(null),et.length=0;nt.length;)nt.pop()();for(let t=0;t<ot.length;t+=1){const e=ot[t];dt.has(e)||(dt.add(e),e())}ot.length=0}while(et.length);for(;it.length;)it.pop()();st=!1,ut=!1,dt.clear()}}function ht(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ct)}}let pt;function mt(){return pt||(pt=Promise.resolve(),pt.then((()=>{pt=null}))),pt}function gt(t,e,n){t.dispatchEvent(I(`${e?"intro":"outro"}${n}`))}const wt=new Set;let $t;function vt(){$t={r:0,c:[],p:$t}}function yt(){$t.r||i($t.c),$t=$t.p}function bt(t,e){t&&t.i&&(wt.delete(t),t.i(e))}function xt(t,e,n,o){if(t&&t.o){if(wt.has(t))return;wt.add(t),$t.c.push((()=>{wt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const kt={duration:0};function jt(n,o,s,l){let a=o(n,s),c=l?0:1,u=null,d=null,f=null;function h(){f&&U(n,f)}function p(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(o){const{delay:r=0,duration:s=300,easing:l=e,tick:g=t,css:w}=a||kt,$={start:m()+r,b:o};o||($.group=$t,$t.r+=1),u||d?d=$:(w&&(h(),f=V(n,c,o,s,r,l,w)),o&&g(0,1),u=p($,s),ct((()=>gt(n,o,"start"))),v((t=>{if(d&&t>d.start&&(u=p(d,s),d=null,gt(n,u.b,"start"),w&&(h(),f=V(n,c,u.b,u.duration,0,l,a.css))),u)if(t>=u.end)g(c=u.b,1-c),gt(n,u.b,"end"),d||(u.b?h():--u.group.r||i(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*l(e/u.duration),g(c,1-c)}return!(!u&&!d)})))}return{run(t){r(a)?mt().then((()=>{a=a(),g(t)})):g(t)},end(){h(),u=d=null}}}function Ct(t,e){const n=e.token={};function o(t,o,i,r){if(e.token!==n)return;e.resolved=r;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=r);const l=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(vt(),xt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),yt())})):e.block.d(1),l.c(),bt(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[o]=l),a&&ft()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=X();if(t.then((t=>{G(n),o(e.then,1,e.value,t),G(null)}),(t=>{if(G(n),o(e.catch,2,e.error,t),G(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var i}const Et="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Tt(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function Mt(t){t&&t.c()}function _t(t,e,o){const{fragment:s,on_mount:l,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,o),ct((()=>{const e=l.map(n).filter(r);a?a.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(ct)}function Lt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function St(e,n,r,s,l,a,c=[-1]){const u=F;G(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:c,skip_bound:!1};let f=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),f&&function(t,e){-1===t.$$.dirty[0]&&(et.push(t),lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),f=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(x)}else d.fragment&&d.fragment.c();n.intro&&bt(e.$$.fragment),_t(e,n.target,n.anchor),ft()}G(u)}class Dt{$destroy(){Lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pt=[];function Ot(e,n=t){let o;const i=[];function r(t){if(s(e,t)&&(e=t,o)){const t=!Pt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Pt.push(n,e)}if(t){for(let t=0;t<Pt.length;t+=2)Pt[t][0](Pt[t+1]);Pt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(s,l=t){const a=[s,l];return i.push(a),1===i.length&&(o=n(r)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}function At(t,e=!1){return(t=t.slice(t.startsWith("/#")?2:0,t.endsWith("/*")?-2:void 0)).startsWith("/")||(t="/"+t),"/"===t&&(t=""),e&&!t.endsWith("/")&&(t+="/"),t}function Rt(t,e,n){if(""===n)return t;if("/"===n[0])return n;let o=t=>t.split("/").filter((t=>""!==t)),i=o(t);return"/"+(e?o(e):[]).map(((t,e)=>i[e])).join("/")+"/"+n}function Bt(t,e,n,o){let i=[e,"data-"+e].reduce(((e,o)=>{let i=t.getAttribute(o);return n&&t.removeAttribute(o),null===i?e:i}),!1);return!o&&""===i||(i||o||!1)}function zt(t){let e=t.split("&").map((t=>t.split("="))).reduce(((t,e)=>{let n=e[0];if(!n)return t;let o=!(e.length>1)||e[e.length-1];return"string"==typeof o&&o.includes(",")&&(o=o.split(",")),void 0===t[n]?t[n]=[o]:t[n].push(o),t}),{});return Object.entries(e).reduce(((t,e)=>(t[e[0]]=e[1].length>1?e[1]:e[1][0],t)),{})}var Ht,It,qt={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run:function(t,e,n,o){return 1===t?e&&e():2===t?n&&n():o&&o()},getDeafault:function(){return window&&"srcdoc"!==window.location.pathname?1:3}},Nt=function(){let t,e=qt.getDeafault(),n=n=>t&&t(Ft(e));function o(t){t&&(e=t),window.onhashchange=window.onpopstate=It=null,e!==qt.OFF&&qt.run(e,(t=>window.onpopstate=n),(t=>window.onhashchange=n))&&n()}return{mode:t=>o(t),get:t=>Ft(e),go(t){(function(t,e){qt.run(t,(t=>history.pushState({},"",e)),(t=>window.location.hash=e),(t=>It=e))})(e,t),n()},start(e){t=e,o()},stop(){t=null,o(qt.OFF)}}}();function Ft(t){let e=Ht,n=Ht=qt.run(t,(t=>window.location.pathname+window.location.search),(t=>String(window.location.hash.slice(1)||"/")),(t=>It||"/")),o=n.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return{url:n,from:e,path:o[1]||"",query:zt(o[2]||""),hash:o[3]||""}}function Wt(t){let e=Q("tinro");e&&(e.exact||e.fallback)&&function(t){throw new Error("[Tinro] "+t)}(`${t.fallback?"<Route fallback>":`<Route path="${t.path}">`}  can't be inside ${e.fallback?"<Route fallback>":`<Route path="${e.path||"/"}"> with exact path`}`);let n=t.fallback?"fallbacks":"childs",o=Ot({}),i={router:{},exact:!1,pattern:null,meta:{},parent:e,fallback:t.fallback,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,update(t){i.exact=!t.path.endsWith("/*"),i.pattern=At(`${i.parent&&i.parent.pattern||""}${t.path}`),i.redirect=t.redirect,i.firstmatch=t.firstmatch,i.breadcrumb=t.breadcrumb,i.match()},register:()=>{if(i.parent)return i.parent[n].add(i),()=>{i.parent[n].delete(i),i.router.un&&i.router.un()}},show:()=>{t.onShow(),!i.fallback&&i.parent&&i.parent.activeChilds.add(i)},hide:()=>{t.onHide(),!i.fallback&&i.parent&&i.parent.activeChilds.delete(i)},match:async()=>{i.matched=!1;let{path:e,url:n,from:r,query:s}=i.router,l=function(t,e){t=At(t,!0),e=At(e,!0);let n=[],o={},i=!0,r=t.split("/").map((t=>t.startsWith(":")?(n.push(t.slice(1)),"([^\\/]+)"):t)).join("\\/"),s=e.match(new RegExp(`^${r}$`));return s||(i=!1,s=e.match(new RegExp(`^${r}`))),s?(n.forEach(((t,e)=>o[t]=s[e+1])),{exact:i,params:o,part:s[0].slice(0,-1)}):null}(i.pattern,e);if(!i.fallback&&l&&i.redirect&&(!i.exact||i.exact&&l.exact))return await at(),Ut.goto(Rt(e,i.parent&&i.parent.pattern,i.redirect));if(i.meta=l&&{from:r,url:n,query:s,match:l.part,pattern:i.pattern,breadcrumbs:i.parent&&i.parent.meta&&i.parent.meta.breadcrumbs.slice()||[],params:l.params,subscribe:o.subscribe},i.breadcrumb&&i.meta&&i.meta.breadcrumbs.push({name:i.breadcrumb,path:l.part}),o.set(i.meta),!l||i.fallback||!(!i.exact||i.exact&&l.exact)||i.parent&&i.parent.firstmatch&&i.parent.matched?i.hide():(t.onMeta(i.meta),i.parent&&(i.parent.matched=!0),i.show()),await at(),l&&!i.fallback&&(i.childs.size>0&&0==i.activeChilds.size||0==i.childs.size&&i.fallbacks.size>0)){let t=i;for(;0==t.fallbacks.size;)if(t=t.parent,!t)return;t&&t.fallbacks.forEach((t=>{t.redirect?Ut.goto(Rt("/",t.parent&&t.parent.pattern,t.redirect)):t.show()}))}}};return r="tinro",s=i,X().$$.context.set(r,s),Z((()=>i.register())),i.router.un=Ut.subscribe((t=>{i.router.path=t.path,i.router.url=t.url,i.router.query=t.query,i.router.from=t.from,null!==i.pattern&&i.match()})),i;var r,s}function Vt(){return Q("tinro").meta}var Ut=function(){let{subscribe:t}=Ot(Nt.get(),(t=>{Nt.start(t);let e=function(t){let e=e=>{let n=e.target.closest("a[href]"),o=n&&Bt(n,"target",!1,"_self"),i=n&&Bt(n,"tinro-ignore"),r=e.ctrlKey||e.metaKey||e.altKey||e.shiftKey;if("_self"==o&&!i&&!r&&n){let o=n.getAttribute("href").replace(/^\/#/,"");/^\/\/|^[a-zA-Z]+:/.test(o)||(e.preventDefault(),t(o.startsWith("/")?o:n.href.replace(window.location.origin,"")))}};return addEventListener("click",e),()=>removeEventListener("click",e)}(Nt.go);return()=>{Nt.stop(),e()}}));return{subscribe:t,goto:t=>Nt.go(t),params:Yt,meta:Vt,useHashNavigation:t=>Nt.mode(t?qt.HASH:qt.HISTORY),mode:{hash:()=>Nt.mode(qt.HASH),history:()=>Nt.mode(qt.HISTORY),memory:()=>Nt.mode(qt.MEMORY)}}}();function Yt(){return Q("tinro").meta.params}const Gt=t=>({params:2&t,meta:4&t}),Xt=t=>({params:t[1],meta:t[2]});function Zt(t){let e;const n=t[9].default,o=u(n,t,t[8],Xt);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&262&e&&f(o,n,t,t[8],e,Gt,Xt)},i(t){e||(bt(o,t),e=!0)},o(t){xt(o,t),e=!1},d(t){o&&o.d(t)}}}function Jt(t){let e,n,o=t[0]&&Zt(t);return{c(){o&&o.c(),e=M()},m(t,i){o&&o.m(t,i),b(t,e,i),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&bt(o,1)):(o=Zt(t),o.c(),bt(o,1),o.m(e.parentNode,e)):o&&(vt(),xt(o,1,1,(()=>{o=null})),yt())},i(t){n||(bt(o),n=!0)},o(t){xt(o),n=!1},d(t){o&&o.d(t),t&&x(e)}}}function Kt(t,e,n){let{$$slots:o={},$$scope:i}=e,{path:r="/*"}=e,{fallback:s=!1}=e,{redirect:l=!1}=e,{firstmatch:a=!1}=e,{breadcrumb:c=null}=e,u=!1,d={},f={};const h=Wt({fallback:s,onShow(){n(0,u=!0)},onHide(){n(0,u=!1)},onMeta(t){n(2,f=t),n(1,d=f.params)}});return t.$$set=t=>{"path"in t&&n(3,r=t.path),"fallback"in t&&n(4,s=t.fallback),"redirect"in t&&n(5,l=t.redirect),"firstmatch"in t&&n(6,a=t.firstmatch),"breadcrumb"in t&&n(7,c=t.breadcrumb),"$$scope"in t&&n(8,i=t.$$scope)},t.$$.update=()=>{232&t.$$.dirty&&h.update({path:r,redirect:l,firstmatch:a,breadcrumb:c})},[u,d,f,r,s,l,a,c,i,o]}class Qt extends Dt{constructor(t){super(),St(this,t,Kt,Jt,s,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}}const te=Ot({apiUri:`${location.origin}/api`,formats:[],siteTitle:!1,sizes:[],promo:!1,maxUploadBytes:0,simultaneousUploads:1}),ee=Ot(!1),ne=Ot(!1),oe=Ot(!1),ie=Ot(!1),re=Ot(null),se=Ot(null),le=Ot([]),ae=Ot(localStorage.getItem("pozzoLoginJWT")||"");ae.subscribe((t=>{localStorage.setItem("pozzoLoginJWT",t)}));const ce=function(e,n,o){const s=!Array.isArray(e),a=s?[e]:e,c=n.length<2;return{subscribe:Ot(o,(e=>{let o=!1;const u=[];let d=0,f=t;const h=()=>{if(d)return;f();const o=n(s?u[0]:u,e);c?e(o):f=r(o)?o:t},p=a.map(((t,e)=>l(t,(t=>{u[e]=t,d&=~(1<<e),o&&h()}),(()=>{d|=1<<e}))));return o=!0,h(),function(){i(p),f()}})).subscribe}}(ae,(t=>t.length>0));async function ue(t,e){var n;const o={};e=null!=e?e:{},o.method=null!==(n=e.method)&&void 0!==n?n:"GET",o.cache="no-cache",e.params&&(o.body=JSON.stringify(e.params)),e.authorize&&a(ae).length>0&&(o.headers={Authorization:`Bearer ${a(ae)}`});const i=await fetch(`${a(te).apiUri}${t}`,o);try{if(i.ok){const t=await i.json();return{success:!0,code:i.status,data:t}}{const t=await i.json();return{success:!1,code:i.status,data:t}}}catch(t){return{success:!1,code:400,data:{error:t,res:i}}}}function de(t){const e=t-1;return e*e*e+1}function fe(t,{delay:n=0,duration:o=400,easing:i=e}={}){const r=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:i,css:t=>"opacity: "+t*r}}function he(t){let e,n,o,r,s;const l=t[2].default,a=u(l,t,t[1],null);return{c(){e=j("div"),a&&a.c(),P(e,"class","overlay svelte-fvdid7")},m(n,i){b(n,e,i),a&&a.m(e,null),o=!0,r||(s=[_(e,"mousedown",S(t[3])),_(e,"mouseup",S(t[4])),_(e,"click",D(t[5]))],r=!0)},p(t,[e]){a&&a.p&&2&e&&f(a,l,t,t[1],e,null,null)},i(t){o||(bt(a,t),ct((()=>{n||(n=jt(e,fe,{duration:200},!0)),n.run(1)})),o=!0)},o(t){xt(a,t),n||(n=jt(e,fe,{duration:200},!1)),n.run(0),o=!1},d(t){t&&x(e),a&&a.d(t),t&&n&&n.end(),r=!1,i(s)}}}function pe(t,e,n){let o;c(t,ie,(t=>n(6,o=t)));let{$$slots:i={},$$scope:r}=e;const s=K();Z((()=>h(ie,o=!0,o))),J((()=>h(ie,o=!1,o)));return t.$$set=t=>{"$$scope"in t&&n(1,r=t.$$scope)},[s,r,i,function(e){tt(t,e)},function(e){tt(t,e)},()=>s("clickedOutside")]}class me extends Dt{constructor(t){super(),St(this,t,pe,he,s,{})}}function ge(t){let e,n,o,i,r;const s=t[6].default,l=u(s,t,t[5],null);return{c(){e=j("div"),l&&l.c(),P(e,"class","button svelte-ri7xwj"),P(e,"title",t[0]),P(e,"style",n=`margin: ${t[4]};`),H(e,"isBig",t[1]),H(e,"isToggled",t[2]),H(e,"isDisabled",t[3])},m(n,s){b(n,e,s),l&&l.m(e,null),o=!0,i||(r=_(e,"click",t[7]),i=!0)},p(t,[i]){l&&l.p&&32&i&&f(l,s,t,t[5],i,null,null),(!o||1&i)&&P(e,"title",t[0]),(!o||16&i&&n!==(n=`margin: ${t[4]};`))&&P(e,"style",n),2&i&&H(e,"isBig",t[1]),4&i&&H(e,"isToggled",t[2]),8&i&&H(e,"isDisabled",t[3])},i(t){o||(bt(l,t),o=!0)},o(t){xt(l,t),o=!1},d(t){t&&x(e),l&&l.d(t),i=!1,r()}}}function we(t,e,n){let{$$slots:o={},$$scope:i}=e,{title:r=null}=e,{isBig:s=!1}=e,{isToggled:l=!1}=e,{isDisabled:a=!1}=e,{margin:c="0"}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title),"isBig"in t&&n(1,s=t.isBig),"isToggled"in t&&n(2,l=t.isToggled),"isDisabled"in t&&n(3,a=t.isDisabled),"margin"in t&&n(4,c=t.margin),"$$scope"in t&&n(5,i=t.$$scope)},[r,s,l,a,c,i,o,function(e){tt(t,e)}]}class $e extends Dt{constructor(t){super(),St(this,t,we,ge,s,{title:0,isBig:1,isToggled:2,isDisabled:3,margin:4})}}function ve(t){let e,n;return e=new me({props:{$$slots:{default:[ye]},$$scope:{ctx:t}}}),e.$on("clickedOutside",t[14]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};524411&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ye(t){let e,n,o,r,s,l,a,c,u,d,f,h,p,m,g,w,$,v,k;return{c(){e=j("div"),n=j("form"),o=j("label"),r=E("User:\n                    "),s=j("input"),l=T(),a=j("label"),c=E("Password:\n                    "),u=j("input"),d=T(),f=j("button"),h=E("Log In"),m=T(),g=j("div"),w=E(t[5]),$=E(" "),P(s,"type","text"),s.disabled=t[4],P(s,"class","svelte-1y8y0wm"),P(o,"class","svelte-1y8y0wm"),P(u,"type","password"),u.disabled=t[4],P(u,"class","svelte-1y8y0wm"),P(a,"class","svelte-1y8y0wm"),P(f,"type","submit"),f.disabled=p=t[4]||!t[6],P(f,"class","svelte-1y8y0wm"),P(g,"class","loginMessage svelte-1y8y0wm"),P(e,"class","loginPrompt svelte-1y8y0wm")},m(i,p){b(i,e,p),y(e,n),y(n,o),y(o,r),y(o,s),t[11](s),A(s,t[0]),y(n,l),y(n,a),y(a,c),y(a,u),A(u,t[1]),y(n,d),y(n,f),y(f,h),y(e,m),y(e,g),y(g,w),y(g,$),v||(k=[_(s,"input",t[12]),_(u,"input",t[13]),_(n,"submit",L(t[10]))],v=!0)},p(t,e){16&e&&(s.disabled=t[4]),1&e&&s.value!==t[0]&&A(s,t[0]),16&e&&(u.disabled=t[4]),2&e&&u.value!==t[1]&&A(u,t[1]),80&e&&p!==(p=t[4]||!t[6])&&(f.disabled=p),32&e&&O(w,t[5])},d(n){n&&x(e),t[11](null),v=!1,i(k)}}}function be(t){let e,n;return e=new $e({props:{title:"Log Out",$$slots:{default:[ke]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};524288&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function xe(t){let e,n;return e=new $e({props:{title:"Log In",$$slots:{default:[je]},$$scope:{ctx:t}}}),e.$on("click",t[9]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};524288&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ke(t){let e,n,o,i,r;return{c(){e=C("svg"),n=C("rect"),o=C("polyline"),i=C("line"),r=C("path"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"points","174.029 86 216.029 128 174.029 170"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"x1","104"),P(i,"y1","128"),P(i,"x2","216"),P(i,"y2","128"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"d","M120,216H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8h72"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256")},m(t,s){b(t,e,s),y(e,n),y(e,o),y(e,i),y(e,r)},d(t){t&&x(e)}}}function je(t){let e,n,o,i,r;return{c(){e=C("svg"),n=C("rect"),o=C("circle"),i=C("circle"),r=C("path"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"cx","128"),P(o,"cy","128"),P(o,"r","96"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"cx","128"),P(i,"cy","120"),P(i,"r","40"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"d","M63.79905,199.37405a72.02812,72.02812,0,0,1,128.40177-.00026"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256")},m(t,s){b(t,e,s),y(e,n),y(e,o),y(e,i),y(e,r)},d(t){t&&x(e)}}}function Ce(t){let e,n,o,i,r,s=t[2]&&ve(t);const l=[xe,be],a=[];function c(t,e){return t[7]?1:0}return n=c(t),o=a[n]=l[n](t),{c(){s&&s.c(),e=T(),o.c(),i=M()},m(t,o){s&&s.m(t,o),b(t,e,o),a[n].m(t,o),b(t,i,o),r=!0},p(t,[r]){t[2]?s?(s.p(t,r),4&r&&bt(s,1)):(s=ve(t),s.c(),bt(s,1),s.m(e.parentNode,e)):s&&(vt(),xt(s,1,1,(()=>{s=null})),yt());let u=n;n=c(t),n===u?a[n].p(t,r):(vt(),xt(a[u],1,1,(()=>{a[u]=null})),yt(),o=a[n],o?o.p(t,r):(o=a[n]=l[n](t),o.c()),bt(o,1),o.m(i.parentNode,i))},i(t){r||(bt(s),bt(o),r=!0)},o(t){xt(s),xt(o),r=!1},d(t){s&&s.d(t),t&&x(e),a[n].d(t),t&&x(i)}}}function Ee(t,e,n){let o,i;c(t,ae,(t=>n(16,o=t))),c(t,ce,(t=>n(7,i=t)));var r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};Z((()=>{0!=o.length&&function(){r(this,void 0,void 0,(function*(){const t=yield ue("/login/check",{authorize:!0});t.success?s=setTimeout((()=>{s=null,h(ae,o=t.data.newToken,o)}),1e3*(t.data.validIn+.5)):-4==t.data.code||l()}))}()}));let s=null;function l(){null!=s&&(clearTimeout(s),s=null),h(ae,o="",o)}let a,u=!1;let d=!1,f="",p="",m="";let g=!1;return t.$$.update=()=>{3&t.$$.dirty&&(f.length>0&&p.length>0?n(6,g=!0):n(6,g=!1))},[f,p,u,a,d,m,g,i,l,function(){return r(this,void 0,void 0,(function*(){n(0,f=""),n(1,p=""),n(5,m=""),n(2,u=!0),yield at(),a.focus()}))},function(){return r(this,void 0,void 0,(function*(){n(4,d=!0);const t=yield ue("/login/",{params:{userName:f,password:p},method:"POST"});t.success?(h(ae,o=t.data.token,o),n(2,u=!1)):n(5,m="Incorrect!"),n(4,d=!1)}))},function(t){nt[t?"unshift":"push"]((()=>{a=t,n(3,a)}))},function(){f=this.value,n(0,f)},function(){p=this.value,n(1,p)},()=>n(2,u=!1)]}class Te extends Dt{constructor(t){super(),St(this,t,Ee,Ce,s,{})}}function Me(t){let e,n,o,i;function r(t,e){return t[0]?Le:_e}let s=r(t),l=s(t);return{c(){e=j("div"),n=C("svg"),o=C("path"),i=T(),l.c(),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","2"),P(o,"d","M9 5l7 7-7 7"),P(o,"class","svelte-jsqlcf"),P(n,"class","w-6 h-6 svelte-jsqlcf"),P(n,"fill","none"),P(n,"stroke","currentColor"),P(n,"viewBox","0 0 24 24"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(e,"class","backLink svelte-jsqlcf")},m(t,r){b(t,e,r),y(e,n),y(n,o),y(e,i),l.m(e,null)},p(t,n){s===(s=r(t))&&l?l.p(t,n):(l.d(1),l=s(t),l&&(l.c(),l.m(e,null)))},d(t){t&&x(e),l.d()}}}function _e(t){let e,n=t[1].title+"";return{c(){e=E(n)},m(t,n){b(t,e,n)},p(t,o){2&o&&n!==(n=t[1].title+"")&&O(e,n)},d(t){t&&x(e)}}}function Le(t){let e,n,o,i=t[1].title+"";return{c(){e=j("a"),n=E(i),P(e,"href",o=`/album/${t[1].slug}`),P(e,"class","svelte-jsqlcf")},m(t,o){b(t,e,o),y(e,n)},p(t,r){2&r&&i!==(i=t[1].title+"")&&O(n,i),2&r&&o!==(o=`/album/${t[1].slug}`)&&P(e,"href",o)},d(t){t&&x(e)}}}function Se(t){let e,n,o,i,r,s=t[0].title+"";return{c(){e=j("div"),n=C("svg"),o=C("path"),i=T(),r=E(s),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","2"),P(o,"d","M9 5l7 7-7 7"),P(o,"class","svelte-jsqlcf"),P(n,"class","w-6 h-6 svelte-jsqlcf"),P(n,"fill","none"),P(n,"stroke","currentColor"),P(n,"viewBox","0 0 24 24"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(e,"class","backLink svelte-jsqlcf")},m(t,s){b(t,e,s),y(e,n),y(n,o),y(e,i),y(e,r)},p(t,e){1&e&&s!==(s=t[0].title+"")&&O(r,s)},d(t){t&&x(e)}}}function De(t){let e,n,o=(t[5].siteTitle||"Pozzo")+"";return{c(){e=j("h2"),n=E(o),P(e,"class","svelte-jsqlcf")},m(t,o){b(t,e,o),y(e,n)},p(t,e){32&e&&o!==(o=(t[5].siteTitle||"Pozzo")+"")&&O(n,o)},d(t){t&&x(e)}}}function Pe(t){let e,n,o,i,r,s,l=(t[5].siteTitle||"Pozzo")+"";return{c(){e=j("a"),n=C("svg"),o=C("rect"),i=C("polyline"),r=T(),s=E(l),P(o,"width","256"),P(o,"height","256"),P(o,"fill","none"),P(o,"class","svelte-jsqlcf"),P(i,"points","160 208 80 128 160 48"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(i,"class","svelte-jsqlcf"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(n,"fill","currentColor"),P(n,"viewBox","0 0 256 256"),P(n,"class","svelte-jsqlcf"),P(e,"href","/"),P(e,"class","svelte-jsqlcf")},m(t,l){b(t,e,l),y(e,n),y(n,o),y(n,i),y(e,r),y(e,s)},p(t,e){32&e&&l!==(l=(t[5].siteTitle||"Pozzo")+"")&&O(s,l)},d(t){t&&x(e)}}}function Oe(t){let e,n,o,i,r,s,l,a=t[1].title+"";return{c(){e=j("a"),n=C("svg"),o=C("rect"),i=C("polyline"),r=T(),s=E(a),P(o,"width","256"),P(o,"height","256"),P(o,"fill","none"),P(o,"class","svelte-jsqlcf"),P(i,"points","160 208 80 128 160 48"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(i,"class","svelte-jsqlcf"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(n,"fill","currentColor"),P(n,"viewBox","0 0 256 256"),P(n,"class","svelte-jsqlcf"),P(e,"href",l=`/album/${t[1].slug}`),P(e,"class","svelte-jsqlcf")},m(t,l){b(t,e,l),y(e,n),y(n,o),y(n,i),y(e,r),y(e,s)},p(t,n){2&n&&a!==(a=t[1].title+"")&&O(s,a),2&n&&l!==(l=`/album/${t[1].slug}`)&&P(e,"href",l)},d(t){t&&x(e)}}}function Ae(t){let e,n,o,i,r,s,l;return e=new $e({props:{title:null==t[3]?"(No Previous Photo)":"Previous Photo",margin:"0 5px 0 0",isDisabled:null==t[3],$$slots:{default:[Re]},$$scope:{ctx:t}}}),o=new $e({props:{title:null==t[4]?"(No Next Photo)":"Next Photo",margin:"0 5px 0 0",isDisabled:null==t[4],$$slots:{default:[Be]},$$scope:{ctx:t}}}),s=new $e({props:{margin:"0 5px 0 0",title:(t[6]?"Hide":"View")+" Metadata",isToggled:t[6],$$slots:{default:[ze]},$$scope:{ctx:t}}}),s.$on("click",t[10]),{c(){Mt(e.$$.fragment),n=T(),Mt(o.$$.fragment),i=T(),r=j("div"),Mt(s.$$.fragment),P(r,"class","metaDataToggle svelte-jsqlcf")},m(t,a){_t(e,t,a),b(t,n,a),_t(o,t,a),b(t,i,a),b(t,r,a),_t(s,r,null),l=!0},p(t,n){const i={};8&n&&(i.title=null==t[3]?"(No Previous Photo)":"Previous Photo"),8&n&&(i.isDisabled=null==t[3]),32776&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const r={};16&n&&(r.title=null==t[4]?"(No Next Photo)":"Next Photo"),16&n&&(r.isDisabled=null==t[4]),32784&n&&(r.$$scope={dirty:n,ctx:t}),o.$set(r);const l={};64&n&&(l.title=(t[6]?"Hide":"View")+" Metadata"),64&n&&(l.isToggled=t[6]),32768&n&&(l.$$scope={dirty:n,ctx:t}),s.$set(l)},i(t){l||(bt(e.$$.fragment,t),bt(o.$$.fragment,t),bt(s.$$.fragment,t),l=!0)},o(t){xt(e.$$.fragment,t),xt(o.$$.fragment,t),xt(s.$$.fragment,t),l=!1},d(t){Lt(e,t),t&&x(n),Lt(o,t),t&&x(i),t&&x(r),Lt(s)}}}function Re(t){let e,n,o,i;return{c(){e=j("a"),n=C("svg"),o=C("rect"),i=C("path"),P(o,"width","256"),P(o,"height","256"),P(o,"fill","none"),P(o,"class","svelte-jsqlcf"),P(i,"d","M114.34277,229.65723l-96-96a8.003,8.003,0,0,1,0-11.31446l96-96A8.00065,8.00065,0,0,1,128,32V72h80a16.01833,16.01833,0,0,1,16,16v80a16.01833,16.01833,0,0,1-16,16H128v40a8.00066,8.00066,0,0,1-13.65723,5.65723Z"),P(i,"class","svelte-jsqlcf"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(n,"fill","currentColor"),P(n,"viewBox","0 0 256 256"),P(n,"class","svelte-jsqlcf"),P(e,"href",t[3]),P(e,"class","svelte-jsqlcf")},m(t,r){b(t,e,r),y(e,n),y(n,o),y(n,i)},p(t,n){8&n&&P(e,"href",t[3])},d(t){t&&x(e)}}}function Be(t){let e,n,o,i;return{c(){e=j("a"),n=C("svg"),o=C("rect"),i=C("path"),P(o,"width","256"),P(o,"height","256"),P(o,"fill","none"),P(o,"class","svelte-jsqlcf"),P(i,"d","M132.93848,231.39062A8,8,0,0,1,128,224V184H48a16.01833,16.01833,0,0,1-16-16V88A16.01833,16.01833,0,0,1,48,72h80V32a8.00065,8.00065,0,0,1,13.65723-5.65723l96,96a8.003,8.003,0,0,1,0,11.31446l-96,96A8.002,8.002,0,0,1,132.93848,231.39062Z"),P(i,"class","svelte-jsqlcf"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(n,"fill","currentColor"),P(n,"viewBox","0 0 256 256"),P(n,"class","svelte-jsqlcf"),P(e,"href",t[4]),P(e,"class","svelte-jsqlcf")},m(t,r){b(t,e,r),y(e,n),y(n,o),y(n,i)},p(t,n){16&n&&P(e,"href",t[4])},d(t){t&&x(e)}}}function ze(t){let e,n,o,i;return{c(){e=C("svg"),n=C("rect"),o=C("path"),i=C("circle"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(n,"class","svelte-jsqlcf"),P(o,"d","M122.66459,25.8792,42.0101,42.0101,25.8792,122.66459a8,8,0,0,0,2.1878,7.22578L132.51977,234.34315a8,8,0,0,0,11.31371,0l90.50967-90.50967a8,8,0,0,0,0-11.31371L129.89037,28.067A8,8,0,0,0,122.66459,25.8792Z"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(o,"class","svelte-jsqlcf"),P(i,"cx","84"),P(i,"cy","84"),P(i,"r","16"),P(i,"class","svelte-jsqlcf"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256"),P(e,"class","svelte-jsqlcf")},m(t,r){b(t,e,r),y(e,n),y(e,o),y(e,i)},d(t){t&&x(e)}}}function He(t){let e,n;return e=new $e({props:{margin:"0 5px 0 0",title:"Fullscreen",$$slots:{default:[qe]},$$scope:{ctx:t}}}),e.$on("click",t[12]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};32768&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Ie(t){let e,n;return e=new $e({props:{margin:"0 5px 0 0",title:"Exit Fullscreen",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),e.$on("click",t[11]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};32768&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function qe(t){let e,n,o,i,r,s,l,a,c,u;return{c(){e=C("svg"),n=C("rect"),o=C("polyline"),i=C("line"),r=C("polyline"),s=C("line"),l=C("polyline"),a=C("line"),c=C("polyline"),u=C("line"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(n,"class","svelte-jsqlcf"),P(o,"points","168 48 208 48 208 88"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(o,"class","svelte-jsqlcf"),P(i,"x1","152"),P(i,"y1","104"),P(i,"x2","208"),P(i,"y2","48"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(i,"class","svelte-jsqlcf"),P(r,"points","88 208 48 208 48 168"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(r,"class","svelte-jsqlcf"),P(s,"x1","104"),P(s,"y1","152"),P(s,"x2","48"),P(s,"y2","208"),P(s,"fill","none"),P(s,"stroke","currentColor"),P(s,"stroke-linecap","round"),P(s,"stroke-linejoin","round"),P(s,"stroke-width","24"),P(s,"class","svelte-jsqlcf"),P(l,"points","208 168 208 208 168 208"),P(l,"fill","none"),P(l,"stroke","currentColor"),P(l,"stroke-linecap","round"),P(l,"stroke-linejoin","round"),P(l,"stroke-width","24"),P(l,"class","svelte-jsqlcf"),P(a,"x1","152"),P(a,"y1","152"),P(a,"x2","208"),P(a,"y2","208"),P(a,"fill","none"),P(a,"stroke","currentColor"),P(a,"stroke-linecap","round"),P(a,"stroke-linejoin","round"),P(a,"stroke-width","24"),P(a,"class","svelte-jsqlcf"),P(c,"points","48 88 48 48 88 48"),P(c,"fill","none"),P(c,"stroke","currentColor"),P(c,"stroke-linecap","round"),P(c,"stroke-linejoin","round"),P(c,"stroke-width","24"),P(c,"class","svelte-jsqlcf"),P(u,"x1","104"),P(u,"y1","104"),P(u,"x2","48"),P(u,"y2","48"),P(u,"fill","none"),P(u,"stroke","currentColor"),P(u,"stroke-linecap","round"),P(u,"stroke-linejoin","round"),P(u,"stroke-width","24"),P(u,"class","svelte-jsqlcf"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256"),P(e,"class","svelte-jsqlcf")},m(t,d){b(t,e,d),y(e,n),y(e,o),y(e,i),y(e,r),y(e,s),y(e,l),y(e,a),y(e,c),y(e,u)},d(t){t&&x(e)}}}function Ne(t){let e,n,o,i,r,s;return{c(){e=C("svg"),n=C("rect"),o=C("polyline"),i=C("polyline"),r=C("polyline"),s=C("polyline"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(n,"class","svelte-jsqlcf"),P(o,"points","208 96 160 96 160 48"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(o,"class","svelte-jsqlcf"),P(i,"points","48 160 96 160 96 208"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(i,"class","svelte-jsqlcf"),P(r,"points","160 208 160 160 208 160"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(r,"class","svelte-jsqlcf"),P(s,"points","96 48 96 96 48 96"),P(s,"fill","none"),P(s,"stroke","currentColor"),P(s,"stroke-linecap","round"),P(s,"stroke-linejoin","round"),P(s,"stroke-width","24"),P(s,"class","svelte-jsqlcf"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256"),P(e,"class","svelte-jsqlcf")},m(t,l){b(t,e,l),y(e,n),y(e,o),y(e,i),y(e,r),y(e,s)},d(t){t&&x(e)}}}function Fe(t){let e,n,o,r,s,l,a,c,u,d,f,h,p,m,g,w,$,v,k,C,M,L,S,A=(t[5].siteTitle||"Pozzo")+"",R=t[1]&&Me(t),B=t[0]&&Se(t);function z(t,e){return t[0]?Oe:t[1]?Pe:De}let I=z(t),q=I(t),N=t[0]&&Ae(t);const F=[Ie,He],W=[];function V(t,e){return t[7]?0:1}return w=V(t),$=W[w]=F[w](t),C=new Te({}),{c(){e=j("nav"),n=j("div"),o=j("div"),r=j("a"),s=E(A),l=T(),R&&R.c(),a=T(),B&&B.c(),c=T(),u=j("div"),d=j("div"),q.c(),f=T(),h=j("div"),p=T(),N&&N.c(),m=T(),g=j("div"),$.c(),v=T(),k=j("div"),Mt(C.$$.fragment),P(r,"href","/"),P(r,"class","svelte-jsqlcf"),P(o,"class","homeLink svelte-jsqlcf"),P(n,"class","fullBreadcrumbs svelte-jsqlcf"),P(d,"class","backLink svelte-jsqlcf"),P(u,"class","backButton svelte-jsqlcf"),P(h,"class","spacer svelte-jsqlcf"),P(g,"class","fullscreenButton svelte-jsqlcf"),P(k,"class","login svelte-jsqlcf"),P(e,"class","svelte-jsqlcf"),H(e,"collapsed",t[2])},m(i,$){b(i,e,$),y(e,n),y(n,o),y(o,r),y(r,s),y(n,l),R&&R.m(n,null),y(n,a),B&&B.m(n,null),y(e,c),y(e,u),y(u,d),q.m(d,null),y(e,f),y(e,h),y(e,p),N&&N.m(e,null),y(e,m),y(e,g),W[w].m(g,null),y(e,v),y(e,k),_t(C,k,null),M=!0,L||(S=[_(window,"keydown",t[9]),_(e,"dblclick",D(t[13]))],L=!0)},p(t,[o]){(!M||32&o)&&A!==(A=(t[5].siteTitle||"Pozzo")+"")&&O(s,A),t[1]?R?R.p(t,o):(R=Me(t),R.c(),R.m(n,a)):R&&(R.d(1),R=null),t[0]?B?B.p(t,o):(B=Se(t),B.c(),B.m(n,null)):B&&(B.d(1),B=null),I===(I=z(t))&&q?q.p(t,o):(q.d(1),q=I(t),q&&(q.c(),q.m(d,null))),t[0]?N?(N.p(t,o),1&o&&bt(N,1)):(N=Ae(t),N.c(),bt(N,1),N.m(e,m)):N&&(vt(),xt(N,1,1,(()=>{N=null})),yt());let i=w;w=V(t),w===i?W[w].p(t,o):(vt(),xt(W[i],1,1,(()=>{W[i]=null})),yt(),$=W[w],$?$.p(t,o):($=W[w]=F[w](t),$.c()),bt($,1),$.m(g,null)),4&o&&H(e,"collapsed",t[2])},i(t){M||(bt(N),bt($),bt(C.$$.fragment,t),M=!0)},o(t){xt(N),xt($),xt(C.$$.fragment,t),M=!1},d(t){t&&x(e),R&&R.d(),B&&B.d(),q.d(),N&&N.d(),W[w].d(),Lt(C),L=!1,i(S)}}}function We(t,e,n){let o,i,r,s,l;c(t,se,(t=>n(0,o=t))),c(t,re,(t=>n(1,i=t))),c(t,te,(t=>n(5,r=t))),c(t,ee,(t=>n(6,s=t))),c(t,ne,(t=>n(7,l=t)));const a=K();let u=!1,d=null,f=null;return t.$$.update=()=>{3&t.$$.dirty&&function(t,e){if(null==t||null==e)return;const o=e.photos.findIndex((e=>e.id==t.id));-1!=o?(n(3,d=0==o?null:`/album/${e.slug}/${e.photos[o-1].id}`),o==e.photos.length-1?n(4,f=null):n(4,f=`/album/${e.slug}/${e.photos[o+1].id}`)):console.error("photo not in album!")}(o,i)},[o,i,u,d,f,r,s,l,a,function(t){"ArrowLeft"==t.key&&null!=d?Ut.goto(d):"ArrowRight"==t.key&&null!=f&&Ut.goto(f)},()=>h(ee,s=!s,s),()=>a("fullScreenOff"),()=>a("fullScreenOn"),()=>(n(2,u=!u),!1)]}class Ve extends Dt{constructor(t){super(),St(this,t,We,Fe,s,{})}}function Ue(t){let e,n,o,r,s,l,a,c,u,d,f,h,p,m,g,w,$,v,k,C,M,S,D,R,B,z,H;return{c(){e=j("div"),n=j("form"),o=j("label"),r=E("Site Name:\n                "),s=j("input"),l=T(),a=j("label"),c=E("User:\n                "),u=j("input"),d=T(),f=j("label"),h=E("Password:\n                "),p=j("input"),m=T(),g=j("label"),w=E("Verify Password:\n                "),$=j("input"),v=T(),k=j("button"),C=E("Configure Site"),S=T(),D=j("div"),R=E(t[6]),B=E(" "),P(s,"type","text"),s.disabled=t[5],P(s,"class","svelte-1xreyiu"),P(o,"class","svelte-1xreyiu"),P(u,"type","text"),u.disabled=t[5],P(u,"class","svelte-1xreyiu"),P(a,"class","svelte-1xreyiu"),P(p,"type","password"),p.disabled=t[5],P(p,"class","svelte-1xreyiu"),P(f,"class","svelte-1xreyiu"),P($,"type","password"),$.disabled=t[5],P($,"class","svelte-1xreyiu"),P(g,"class","svelte-1xreyiu"),P(k,"type","submit"),k.disabled=M=t[5]||!t[7],P(k,"class","svelte-1xreyiu"),P(D,"class","configMessage svelte-1xreyiu"),P(e,"class","configPrompt svelte-1xreyiu")},m(i,x){b(i,e,x),y(e,n),y(n,o),y(o,r),y(o,s),t[10](s),A(s,t[0]),y(n,l),y(n,a),y(a,c),y(a,u),A(u,t[1]),y(n,d),y(n,f),y(f,h),y(f,p),A(p,t[2]),y(n,m),y(n,g),y(g,w),y(g,$),A($,t[3]),y(n,v),y(n,k),y(k,C),y(e,S),y(e,D),y(D,R),y(D,B),z||(H=[_(s,"input",t[11]),_(u,"input",t[12]),_(p,"input",t[13]),_($,"input",t[14]),_(n,"submit",L(t[8]))],z=!0)},p(t,e){32&e&&(s.disabled=t[5]),1&e&&s.value!==t[0]&&A(s,t[0]),32&e&&(u.disabled=t[5]),2&e&&u.value!==t[1]&&A(u,t[1]),32&e&&(p.disabled=t[5]),4&e&&p.value!==t[2]&&A(p,t[2]),32&e&&($.disabled=t[5]),8&e&&$.value!==t[3]&&A($,t[3]),160&e&&M!==(M=t[5]||!t[7])&&(k.disabled=M),64&e&&O(R,t[6])},d(n){n&&x(e),t[10](null),z=!1,i(H)}}}function Ye(t){let e,n;return e=new me({props:{$$slots:{default:[Ue]},$$scope:{ctx:t}}}),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};131327&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Ge(t,e,n){let o,i;c(t,te,(t=>n(9,o=t))),c(t,ae,(t=>n(15,i=t)));var r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};let s;Z((()=>{s.focus()}));let l=!1,a="",u="",d="",f="",p="";let m=!1;return t.$$.update=()=>{512&t.$$.dirty&&!1!==o.siteTitle&&Ut.goto("/"),15&t.$$.dirty&&(a.length>0&&u.length>0&&d.length>0&&d==f?n(7,m=!0):n(7,m=!1))},[a,u,d,f,s,l,p,m,function(){return r(this,void 0,void 0,(function*(){n(5,l=!0);const t=yield ue("/setup",{params:{siteTitle:a,userName:u,password:d},method:"POST"});t.success?(h(te,o.siteTitle=a,o),h(ae,i=t.data.key,i),Ut.goto("/")):n(6,p="Something went wrong. :("),n(5,l=!1)}))},o,function(t){nt[t?"unshift":"push"]((()=>{s=t,n(4,s)}))},function(){a=this.value,n(0,a)},function(){u=this.value,n(1,u)},function(){d=this.value,n(2,d)},function(){f=this.value,n(3,f)}]}class Xe extends Dt{constructor(t){super(),St(this,t,Ge,Ye,s,{})}}var Ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Je(t){var e={exports:{}};return t(e,e.exports),e.exports
/*!
 * Copyright 2019 SmugMug, Inc.
 * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
 * @license
 */}var Ke=Je((function(t){(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,n,o,i=this.items.concat(t),r=this.width-(i.length-1)*this.spacing,s=i.reduce((function(t,e){return t+e.aspectRatio}),0),l=r/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(r/t.aspectRatio,"justify"),!0):s<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):s>this.maxAspectRatio?0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(r/s,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,n=this.items.reduce((function(t,e){return t+e.aspectRatio}),0),o=e/this.targetRowHeight,Math.abs(s-l)>Math.abs(n-o)?(this.completeLayout(e/n,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(r/s,"justify"),!0)):(this.items.push(Object.assign({},t)),this.completeLayout(r/s,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,e){var n,o,i,r,s,l=this.left,a=this.width-(this.items.length-1)*this.spacing;(void 0===e||["justify","center","left"].indexOf(e)<0)&&(e="left"),t!==(o=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)))?(this.height=o,n=a/o/(a/t)):(this.height=t,n=1),this.items.forEach((function(t){t.top=this.top,t.width=t.aspectRatio*this.height*n,t.height=this.height,t.left=l,l+=t.width+this.spacing}),this),"justify"===e?(l-=this.spacing+this.left,i=(l-this.width)/this.items.length,r=this.items.map((function(t,e){return Math.round((e+1)*i)})),1===this.items.length?this.items[0].width-=Math.round(i):this.items.forEach((function(t,e){e>0?(t.left-=r[e-1],t.width-=r[e]-r[e-1]):t.width-=r[e]}))):"center"===e&&(s=(this.width-l)/2,this.items.forEach((function(t){t.left+=s+this.spacing}),this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}}));
/*!
 * Copyright 2019 SmugMug, Inc.
 * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
 * @license
 */function Qe(t,e){var n;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(n=!0),new Ke({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:n,widowLayoutStyle:t.widowLayoutStyle})}function tn(t,e,n){return e._rows.push(n),e._layoutItems=e._layoutItems.concat(n.getItems()),e._containerHeight+=n.height+t.boxSpacing.vertical,n.items}var en=function(t,e){var n={},o={},i={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},r={},s={};return e=e||{},n=Object.assign(i,e),r.top=isNaN(parseFloat(n.containerPadding.top))?n.containerPadding:n.containerPadding.top,r.right=isNaN(parseFloat(n.containerPadding.right))?n.containerPadding:n.containerPadding.right,r.bottom=isNaN(parseFloat(n.containerPadding.bottom))?n.containerPadding:n.containerPadding.bottom,r.left=isNaN(parseFloat(n.containerPadding.left))?n.containerPadding:n.containerPadding.left,s.horizontal=isNaN(parseFloat(n.boxSpacing.horizontal))?n.boxSpacing:n.boxSpacing.horizontal,s.vertical=isNaN(parseFloat(n.boxSpacing.vertical))?n.boxSpacing:n.boxSpacing.vertical,n.containerPadding=r,n.boxSpacing=s,o._layoutItems=[],o._awakeItems=[],o._inViewportItems=[],o._leadingOrphans=[],o._trailingOrphans=[],o._containerHeight=n.containerPadding.top,o._rows=[],o._orphans=[],n._widowCount=0,function(t,e,n){var o,i,r,s=[];return t.forceAspectRatio&&n.forEach((function(e){e.forcedAspectRatio=!0,e.aspectRatio=t.forceAspectRatio})),n.some((function(n,r){if(isNaN(n.aspectRatio))throw new Error("Item "+r+" has an invalid aspect ratio");if(i||(i=Qe(t,e)),o=i.addItem(n),i.isLayoutComplete()){if(s=s.concat(tn(t,e,i)),e._rows.length>=t.maxNumRows)return i=null,!0;if(i=Qe(t,e),!o&&(o=i.addItem(n),i.isLayoutComplete())){if(s=s.concat(tn(t,e,i)),e._rows.length>=t.maxNumRows)return i=null,!0;i=Qe(t,e)}}})),i&&i.getItems().length&&t.showWidows&&(e._rows.length?(r=e._rows[e._rows.length-1].isBreakoutRow?e._rows[e._rows.length-1].targetRowHeight:e._rows[e._rows.length-1].height,i.forceComplete(!1,r)):i.forceComplete(!1),s=s.concat(tn(t,e,i)),t._widowCount=i.getItems().length),e._containerHeight=e._containerHeight-t.boxSpacing.vertical,e._containerHeight=e._containerHeight+t.containerPadding.bottom,{containerHeight:e._containerHeight,widowCount:t._widowCount,boxes:e._layoutItems}}(n,o,t.map((function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}})))};function nn(t){const e=Math.floor(Math.log(t)/Math.log(1024)),n=e<=1?0:2;return`${(t/Math.pow(1024,e)).toFixed(n)} ${["B","kB","MB","GB","TB"][e]}`}function on(t){const e=new Date(1e3*t);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}function rn(t){const e=1/t,n=Math.round(e);return Math.abs(n-e)<1e-4?`1/${n}`:t.toFixed(5).replace(/0*$/,"")}function sn(t,e,n,o="jpg"){return`/photos/${e.match(/.{1,2}/g).slice(0,3).map((t=>"ad"==t?"a_":t)).join("/")}/${e}_${n}_${t}.${o}`}function ln(t){return window.navigator.platform.startsWith("Mac")?t.metaKey:t.ctrlKey}function an(t){let e,n;return{c(){e=j("img"),e.src!==(n=t[2])&&P(e,"src",n),P(e,"alt",t[3]),P(e,"class","svelte-42cape")},m(t,n){b(t,e,n)},p(t,o){4&o&&e.src!==(n=t[2])&&P(e,"src",n),8&o&&P(e,"alt",t[3])},d(t){t&&x(e)}}}function cn(e){let n,o,i,r,s,l,a,c,u,d,f,h,p,m,g,w,$,v,k,C,M=e[0].file.name+"",_=nn(e[0].file.size)+"",L=e[2]&&an(e);return{c(){n=j("div"),o=j("div"),i=j("div"),r=j("div"),s=j("span"),s.textContent="Name:",l=T(),a=E(M),c=T(),u=j("div"),d=j("span"),d.textContent="Size:",f=T(),h=E(_),p=T(),m=j("div"),L&&L.c(),g=T(),w=j("div"),$=j("progress"),v=T(),k=j("div"),C=E(e[5]),P(s,"class","label svelte-42cape"),P(r,"class","name"),P(d,"class","label svelte-42cape"),P(u,"class","size"),P(i,"class","meta svelte-42cape"),P(m,"class","preview svelte-42cape"),P(o,"class","info svelte-42cape"),P($,"class","svelte-42cape"),P(k,"class","status svelte-42cape"),P(w,"class","status svelte-42cape"),P(n,"class","fileUploader svelte-42cape")},m(t,x){b(t,n,x),y(n,o),y(o,i),y(i,r),y(r,s),y(r,l),y(r,a),y(i,c),y(i,u),y(u,d),y(u,f),y(u,h),y(o,p),y(o,m),L&&L.m(m,null),y(n,g),y(n,w),y(w,$),e[7]($),y(w,v),y(w,k),y(k,C),e[8](n)},p(t,[e]){1&e&&M!==(M=t[0].file.name+"")&&O(a,M),1&e&&_!==(_=nn(t[0].file.size)+"")&&O(h,_),t[2]?L?L.p(t,e):(L=an(t),L.c(),L.m(m,null)):L&&(L.d(1),L=null),32&e&&O(C,t[5])},i:t,o:t,d(t){t&&x(n),L&&L.d(),e[7](null),e[8](null)}}}function un(t,e,n){let o;c(t,oe,(t=>n(9,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};const r=K();let s,l,{uploadStatus:u}=e,d=null,f="";Z((()=>{if(n(0,u.startUploadCallback=()=>p(),u),n(1,s.value=0,s),u.file.type.startsWith("image")){const t=new FileReader;t.readAsDataURL(u.file),t.onloadend=()=>{n(2,d=t.result),n(3,f=u.file.name)}}}));let h="Pending…";function p(){return i(this,void 0,void 0,(function*(){if(u.status>0)return;n(0,u.status=1,u),n(5,h="Uploading…"),o||l.scrollIntoView({behavior:"smooth",block:"center"});const t=yield async function(t,e=null,n=null){return new Promise(((o,i)=>{0==a(ae).length&&o({success:!1,code:403,data:{error:"Unauthorized"}});const r=t.file,s=`${a(te).apiUri}/upload`,l=new XMLHttpRequest,c=new FormData;l.upload.onprogress=t=>{if(t.lengthComputable){const o=t.loaded/t.total;e&&e(o),n&&o>=1&&n(!0)}},l.upload.onload=t=>{n&&n(!0)},l.upload.onerror=t=>{n&&n(!1)},l.upload.onabort=t=>{n&&n(!1)},l.onload=t=>{l.status>=200&&l.status<300?o({success:!0,code:l.status,data:JSON.parse(l.responseText)}):o({success:!1,code:l.status,data:JSON.parse(l.responseText)})},l.onerror=t=>{o({success:!1,code:500,data:{error:l.responseText}})},l.open("POST",s,!0),l.setRequestHeader("Authorization",`Bearer ${a(ae)}`);const u={order:t.index};null!=t.targetAlbum&&(u.albumID=t.targetAlbum),c.append("data",JSON.stringify(u)),c.append("mediaUp",r),l.send(c)}))}(u,(t=>n(1,s.value=t,s)),(t=>{n(5,h="Processing…"),s.removeAttribute("value")}));n(1,s.value=1,s),t.success?(n(5,h="Done!"),n(0,u.status=2,u),r("fileUploadDone")):(n(5,h="Failed :("),n(0,u.status=3,u),r("fileUploadFailed"))}))}return t.$$set=t=>{"uploadStatus"in t&&n(0,u=t.uploadStatus)},t.$$.update=()=>{3&t.$$.dirty&&s&&0==u.status&&n(1,s.value=0,s)},[u,s,d,f,l,h,p,function(t){nt[t?"unshift":"push"]((()=>{s=t,n(1,s),n(0,u)}))},function(t){nt[t?"unshift":"push"]((()=>{l=t,n(4,l)}))}]}class dn extends Dt{constructor(t){super(),St(this,t,un,cn,s,{uploadStatus:0,startUpload:6})}get startUpload(){return this.$$.ctx[6]}}function fn(t,e,n){const o=t.slice();return o[18]=e[n],o}function hn(t){let e,n,o,i,r,s,l;function a(t,e){return t[2]>0?mn:pn}let c=a(t),u=c(t);return i=new $e({props:{title:"Upload",isBig:!0,margin:"0 30px",$$slots:{default:[gn]},$$scope:{ctx:t}}}),i.$on("click",t[8]),s=new $e({props:{title:"Cancel",isBig:!0,margin:"0 30px",$$slots:{default:[wn]},$$scope:{ctx:t}}}),s.$on("click",t[9]),{c(){e=j("div"),u.c(),n=T(),o=j("div"),Mt(i.$$.fragment),r=T(),Mt(s.$$.fragment),P(o,"class","yesno svelte-hxbnie"),P(e,"class","confirm svelte-hxbnie")},m(t,a){b(t,e,a),u.m(e,null),y(e,n),y(e,o),_t(i,o,null),y(o,r),_t(s,o,null),l=!0},p(t,o){c===(c=a(t))&&u?u.p(t,o):(u.d(1),u=c(t),u&&(u.c(),u.m(e,n)));const r={};2097152&o&&(r.$$scope={dirty:o,ctx:t}),i.$set(r);const l={};2097152&o&&(l.$$scope={dirty:o,ctx:t}),s.$set(l)},i(t){l||(bt(i.$$.fragment,t),bt(s.$$.fragment,t),l=!0)},o(t){xt(i.$$.fragment,t),xt(s.$$.fragment,t),l=!1},d(t){t&&x(e),u.d(),Lt(i),Lt(s)}}}function pn(t){let e,n,o,i,r,s=t[0].length+"",l=1==t[0].length?"":"s";return{c(){e=E("Upload "),n=E(s),o=E(" image"),i=E(l),r=E("?")},m(t,s){b(t,e,s),b(t,n,s),b(t,o,s),b(t,i,s),b(t,r,s)},p(t,e){1&e&&s!==(s=t[0].length+"")&&O(n,s),1&e&&l!==(l=1==t[0].length?"":"s")&&O(i,l)},d(t){t&&x(e),t&&x(n),t&&x(o),t&&x(i),t&&x(r)}}}function mn(t){let e,n,o=1==t[2]?"This image ":"These images ";return{c(){e=E(o),n=E("did not upload\n                successfully. Do you want to try again?")},m(t,o){b(t,e,o),b(t,n,o)},p(t,n){4&n&&o!==(o=1==t[2]?"This image ":"These images ")&&O(e,o)},d(t){t&&x(e),t&&x(n)}}}function gn(t){let e,n,o,i,r,s;return{c(){e=C("svg"),n=C("rect"),o=C("circle"),i=C("polyline"),r=C("line"),s=E("\n                    Upload"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"cx","128"),P(o,"cy","128"),P(o,"r","96"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"points","94.059 121.941 128 88 161.941 121.941"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"x1","128"),P(r,"y1","168"),P(r,"x2","128"),P(r,"y2","88"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256")},m(t,l){b(t,e,l),y(e,n),y(e,o),y(e,i),y(e,r),b(t,s,l)},d(t){t&&x(e),t&&x(s)}}}function wn(t){let e,n,o,i,r,s;return{c(){e=C("svg"),n=C("rect"),o=C("circle"),i=C("line"),r=C("line"),s=E("\n                    Cancel"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"cx","128"),P(o,"cy","128"),P(o,"r","96"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"x1","160"),P(i,"y1","96"),P(i,"x2","96"),P(i,"y2","160"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"x1","160"),P(r,"y1","160"),P(r,"x2","96"),P(r,"y2","96"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256")},m(t,l){b(t,e,l),y(e,n),y(e,o),y(e,i),y(e,r),b(t,s,l)},d(t){t&&x(e),t&&x(s)}}}function $n(t){let e,n,o=t[1],i=[];for(let e=0;e<o.length;e+=1)i[e]=vn(fn(t,o,e));const r=t=>xt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=M()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);b(t,e,o),n=!0},p(t,n){if(194&n){let s;for(o=t[1],s=0;s<o.length;s+=1){const r=fn(t,o,s);i[s]?(i[s].p(r,n),bt(i[s],1)):(i[s]=vn(r),i[s].c(),bt(i[s],1),i[s].m(e.parentNode,e))}for(vt(),s=o.length;s<i.length;s+=1)r(s);yt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xt(i[t]);n=!1},d(t){k(i,t),t&&x(e)}}}function vn(t){let e,n;return e=new dn({props:{uploadStatus:t[18]}}),e.$on("fileUploadDone",t[6]),e.$on("fileUploadFailed",t[7]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.uploadStatus=t[18]),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function yn(t){let e,n,o,i,r,s=t[3]&&hn(t),l=t[1]&&$n(t);return{c(){e=j("div"),s&&s.c(),n=T(),l&&l.c(),P(e,"class","fileUploadList svelte-hxbnie")},m(a,c){b(a,e,c),s&&s.m(e,null),y(e,n),l&&l.m(e,null),o=!0,i||(r=_(e,"click",t[10]),i=!0)},p(t,[o]){t[3]?s?(s.p(t,o),8&o&&bt(s,1)):(s=hn(t),s.c(),bt(s,1),s.m(e,n)):s&&(vt(),xt(s,1,1,(()=>{s=null})),yt()),t[1]?l?(l.p(t,o),2&o&&bt(l,1)):(l=$n(t),l.c(),bt(l,1),l.m(e,null)):l&&(vt(),xt(l,1,1,(()=>{l=null})),yt())},i(t){o||(bt(s),bt(l),o=!0)},o(t){xt(s),xt(l),o=!1},d(t){t&&x(e),s&&s.d(),l&&l.d(),i=!1,r()}}}function bn(t){return t.preventDefault(),t.returnValue="","..."}function xn(t,e,n){let o,i,r;c(t,oe,(t=>n(4,o=t))),c(t,re,(t=>n(13,i=t))),c(t,te,(t=>n(14,r=t)));var s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};const l=K();let a,{fileList:u}=e;Z((()=>{h(oe,o=!1,o);let t=null,e=1;if(null!=i){t=i.id;const n=i.photos.map((t=>t.ordering));e=0==n.length?1:Math.max(...n)+1}n(1,a=u.map(((n,o)=>({file:n,status:0,index:o+e,targetAlbum:t}))))})),J((()=>{window.removeEventListener("beforeunload",bn)}));let d=0,f=0;function p(){for(;f<r.simultaneousUploads&&!(d>=a.length);)a[d].startUploadCallback(),d+=1,f+=1}function m(){f-=1,0==f&&d>=a.length?function(){if(0==g)return void l("finished");n(1,a=a.filter((t=>3==t.status))),n(3,w=!0)}():p()}let g=0;let w=!0;return t.$$set=t=>{"fileList"in t&&n(0,u=t.fileList)},[u,a,g,w,o,l,m,function(){n(2,g+=1),m()},function(){return s(this,void 0,void 0,(function*(){window.addEventListener("beforeunload",bn),n(2,g=0),d=0,f=0,n(3,w=!1);for(let t=0;t<a.length;t++)n(1,a[t].status=0,a);yield at(),yield new Promise((t=>setTimeout(t,400))),h(oe,o=!1,o),p()}))},()=>l("dismissed"),()=>h(oe,o=!0,o)]}class kn extends Dt{constructor(t){super(),St(this,t,xn,yn,s,{fileList:0})}}function jn(t){let e,n,o,i;const r=[En,Cn],s=[];function l(t,e){return t[0]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),o=M()},m(t,n){s[e].m(t,n),b(t,o,n),i=!0},p(t,i){let a=e;e=l(t),e===a?s[e].p(t,i):(vt(),xt(s[a],1,1,(()=>{s[a]=null})),yt(),n=s[e],n?n.p(t,i):(n=s[e]=r[e](t),n.c()),bt(n,1),n.m(o.parentNode,o))},i(t){i||(bt(n),i=!0)},o(t){xt(n),i=!1},d(t){s[e].d(t),t&&x(o)}}}function Cn(n){let o,s,l,a,c;return{c(){o=j("div"),s=j("div"),s.innerHTML='<div class="dragIndicatorOutline svelte-i5ms3h"></div>',P(s,"class","dragIndicator svelte-i5ms3h"),P(o,"class","uploadZone svelte-i5ms3h")},m(t,e){b(t,o,e),y(o,s),c=!0},p:t,i(n){c||(ct((()=>{a&&a.end(1),l||(l=function(n,o,i){let s,l,a=o(n,i),c=!1,u=0;function d(){s&&U(n,s)}function f(){const{delay:o=0,duration:i=300,easing:r=e,tick:f=t,css:h}=a||kt;h&&(s=V(n,0,1,i,o,r,h,u++)),f(0,1);const p=m()+o,g=p+i;l&&l.abort(),c=!0,ct((()=>gt(n,!0,"start"))),l=v((t=>{if(c){if(t>=g)return f(1,0),gt(n,!0,"end"),d(),c=!1;if(t>=p){const e=r((t-p)/i);f(e,1-e)}}return c}))}let h=!1;return{start(){h||(U(n),r(a)?(a=a(),mt().then(f)):f())},invalidate(){h=!1},end(){c&&(d(),c=!1)}}}(s,fe,{duration:100})),l.start()})),c=!0)},o(n){l&&l.invalidate(),a=function(n,o,s){let l,a=o(n,s),c=!0;const u=$t;function d(){const{delay:o=0,duration:r=300,easing:s=e,tick:d=t,css:f}=a||kt;f&&(l=V(n,1,0,r,o,s,f));const h=m()+o,p=h+r;ct((()=>gt(n,!1,"start"))),v((t=>{if(c){if(t>=p)return d(0,1),gt(n,!1,"end"),--u.r||i(u.c),!1;if(t>=h){const e=s((t-h)/r);d(1-e,e)}}return c}))}return u.r+=1,r(a)?mt().then((()=>{a=a(),d()})):d(),{end(t){t&&a.tick&&a.tick(1,0),c&&(l&&U(n,l),c=!1)}}}(s,fe,{duration:200}),c=!1},d(t){t&&x(o),t&&a&&a.end()}}}function En(t){let e,n,o;return n=new kn({props:{fileList:t[0]}}),n.$on("finished",t[4]),n.$on("dismissed",t[5]),{c(){e=j("div"),Mt(n.$$.fragment),P(e,"class","uploadZone svelte-i5ms3h")},m(t,i){b(t,e,i),_t(n,e,null),o=!0},p(t,e){const o={};1&e&&(o.fileList=t[0]),n.$set(o)},i(t){o||(bt(n.$$.fragment,t),o=!0)},o(t){xt(n.$$.fragment,t),o=!1},d(t){t&&x(e),Lt(n)}}}function Tn(t){let e,n,o,r,s=(t[1]>0||null!=t[0])&&t[2]&&jn(t);return{c(){s&&s.c(),e=M()},m(i,l){s&&s.m(i,l),b(i,e,l),n=!0,o||(r=[_(window,"dragover",L(t[6])),_(window,"dragenter",L(t[7])),_(window,"dragleave",L(t[8])),_(window,"drop",L(t[3]))],o=!0)},p(t,[n]){(t[1]>0||null!=t[0])&&t[2]?s?(s.p(t,n),7&n&&bt(s,1)):(s=jn(t),s.c(),bt(s,1),s.m(e.parentNode,e)):s&&(vt(),xt(s,1,1,(()=>{s=null})),yt())},i(t){n||(bt(s),n=!0)},o(t){xt(s),n=!1},d(t){s&&s.d(t),t&&x(e),o=!1,i(r)}}}function Mn(t,e,n){let o,i;c(t,te,(t=>n(9,o=t))),c(t,ce,(t=>n(2,i=t)));var r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};let s;const l=K();let a=0;function u(t){return!!o.formats.includes(t.type)&&!(t.size>o.maxUploadBytes)}return[s,a,i,function(t){return r(this,void 0,void 0,(function*(){n(1,a=0);let e=[...t.dataTransfer.files];e=e.filter(u),0!=e.length&&n(0,s=e)}))},function(){l("done",{numFiles:s.length}),n(0,s=null)},function(){n(0,s=null),l("done",{numFiles:0})},function(e){tt(t,e)},()=>n(1,++a),()=>n(1,--a)]}class _n extends Dt{constructor(t){super(),St(this,t,Mn,Tn,s,{})}}function Ln(t){let e,n,o,r,s,l,a,c,u,d,f,h,p,m,g,w,$,v,k,C;return{c(){e=j("div"),n=j("form"),o=j("label"),r=E("Album Name:\n                "),s=j("input"),l=T(),a=j("div"),c=j("label"),u=j("input"),d=E("\n                    Private"),f=T(),h=j("button"),p=E("Create Album"),g=T(),w=j("div"),$=E(t[3]),v=E(" "),P(s,"type","text"),s.disabled=t[2],P(s,"class","svelte-1kl6n6w"),P(o,"class","svelte-1kl6n6w"),P(u,"type","checkbox"),P(c,"class","svelte-1kl6n6w"),P(a,"class","visibilityToggle"),P(h,"type","submit"),h.disabled=m=t[2]||t[1].length<=0,P(h,"class","svelte-1kl6n6w"),P(w,"class","new-album-message svelte-1kl6n6w"),P(e,"class","newAlbumPrompt svelte-1kl6n6w")},m(i,m){b(i,e,m),y(e,n),y(n,o),y(o,r),y(o,s),t[7](s),A(s,t[1]),y(n,l),y(n,a),y(a,c),y(c,u),u.checked=t[4],y(c,d),y(n,f),y(n,h),y(h,p),y(e,g),y(e,w),y(w,$),y(w,v),k||(C=[_(s,"input",t[8]),_(u,"change",t[9]),_(n,"submit",L(t[6]))],k=!0)},p(t,e){4&e&&(s.disabled=t[2]),2&e&&s.value!==t[1]&&A(s,t[1]),16&e&&(u.checked=t[4]),6&e&&m!==(m=t[2]||t[1].length<=0)&&(h.disabled=m),8&e&&O($,t[3])},d(n){n&&x(e),t[7](null),k=!1,i(C)}}}function Sn(t){let e,n;return e=new me({props:{$$slots:{default:[Ln]},$$scope:{ctx:t}}}),e.$on("clickedOutside",t[10]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};8223&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Dn(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};const i=K();let r=null,s="",l=!1,a="",c=!1;Z((function(){return o(this,void 0,void 0,(function*(){n(1,s=""),n(3,a=""),yield at(),r.focus()}))}));return[r,s,l,a,c,i,function(){return o(this,void 0,void 0,(function*(){n(2,l=!0);const t=yield ue("/album/new",{params:{title:s,isPrivate:c},method:"POST",authorize:!0});t.success?i("done",{newAlbumID:t.data.albumID}):n(3,a="Duplicate name!"),n(2,l=!1)}))},function(t){nt[t?"unshift":"push"]((()=>{r=t,n(0,r)}))},function(){s=this.value,n(1,s)},function(){c=this.checked,n(4,c)},()=>i("dismissed")]}class Pn extends Dt{constructor(t){super(),St(this,t,Dn,Sn,s,{})}}const{document:On}=Et;function An(t,e,n){const o=t.slice();return o[20]=e[n],o}function Rn(e){let n,o;return n=new Pn({}),n.$on("dismissed",e[10]),n.$on("done",e[11]),{c(){Mt(n.$$.fragment)},m(t,e){_t(n,t,e),o=!0},p:t,i(t){o||(bt(n.$$.fragment,t),o=!0)},o(t){xt(n.$$.fragment,t),o=!1},d(t){Lt(n,t)}}}function Bn(t){let e,n;return e=new $e({props:{$$slots:{default:[zn]},$$scope:{ctx:t}}}),e.$on("click",t[12]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};8388800&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function zn(t){let e,n,o,i,r,s,l,a,c,u=t[7].coverPhoto==t[6][0].id?"Unset":"Set";return{c(){e=j("div"),n=C("svg"),o=C("rect"),i=C("polyline"),r=C("path"),s=T(),l=j("div"),a=E(u),c=E(" as Cover Photo"),P(o,"width","256"),P(o,"height","256"),P(o,"fill","none"),P(i,"points","200 176 127.993 136 56 176"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"d","M200,224l-72.0074-40L56,224V40a8,8,0,0,1,8-8H192a8,8,0,0,1,8,8Z"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(n,"fill","currentColor"),P(n,"viewBox","0 0 256 256"),P(n,"class","svelte-1lmumdt"),P(e,"class","cover menuItem svelte-1lmumdt")},m(t,u){b(t,e,u),y(e,n),y(n,o),y(n,i),y(n,r),y(e,s),y(e,l),y(l,a),y(l,c)},p(t,e){192&e&&u!==(u=t[7].coverPhoto==t[6][0].id?"Unset":"Set")&&O(a,u)},d(t){t&&x(e)}}}function Hn(t){let e,n,o;return{c(){e=C("svg"),n=C("rect"),o=C("polyline"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"points","208 96 128 176 48 96"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256"),P(e,"class","svelte-1lmumdt")},m(t,i){b(t,e,i),y(e,n),y(e,o)},d(t){t&&x(e)}}}function In(t){let e,n,o;return{c(){e=C("svg"),n=C("rect"),o=C("polyline"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"points","96 48 176 128 96 208"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256"),P(e,"class","svelte-1lmumdt")},m(t,i){b(t,e,i),y(e,n),y(e,o)},d(t){t&&x(e)}}}function qn(t){let e,n,o;function i(t,e){return t[4]?Hn:In}let r=i(t),s=r(t);return{c(){e=j("div"),s.c(),n=T(),o=j("div"),o.textContent="Move To",P(o,"class","label svelte-1lmumdt"),P(e,"class","move menuItem svelte-1lmumdt")},m(t,i){b(t,e,i),s.m(e,null),y(e,n),y(e,o)},p(t,o){r!==(r=i(t))&&(s.d(1),s=r(t),s&&(s.c(),s.m(e,n)))},d(t){t&&x(e),s.d()}}}function Nn(t){let e,n,o,i,r,s,l;n=new $e({props:{$$slots:{default:[Fn]},$$scope:{ctx:t}}});let a=t[3],c=[];for(let e=0;e<a.length;e+=1)c[e]=Un(An(t,a,e));const u=t=>xt(c[t],1,1,(()=>{c[t]=null}));return{c(){e=j("div"),Mt(n.$$.fragment),o=T();for(let t=0;t<c.length;t+=1)c[t].c();i=M(),P(e,"class","album menuItem svelte-1lmumdt")},m(a,u){b(a,e,u),_t(n,e,null),b(a,o,u);for(let t=0;t<c.length;t+=1)c[t].m(a,u);b(a,i,u),r=!0,s||(l=_(e,"click",t[14]),s=!0)},p(t,e){const o={};if(8388608&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o),392&e){let n;for(a=t[3],n=0;n<a.length;n+=1){const o=An(t,a,n);c[n]?(c[n].p(o,e),bt(c[n],1)):(c[n]=Un(o),c[n].c(),bt(c[n],1),c[n].m(i.parentNode,i))}for(vt(),n=a.length;n<c.length;n+=1)u(n);yt()}},i(t){if(!r){bt(n.$$.fragment,t);for(let t=0;t<a.length;t+=1)bt(c[t]);r=!0}},o(t){xt(n.$$.fragment,t),c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)xt(c[t]);r=!1},d(t){t&&x(e),Lt(n),t&&x(o),k(c,t),t&&x(i),s=!1,l()}}}function Fn(t){let e,n,o,i,r,s,l;return{c(){e=C("svg"),n=C("rect"),o=C("circle"),i=C("line"),r=C("line"),s=T(),l=j("div"),l.textContent="New Album…",P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"cx","128"),P(o,"cy","128"),P(o,"r","96"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"x1","88"),P(i,"y1","128"),P(i,"x2","168"),P(i,"y2","128"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"x1","128"),P(r,"y1","88"),P(r,"x2","128"),P(r,"y2","168"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256"),P(e,"class","svelte-1lmumdt"),P(l,"class","label svelte-1lmumdt")},m(t,a){b(t,e,a),y(e,n),y(e,o),y(e,i),y(e,r),b(t,s,a),b(t,l,a)},d(t){t&&x(e),t&&x(s),t&&x(l)}}}function Wn(t){let e,n;return e=new $e({props:{$$slots:{default:[Vn]},$$scope:{ctx:t}}}),e.$on("click",(function(...e){return t[15](t[20],...e)})),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(n,o){t=n;const i={};8388616&o&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Vn(t){let e,n,o,i,r,s,l,a,c,u,d=t[20].title+"";return{c(){e=j("div"),n=C("svg"),o=C("rect"),i=C("rect"),r=C("path"),s=C("circle"),l=T(),a=j("div"),c=E(d),u=T(),P(o,"width","256"),P(o,"height","256"),P(o,"fill","none"),P(i,"x","32"),P(i,"y","48"),P(i,"width","192"),P(i,"height","160"),P(i,"rx","8"),P(i,"stroke-width","24"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"fill","none"),P(r,"d","M32,167.99982l50.343-50.343a8,8,0,0,1,11.31371,0l44.68629,44.6863a8,8,0,0,0,11.31371,0l20.68629-20.6863a8,8,0,0,1,11.31371,0L223.99982,184"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(s,"cx","156"),P(s,"cy","100"),P(s,"r","16"),P(n,"xmlns","http://www.w3.org/2000/svg"),P(n,"fill","currentColor"),P(n,"viewBox","0 0 256 256"),P(n,"class","svelte-1lmumdt"),P(a,"class","label svelte-1lmumdt"),P(e,"class","album menuItem svelte-1lmumdt")},m(t,d){b(t,e,d),y(e,n),y(n,o),y(n,i),y(n,r),y(n,s),y(e,l),y(e,a),y(a,c),b(t,u,d)},p(t,e){8&e&&d!==(d=t[20].title+"")&&O(c,d)},d(t){t&&x(e),t&&x(u)}}}function Un(t){let e,n,o=t[20].id!=t[7].id&&Wn(t);return{c(){o&&o.c(),e=M()},m(t,i){o&&o.m(t,i),b(t,e,i),n=!0},p(t,n){t[20].id!=t[7].id?o?(o.p(t,n),136&n&&bt(o,1)):(o=Wn(t),o.c(),bt(o,1),o.m(e.parentNode,e)):o&&(vt(),xt(o,1,1,(()=>{o=null})),yt())},i(t){n||(bt(o),n=!0)},o(t){xt(o),n=!1},d(t){o&&o.d(t),t&&x(e)}}}function Yn(t){let e;return{c(){e=j("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256" class="svelte-1lmumdt"><rect width="256" height="256" fill="none"></rect><line x1="215.99609" y1="60" x2="39.99609" y2="60.00005" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="104" y1="104" x2="104" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="152" y1="104" x2="152" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><path d="M199.99609,60.00005V208a8,8,0,0,1-8,8h-128a8,8,0,0,1-8-8v-148" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></path><path d="M168,60V36a16,16,0,0,0-16-16H104A16,16,0,0,0,88,36V60" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></path></svg> \n            <div class="label svelte-1lmumdt">Delete</div>',P(e,"class","delete menuItem svelte-1lmumdt")},m(t,n){b(t,e,n)},d(t){t&&x(e)}}}function Gn(t){let e,n,o,i,r,s,l,a,c,u,d,f,h,p,m,g,w,$,v=t[6].length+"",k=1==t[6].length?"":"s",C=t[5]&&Rn(t),M=1==t[6].length&&Bn(t);d=new $e({props:{$$slots:{default:[qn]},$$scope:{ctx:t}}}),d.$on("click",t[13]);let L=t[4]&&Nn(t);return p=new $e({props:{$$slots:{default:[Yn]},$$scope:{ctx:t}}}),p.$on("click",t[16]),{c(){e=T(),C&&C.c(),n=T(),o=j("div"),i=j("div"),r=E(v),s=E(" photo"),l=E(k),a=E(" selected"),c=T(),M&&M.c(),u=T(),Mt(d.$$.fragment),f=T(),L&&L.c(),h=T(),Mt(p.$$.fragment),P(i,"class","header menuItem svelte-1lmumdt"),P(o,"class","contextMenu svelte-1lmumdt"),P(o,"style",m=`left: ${t[0]}px; top: ${t[1]}px`)},m(m,v){b(m,e,v),C&&C.m(m,v),b(m,n,v),b(m,o,v),y(o,i),y(i,r),y(i,s),y(i,l),y(i,a),y(o,c),M&&M.m(o,null),y(o,u),_t(d,o,null),y(o,f),L&&L.m(o,null),y(o,h),_t(p,o,null),t[17](o),g=!0,w||($=_(On.body,"click",t[9]),w=!0)},p(t,[e]){t[5]?C?(C.p(t,e),32&e&&bt(C,1)):(C=Rn(t),C.c(),bt(C,1),C.m(n.parentNode,n)):C&&(vt(),xt(C,1,1,(()=>{C=null})),yt()),(!g||64&e)&&v!==(v=t[6].length+"")&&O(r,v),(!g||64&e)&&k!==(k=1==t[6].length?"":"s")&&O(l,k),1==t[6].length?M?(M.p(t,e),64&e&&bt(M,1)):(M=Bn(t),M.c(),bt(M,1),M.m(o,u)):M&&(vt(),xt(M,1,1,(()=>{M=null})),yt());const i={};8388624&e&&(i.$$scope={dirty:e,ctx:t}),d.$set(i),t[4]?L?(L.p(t,e),16&e&&bt(L,1)):(L=Nn(t),L.c(),bt(L,1),L.m(o,h)):L&&(vt(),xt(L,1,1,(()=>{L=null})),yt());const s={};8388608&e&&(s.$$scope={dirty:e,ctx:t}),p.$set(s),(!g||3&e&&m!==(m=`left: ${t[0]}px; top: ${t[1]}px`))&&P(o,"style",m)},i(t){g||(bt(C),bt(M),bt(d.$$.fragment,t),bt(L),bt(p.$$.fragment,t),g=!0)},o(t){xt(C),xt(M),xt(d.$$.fragment,t),xt(L),xt(p.$$.fragment,t),g=!1},d(i){i&&x(e),C&&C.d(i),i&&x(n),i&&x(o),M&&M.d(),Lt(d),L&&L.d(),Lt(p),t[17](null),w=!1,$()}}}function Xn(t,e,n){let o,i;c(t,le,(t=>n(6,o=t))),c(t,re,(t=>n(7,i=t)));var r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};const s=K();let{posX:l}=e,{posY:a}=e,u=null,d=[],f=!1,h=!1;Z((()=>{!function(){r(this,void 0,void 0,(function*(){const t=yield ue("/album/list",{authorize:!0});t.success?n(3,d=t.data):console.error(t)}))}(),u.clientWidth+l>document.body.clientWidth&&n(0,l-=u.clientWidth),u.clientHeight+a>document.body.clientHeight&&n(1,a-=u.clientHeight)}));return t.$$set=t=>{"posX"in t&&n(0,l=t.posX),"posY"in t&&n(1,a=t.posY)},[l,a,u,d,f,h,o,i,s,function(t){h||(t.clientX<l||t.clientX>l+u.clientWidth||t.clientY<a||t.clientY>a+u.clientHeight)&&s("dismissed")},()=>n(5,h=!1),t=>s("move",{targetAlbumID:t.detail.newAlbumID}),()=>s("coverPhotoClicked",{}),()=>n(4,f=!f),()=>n(5,h=!0),(t,e)=>s("move",{targetAlbumID:t.id}),()=>s("delete",{}),function(t){nt[t?"unshift":"push"]((()=>{u=t,n(2,u)}))}]}class Zn extends Dt{constructor(t){super(),St(this,t,Xn,Gn,s,{posX:0,posY:1})}}function Jn(t){let e,n;return e=new Zn({props:{posX:t[0],posY:t[1]}}),e.$on("dismissed",t[11]),e.$on("delete",t[4]),e.$on("move",t[5]),e.$on("coverPhotoClicked",t[6]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.posX=t[0]),2&n&&(o.posY=t[1]),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Kn(t){let e,n,o,r,s,l=t[2]&&Jn(t);const a=t[10].default,c=u(a,t,t[9],null);return{c(){e=T(),l&&l.c(),n=T(),c&&c.c()},m(i,a){b(i,e,a),l&&l.m(i,a),b(i,n,a),c&&c.m(i,a),o=!0,r||(s=[_(document.body,"contextmenu",t[3]),_(document.body,"keydown",t[7])],r=!0)},p(t,[e]){t[2]?l?(l.p(t,e),4&e&&bt(l,1)):(l=Jn(t),l.c(),bt(l,1),l.m(n.parentNode,n)):l&&(vt(),xt(l,1,1,(()=>{l=null})),yt()),c&&c.p&&512&e&&f(c,a,t,t[9],e,null,null)},i(t){o||(bt(l),bt(c,t),o=!0)},o(t){xt(l),xt(c,t),o=!1},d(t){t&&x(e),l&&l.d(t),t&&x(n),c&&c.d(t),r=!1,i(s)}}}function Qn(t,e,n){let o,i,r,s;c(t,ce,(t=>n(12,o=t))),c(t,le,(t=>n(13,i=t))),c(t,re,(t=>n(14,r=t))),c(t,ie,(t=>n(15,s=t)));let{$$slots:l={},$$scope:a}=e;var u=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};const d=K();let{stubs:f=[]}=e,p=-1,m=-1,g=!1;return t.$$set=t=>{"stubs"in t&&n(8,f=t.stubs),"$$scope"in t&&n(9,a=t.$$scope)},[p,m,g,function(t){return u(this,void 0,void 0,(function*(){o&&(t.preventDefault(),g&&(n(2,g=!1),yield at()),n(0,p=t.clientX),n(1,m=t.clientY),n(2,g=!0))}))},function(t){n(8,f=f.filter((t=>i.indexOf(t)<0))),d("deleted",{newStubs:f}),n(2,g=!1),h(le,i=[],i)},function(t){n(8,f=f.filter((t=>i.indexOf(t)<0))),d("moved",{newStubs:f,targetAlbumID:t.detail.targetAlbumID}),n(2,g=!1),h(le,i=[],i)},function(t){r.coverPhoto==i[0].id?h(re,r.coverPhoto=-1,r):h(re,r.coverPhoto=i[0].id,r),d("coverChanged"),n(2,g=!1),h(le,i=[],i)},function(t){o&&(g||s||("a"==t.key&&ln(t)&&(h(le,i=f,i),t.preventDefault()),"d"==t.key&&ln(t)&&(h(le,i=[],i),t.preventDefault())))},f,a,l,()=>n(2,g=!1)]}class to extends Dt{constructor(t){super(),St(this,t,Qn,Kn,s,{stubs:8})}}var eo,no=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],oo=Object.defineProperty({decode83:function(t){for(var e=0,n=0;n<t.length;n++){var o=t[n];e=83*e+no.indexOf(o)}return e},encode83:function(t,e){for(var n="",o=1;o<=e;o++){var i=Math.floor(t)/Math.pow(83,e-o)%83;n+=no[Math.floor(i)]}return n}},"__esModule",{value:!0}),io=Je((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.sRGBToLinear=function(t){var e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},e.linearTosRGB=function(t){var e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.round(12.92*e*255+.5):Math.round(255*(1.055*Math.pow(e,1/2.4)-.055)+.5)},e.sign=function(t){return t<0?-1:1},e.signPow=function(t,n){return e.sign(t)*Math.pow(Math.abs(t),n)}})),ro=Ze&&Ze.__extends||(eo=function(t,e){return(eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}eo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),so=function(t){function e(e){var n=t.call(this,e)||this;return n.name="ValidationError",n.message=e,n}return ro(e,t),e}(Error),lo=Object.defineProperty({ValidationError:so},"__esModule",{value:!0}),ao=function(t){if(!t||t.length<6)throw new lo.ValidationError("The blurhash string must be at least 6 characters");var e=oo.decode83(t[0]),n=Math.floor(e/9)+1,o=e%9+1;if(t.length!==4+2*o*n)throw new lo.ValidationError("blurhash length mismatch: length is "+t.length+" but it should be "+(4+2*o*n))},co=function(t){var e=t>>16,n=t>>8&255,o=255&t;return[io.sRGBToLinear(e),io.sRGBToLinear(n),io.sRGBToLinear(o)]},uo=function(t,e){var n=Math.floor(t/361),o=Math.floor(t/19)%19,i=t%19;return[io.signPow((n-9)/9,2)*e,io.signPow((o-9)/9,2)*e,io.signPow((i-9)/9,2)*e]},fo=function(t,e,n,o){ao(t),o|=1;for(var i=oo.decode83(t[0]),r=Math.floor(i/9)+1,s=i%9+1,l=(oo.decode83(t[1])+1)/166,a=new Array(s*r),c=0;c<a.length;c++)if(0===c){var u=oo.decode83(t.substring(2,6));a[c]=co(u)}else{u=oo.decode83(t.substring(4+2*c,6+2*c));a[c]=uo(u,l*o)}for(var d=4*e,f=new Uint8ClampedArray(d*n),h=0;h<n;h++)for(var p=0;p<e;p++){for(var m=0,g=0,w=0,$=0;$<r;$++)for(c=0;c<s;c++){var v=Math.cos(Math.PI*p*c/e)*Math.cos(Math.PI*h*$/n),y=a[c+$*s];m+=y[0]*v,g+=y[1]*v,w+=y[2]*v}var b=io.linearTosRGB(m),x=io.linearTosRGB(g),k=io.linearTosRGB(w);f[4*p+0+h*d]=b,f[4*p+1+h*d]=x,f[4*p+2+h*d]=k,f[4*p+3+h*d]=255}return f},ho=Object.defineProperty({isBlurhashValid:function(t){try{ao(t)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},default:fo},"__esModule",{value:!0}),po=function(t,e,n,o,i){if(o<1||o>9||i<1||i>9)throw new lo.ValidationError("BlurHash must have between 1 and 9 components");if(e*n*4!==t.length)throw new lo.ValidationError("Width and height must match the pixels array");for(var r=[],s=function(i){for(var s=function(o){var s=0==o&&0==i?1:2,l=function(t,e,n,o){for(var i=0,r=0,s=0,l=4*e,a=0;a<e;a++)for(var c=0;c<n;c++){var u=o(a,c);i+=u*io.sRGBToLinear(t[4*a+0+c*l]),r+=u*io.sRGBToLinear(t[4*a+1+c*l]),s+=u*io.sRGBToLinear(t[4*a+2+c*l])}var d=1/(e*n);return[i*d,r*d,s*d]}(t,e,n,(function(t,r){return s*Math.cos(Math.PI*o*t/e)*Math.cos(Math.PI*i*r/n)}));r.push(l)},l=0;l<o;l++)s(l)},l=0;l<i;l++)s(l);var a,c,u=r[0],d=r.slice(1),f="",h=o-1+9*(i-1);if(f+=oo.encode83(h,1),d.length>0){var p=Math.max.apply(Math,d.map((function(t){return Math.max.apply(Math,t)}))),m=Math.floor(Math.max(0,Math.min(82,Math.floor(166*p-.5))));a=(m+1)/166,f+=oo.encode83(m,1)}else a=1,f+=oo.encode83(0,1);return f+=oo.encode83((c=u,(io.linearTosRGB(c[0])<<16)+(io.linearTosRGB(c[1])<<8)+io.linearTosRGB(c[2])),4),d.forEach((function(t){f+=oo.encode83(function(t,e){return 19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*io.signPow(t[0]/e,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*io.signPow(t[1]/e,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*io.signPow(t[2]/e,.5)+9.5))))}(t,a),2)})),f},mo=Object.defineProperty({default:po},"__esModule",{value:!0}),go=Je((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.decode=ho.default,e.isBlurhashValid=ho.isBlurhashValid,e.encode=mo.default,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(lo)}));function wo(e){let n,o,i,r,s,l,a,c,u;return{c(){n=j("canvas"),i=T(),r=j("img"),P(n,"class","preload svelte-134ohlg"),P(n,"style",o=`object-fit: ${e[1]};`),H(n,"removed",e[7]>1),P(r,"loading",s=e[0]?"lazy":null),P(r,"class","main svelte-134ohlg"),P(r,"style",l=`object-fit: ${e[1]};`),P(r,"alt",e[6]),P(r,"srcset",e[4]),r.src!==(a=e[5])&&P(r,"src",a),H(r,"loading",e[7]<2)},m(t,o){b(t,n,o),e[13](n),b(t,i,o),b(t,r,o),e[14](r),c||(u=_(r,"load",e[15]),c=!0)},p(t,[e]){2&e&&o!==(o=`object-fit: ${t[1]};`)&&P(n,"style",o),128&e&&H(n,"removed",t[7]>1),1&e&&s!==(s=t[0]?"lazy":null)&&P(r,"loading",s),2&e&&l!==(l=`object-fit: ${t[1]};`)&&P(r,"style",l),64&e&&P(r,"alt",t[6]),16&e&&P(r,"srcset",t[4]),32&e&&r.src!==(a=t[5])&&P(r,"src",a),128&e&&H(r,"loading",t[7]<2)},i:t,o:t,d(t){t&&x(n),e[13](null),t&&x(i),t&&x(r),e[14](null),c=!1,u()}}}function $o(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};let i,r,{photo:s=null}=e,{lazy:l=!1}=e,{size:a="large"}=e,{objectFit:c="contain"}=e,{altTitle:u=null}=e,d=-1;let f="",h="",p="";function m(t){return o(this,void 0,void 0,(function*(){null==t?(n(4,f=""),n(5,h="")):(n(4,f=`${sn(a,s.hash,s.uniq)}, ${sn(a+"2x",s.hash,s.uniq)} 2x`),n(5,h=sn(a,s.hash,s.uniq)))}))}let g=-1;function w(t){var e;return o(this,void 0,void 0,(function*(){yield at(),n(7,g=t),0==t&&(n(12,d=s.id),m(null),n(6,p=""),function(){o(this,void 0,void 0,(function*(){if(g>1)return;const t=go.decode(s.blurHash,32,32,1),e=document.createElement("canvas");e.width=32,e.height=32;const o=e.getContext("2d"),l=o.createImageData(32,32);l.data.set(t),o.putImageData(l,0,0);const a=i.getContext("2d");let c=r.clientWidth,u=r.clientHeight;c/u>1?c=u*s.aspect:u=c/s.aspect,n(2,i.width=c+2,i),n(2,i.height=u,i),a.drawImage(e,0,0,c+2,u),w(1)}))}()),1==t&&m(s),2==t&&n(6,p=null!==(e=null!=u?u:s.title)&&void 0!==e?e:null)}))}return t.$$set=t=>{"photo"in t&&n(9,s=t.photo),"lazy"in t&&n(0,l=t.lazy),"size"in t&&n(10,a=t.size),"objectFit"in t&&n(1,c=t.objectFit),"altTitle"in t&&n(11,u=t.altTitle)},t.$$.update=()=>{4608&t.$$.dirty&&(null==s?void 0:s.id)!=d&&w(0)},[l,c,i,r,f,h,p,g,w,s,a,u,d,function(t){nt[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){nt[t?"unshift":"push"]((()=>{r=t,n(3,r)}))},()=>w(2)]}class vo extends Dt{constructor(t){super(),St(this,t,$o,wo,s,{photo:9,lazy:0,size:10,objectFit:1,altTitle:11})}}function yo(t){let e,n,o,r,s,l,a,c=t[3]&&bo(t),u=t[0].hash&&t[0].uniq&&xo(t),d=t[0].isVideo&&ko();return{c(){e=j("div"),c&&c.c(),n=T(),u&&u.c(),o=T(),d&&d.c(),P(e,"class","navSlot svelte-1rp2yre"),P(e,"style",r=`top: ${t[1].top}px; left: ${t[1].left}px; width: ${t[1].width}px; height: ${t[1].height}px;`),H(e,"selected",t[4])},m(i,r){b(i,e,r),c&&c.m(e,null),y(e,n),u&&u.m(e,null),y(e,o),d&&d.m(e,null),s=!0,l||(a=[_(e,"click",t[5]),_(e,"contextmenu",t[6])],l=!0)},p(t,i){t[3]?c?c.p(t,i):(c=bo(t),c.c(),c.m(e,n)):c&&(c.d(1),c=null),t[0].hash&&t[0].uniq?u?(u.p(t,i),1&i&&bt(u,1)):(u=xo(t),u.c(),bt(u,1),u.m(e,o)):u&&(vt(),xt(u,1,1,(()=>{u=null})),yt()),t[0].isVideo?d||(d=ko(),d.c(),d.m(e,null)):d&&(d.d(1),d=null),(!s||2&i&&r!==(r=`top: ${t[1].top}px; left: ${t[1].left}px; width: ${t[1].width}px; height: ${t[1].height}px;`))&&P(e,"style",r),16&i&&H(e,"selected",t[4])},i(t){s||(bt(u),s=!0)},o(t){xt(u),s=!1},d(t){t&&x(e),c&&c.d(),u&&u.d(),d&&d.d(),l=!1,i(a)}}}function bo(t){let e,n,o;return{c(){e=j("div"),n=j("div"),o=E(t[3]),P(n,"class","textOverlay svelte-1rp2yre"),P(e,"class","textOverlayContainer svelte-1rp2yre")},m(t,i){b(t,e,i),y(e,n),y(n,o)},p(t,e){8&e&&O(o,t[3])},d(t){t&&x(e)}}}function xo(t){let e,n;return e=new vo({props:{photo:t[0],size:t[2],altTitle:t[3],objectFit:"cover",lazy:!0}}),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.photo=t[0]),4&n&&(o.size=t[2]),8&n&&(o.altTitle=t[3]),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ko(t){let e;return{c(){e=j("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><path d="M128,24A104,104,0,1,0,232,128,104.12041,104.12041,0,0,0,128,24Zm36.4375,110.65625-48,32A7.99612,7.99612,0,0,1,104,160V96a7.99612,7.99612,0,0,1,12.4375-6.65625l48,32a7.99959,7.99959,0,0,1,0,13.3125Z"></path></svg>',P(e,"class","videoIndicator svelte-1rp2yre")},m(t,n){b(t,e,n)},d(t){t&&x(e)}}}function jo(t){let e,n,o=t[1]&&yo(t);return{c(){o&&o.c(),e=M()},m(t,i){o&&o.m(t,i),b(t,e,i),n=!0},p(t,[n]){t[1]?o?(o.p(t,n),2&n&&bt(o,1)):(o=yo(t),o.c(),bt(o,1),o.m(e.parentNode,e)):o&&(vt(),xt(o,1,1,(()=>{o=null})),yt())},i(t){n||(bt(o),n=!0)},o(t){xt(o),n=!1},d(t){o&&o.d(t),t&&x(e)}}}function Co(t,e,n){let o,i;c(t,le,(t=>n(7,o=t))),c(t,ce,(t=>n(8,i=t)));let{photo:r=null}=e,{layoutDims:s=null}=e,{size:l="medium"}=e,{textOverlay:a=null}=e,u=!1;return t.$$set=t=>{"photo"in t&&n(0,r=t.photo),"layoutDims"in t&&n(1,s=t.layoutDims),"size"in t&&n(2,l=t.size),"textOverlay"in t&&n(3,a=t.textOverlay)},t.$$.update=()=>{129&t.$$.dirty&&n(4,u=o.indexOf(r)>=0)},[r,s,l,a,u,function(t){i&&ln(t)&&(t.preventDefault(),h(le,o=u?o.filter((t=>t.id!=r.id)):[...o,r],o))},function(){i&&0==o.length&&h(le,o=[r],o)},o]}class Eo extends Dt{constructor(t){super(),St(this,t,Co,jo,s,{photo:0,layoutDims:1,size:2,textOverlay:3})}}function To(t,e,n={}){const o=getComputedStyle(t),i="none"===o.transform?"":o.transform,s=e.from.width/t.clientWidth,l=e.from.height/t.clientHeight,a=(e.from.left-e.to.left)/s,c=(e.from.top-e.to.top)/l,u=Math.sqrt(a*a+c*c),{delay:d=0,duration:f=(t=>120*Math.sqrt(t)),easing:h=de}=n;return{delay:d,duration:r(f)?f(u):f,easing:h,css:(t,e)=>`transform: ${i} translate(${e*a}px, ${e*c}px);`}}function Mo(t,e,n){t.dispatchEvent(new CustomEvent("finalize",{detail:{items:e,info:n}}))}function _o(t,e,n){t.dispatchEvent(new CustomEvent("consider",{detail:{items:e,info:n}}))}const Lo="leftForAnother",So="outsideOfAny";function Do(t,e,n){t.dispatchEvent(new CustomEvent("draggedEntered",{detail:{indexObj:e,draggedEl:n}}))}function Po(t,e,n){t.dispatchEvent(new CustomEvent("draggedLeft",{detail:{draggedEl:e,type:Lo,theOtherDz:n}}))}function Oo(t,e,n){t.dispatchEvent(new CustomEvent("draggedOverIndex",{detail:{indexObj:e,draggedEl:n}}))}const Ao="dragStarted",Ro="draggedEntered",Bo="dragEnteredAnother",zo="draggedOverIndex",Ho="draggedLeft",Io="draggedLeftAll",qo="droppedIntoZone",No="droppedIntoAnother",Fo="droppedOutsideOfAny",Wo="dragStopped",Vo="pointer",Uo="keyboard";let Yo=0;function Go(){Yo++}function Xo(){if(0===Yo)throw new Error("Bug! trying to decrement when there are no dropzones");Yo--}const Zo="undefined"==typeof window;function Jo(t){let e;const n=t.getBoundingClientRect(),o=getComputedStyle(t),i=o.transform;if(i){let r,s,l,a;if(i.startsWith("matrix3d("))e=i.slice(9,-1).split(/, /),r=+e[0],s=+e[5],l=+e[12],a=+e[13];else{if(!i.startsWith("matrix("))return n;e=i.slice(7,-1).split(/, /),r=+e[0],s=+e[3],l=+e[4],a=+e[5]}const c=o.transformOrigin,u=n.x-l-(1-r)*parseFloat(c),d=n.y-a-(1-s)*parseFloat(c.slice(c.indexOf(" ")+1)),f=r?n.width/r:t.offsetWidth,h=s?n.height/s:t.offsetHeight;return{x:u,y:d,width:f,height:h,top:d,right:u+f,bottom:d+h,left:u}}return n}function Ko(t){const e=Jo(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Qo(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function ti(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function ei(t){return{x:((e=Qo(t)).left+e.right)/2,y:(e.top+e.bottom)/2};var e}function ni(t,e){return ti(ei(t),Ko(e))}function oi(t,e){const n=ei(t),o=ei(e);return i=n,r=o,Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));var i,r}let ii;function ri(){ii=new Map}function si(t,e){if(!ni(t,e))return null;const n=e.children;if(0===n.length)return{index:0,isProximityBased:!0};const o=function(t){const e=Array.from(t.children).findIndex((t=>t.getAttribute("data-is-dnd-shadow-item")));if(e>=0)return ii.has(t)||ii.set(t,new Map),ii.get(t).set(e,Ko(t.children[e])),e}(e);for(let i=0;i<n.length;i++)if(ni(t,n[i])){const n=ii.has(e)&&ii.get(e).get(i);return n&&!ti(ei(t),n)?{index:o,isProximityBased:!1}:{index:i,isProximityBased:!1}}let i,r=Number.MAX_VALUE;for(let e=0;e<n.length;e++){const o=oi(t,n[e]);o<r&&(r=o,i=e)}return{index:i,isProximityBased:!0}}ri();function li(){let t;function e(){t={directionObj:void 0,stepPx:0}}function n(e){const{directionObj:o,stepPx:i}=t;o&&(e.scrollBy(o.x*i,o.y*i),window.requestAnimationFrame((()=>n(e))))}function o(t){return 25-t}return e(),{scrollIfNeeded:function(i,r){if(!r)return!1;const s=function(t,e){const n=Qo(e);return ti(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}(i,r);if(null===s)return e(),!1;const l=!!t.directionObj;let[a,c]=[!1,!1];return r.scrollHeight>r.clientHeight&&(s.bottom<25?(a=!0,t.directionObj={x:0,y:1},t.stepPx=o(s.bottom)):s.top<25&&(a=!0,t.directionObj={x:0,y:-1},t.stepPx=o(s.top)),!l&&a)||r.scrollWidth>r.clientWidth&&(s.right<25?(c=!0,t.directionObj={x:1,y:0},t.stepPx=o(s.right)):s.left<25&&(c=!0,t.directionObj={x:-1,y:0},t.stepPx=o(s.left)),!l&&c)?(n(r),!0):(e(),!1)},resetScrolling:e}}function ai(t){return JSON.stringify(t,null,2)}function ci(t){if(!t)throw new Error("cannot get depth of a falsy node");return ui(t,0)}function ui(t,e=0){return t.parentElement?ui(t.parentElement,e+1):e-1}const{scrollIfNeeded:di,resetScrolling:fi}=li();let hi;function pi(t,e,n=200){let o,i,r,s=!1;const l=Array.from(e).sort(((t,e)=>ci(e)-ci(t)));!function e(){const a=ei(t);if(!di(a,o)&&r&&Math.abs(r.x-a.x)<10&&Math.abs(r.y-a.y)<10)return void(hi=window.setTimeout(e,n));if(function(t){const e=Qo(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}(t))return void function(t){window.dispatchEvent(new CustomEvent("draggedLeftDocument",{detail:{draggedEl:t}}))}(t);r=a;let c=!1;for(const e of l){const n=si(t,e);if(null===n)continue;const{index:r}=n;c=!0,e!==o?(o&&Po(o,t,e),Do(e,n,t),o=e):r!==i&&(Oo(e,n,t),i=r);break}!c&&s&&o?(!function(t,e){t.dispatchEvent(new CustomEvent("draggedLeft",{detail:{draggedEl:e,type:So}}))}(o,t),o=void 0,i=void 0,s=!1):s=!0,hi=window.setTimeout(e,n)}()}let mi;function gi(t){const e=t.touches?t.touches[0]:t;mi={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:wi,resetScrolling:$i}=li();let vi;function yi(){mi&&wi(mi,document.documentElement),vi=window.setTimeout(yi,300)}function bi(t){return`${t} 0.2s ease`}function xi(t,e,n,o,i){const r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),l=r.width-s.width,a=r.height-s.height;if(l||a){const e={left:(n-s.left)/s.width,top:(o-s.top)/s.height};t.style.height=`${r.height}px`,t.style.width=`${r.width}px`,t.style.left=parseFloat(t.style.left)-e.left*l+"px",t.style.top=parseFloat(t.style.top)-e.top*a+"px"}ki(e,t),i()}function ki(t,e){const n=window.getComputedStyle(t);Array.from(n).filter((t=>t.startsWith("background")||t.startsWith("padding")||t.startsWith("font")||t.startsWith("text")||t.startsWith("align")||t.startsWith("justify")||t.startsWith("display")||t.startsWith("flex")||t.startsWith("border")||"opacity"===t||"color"===t||"list-style-type"===t)).forEach((t=>e.style.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))))}function ji(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function Ci(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=o[e]})),n(t).forEach((e=>t.classList.add(e)))}))}function Ei(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=""})),n(t).forEach((e=>t.classList.contains(e)&&t.classList.remove(e)))}))}const Ti={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let Mi,_i,Li,Si,Di,Pi,Oi,Ai,Ri,Bi,zi,Hi=!1,Ii=!1,qi=!1;const Ni=new Map,Fi=new Map,Wi=new WeakMap;function Vi(t,e){Ni.get(e).delete(t),Xo(),0===Ni.get(e).size&&Ni.delete(e)}function Ui(){window.addEventListener("mousemove",gi),window.addEventListener("touchmove",gi),yi();const t=Ni.get(Si);for(const e of t)e.addEventListener("draggedEntered",Xi),e.addEventListener("draggedLeft",Zi),e.addEventListener("draggedOverIndex",Ji);window.addEventListener("draggedLeftDocument",Qi);const e=Math.max(100,...Array.from(t.keys()).map((t=>Fi.get(t).dropAnimationDurationMs)));pi(_i,t,1.07*e)}function Yi(){window.removeEventListener("mousemove",gi),window.removeEventListener("touchmove",gi),mi=void 0,window.clearTimeout(vi),$i();const t=Ni.get(Si);for(const e of t)e.removeEventListener("draggedEntered",Xi),e.removeEventListener("draggedLeft",Zi),e.removeEventListener("draggedOverIndex",Ji);window.removeEventListener("draggedLeftDocument",Qi),clearTimeout(hi),fi(),ri()}function Gi(t){return t.findIndex((t=>!!t.isDndShadowItem&&"id:dnd-shadow-placeholder-0000"!==t.id))}function Xi(t){let{items:e,dropFromOthersDisabled:n}=Fi.get(t.currentTarget);if(n&&t.currentTarget!==Di)return;if(qi=!1,e=e.filter((t=>t.id!==Oi.id)),Di!==t.currentTarget){const t=Fi.get(Di).items.filter((t=>!t.isDndShadowItem));_o(Di,t,{trigger:Bo,id:Li.id,source:Vo})}else{const t=function(t){return t.findIndex((t=>"id:dnd-shadow-placeholder-0000"===t.id))}(e);-1!==t&&e.splice(t,1)}const{index:o,isProximityBased:i}=t.detail.indexObj,r=i&&o===t.currentTarget.children.length-1?o+1:o;Ai=t.currentTarget,e.splice(r,0,Oi),_o(t.currentTarget,e,{trigger:Ro,id:Li.id,source:Vo})}function Zi(t){const{items:e,dropFromOthersDisabled:n}=Fi.get(t.currentTarget);if(n&&t.currentTarget!==Di)return;const o=Gi(e),i=e.splice(o,1)[0];Ai=void 0;const{type:r,theOtherDz:s}=t.detail;if(r===So||r===Lo&&s!==Di&&Fi.get(s).dropFromOthersDisabled){qi=!0,Ai=Di;const t=Fi.get(Di).items;t.splice(Pi,0,i),_o(Di,t,{trigger:Io,id:Li.id,source:Vo})}_o(t.currentTarget,e,{trigger:Ho,id:Li.id,source:Vo})}function Ji(t){const{items:e,dropFromOthersDisabled:n}=Fi.get(t.currentTarget);if(n&&t.currentTarget!==Di)return;qi=!1;const{index:o}=t.detail.indexObj,i=Gi(e);e.splice(i,1),e.splice(o,0,Oi),_o(t.currentTarget,e,{trigger:zo,id:Li.id,source:Vo})}function Ki(t){t.preventDefault();const e=t.touches?t.touches[0]:t;Bi={x:e.clientX,y:e.clientY},_i.style.transform=`translate3d(${Bi.x-Ri.x}px, ${Bi.y-Ri.y}px, 0)`}function Qi(){Ii=!0,window.removeEventListener("mousemove",Ki),window.removeEventListener("touchmove",Ki),window.removeEventListener("mouseup",Qi),window.removeEventListener("touchend",Qi),Yi(),function(t){t.style.cursor="grab"}(_i),Ai||(Ai=Di);let{items:t,type:e}=Fi.get(Ai);Ei(Ni.get(e),(t=>Fi.get(t).dropTargetStyle),(t=>Fi.get(t).dropTargetClasses));let n=Gi(t);-1===n&&(n=Pi),t=t.map((t=>t.isDndShadowItem?Li:t)),function(t,e){const n=Jo(Ai.children[t]),o={x:n.left-parseFloat(_i.style.left),y:n.top-parseFloat(_i.style.top)},{dropAnimationDurationMs:i}=Fi.get(Ai),r=`transform ${i}ms ease`;_i.style.transition=_i.style.transition?_i.style.transition+","+r:r,_i.style.transform=`translate3d(${o.x}px, ${o.y}px, 0)`,window.setTimeout(e,i)}(n,(function(){var e;zi(),Mo(Ai,t,{trigger:qi?Fo:qo,id:Li.id,source:Vo}),Ai!==Di&&Mo(Di,Fi.get(Di).items,{trigger:No,id:Li.id,source:Vo}),(e=Ai.children[n]).style.visibility="",e.removeAttribute("data-is-dnd-shadow-item"),_i.remove(),Mi.remove(),_i=void 0,Mi=void 0,Li=void 0,Si=void 0,Di=void 0,Pi=void 0,Oi=void 0,Ai=void 0,Ri=void 0,Bi=void 0,Hi=!1,Ii=!1,zi=void 0,qi=!1}))}function tr(t,e){const n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Ti,dropTargetClasses:[],transformDraggedElement:()=>{}};let o=new Map;function i(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r)}function r(){i(),Mi=void 0,Ri=void 0,Bi=void 0}function s(t){t.preventDefault();const e=t.touches?t.touches[0]:t;Bi={x:e.clientX,y:e.clientY},(Math.abs(Bi.x-Ri.x)>=3||Math.abs(Bi.y-Ri.y)>=3)&&(i(),function(){Hi=!0;const t=o.get(Mi);Pi=t,Di=Mi.parentElement;const{items:e,type:i}=n;Li={...e[t]},Si=i,Oi={...Li,isDndShadowItem:!0};const r={...Oi,id:"id:dnd-shadow-placeholder-0000"};function s(){var t;_i.parentElement?window.requestAnimationFrame(s):(document.body.appendChild(_i),_i.focus(),Ui(),(t=Mi).style.display="none",t.style.position="fixed",t.style.zIndex="-5",document.body.appendChild(Mi))}_i=function(t){const e=t.getBoundingClientRect(),n=t.cloneNode(!0);return ki(t,n),n.id="dnd-action-dragged-el",n.style.position="fixed",n.style.top=`${e.top}px`,n.style.left=`${e.left}px`,n.style.margin="0",n.style.boxSizing="border-box",n.style.height=`${e.height}px`,n.style.width=`${e.width}px`,n.style.transition=`${bi("width")}, ${bi("height")}, ${bi("background-color")}, ${bi("opacity")}, ${bi("color")} `,window.setTimeout((()=>n.style.transition+=`, ${bi("top")}, ${bi("left")}`),0),n.style.zIndex="9999",n.style.cursor="grabbing",n}(Mi),window.requestAnimationFrame(s),Ci(Array.from(Ni.get(n.type)).filter((t=>t===Di||!Fi.get(t).dropFromOthersDisabled)),(t=>Fi.get(t).dropTargetStyle),(t=>Fi.get(t).dropTargetClasses)),e.splice(t,1,r),zi=function(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}(Di),_o(Di,e,{trigger:Ao,id:Li.id,source:Vo}),window.addEventListener("mousemove",Ki,{passive:!1}),window.addEventListener("touchmove",Ki,{passive:!1,capture:!1}),window.addEventListener("mouseup",Qi,{passive:!1}),window.addEventListener("touchend",Qi,{passive:!1})}())}function l(t){if(t.target!==t.currentTarget&&(void 0!==t.target.value||t.target.isContentEditable))return;if(t.button)return;if(Hi)return;t.stopPropagation();const e=t.touches?t.touches[0]:t;Ri={x:e.clientX,y:e.clientY},Bi={...Ri},Mi=t.currentTarget,window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",r,{passive:!1}),window.addEventListener("touchend",r,{passive:!1})}function a({items:e,flipDurationMs:i=0,type:r="--any--",dragDisabled:s=!1,dropFromOthersDisabled:a=!1,dropTargetStyle:c=Ti,dropTargetClasses:u=[],transformDraggedElement:d=(()=>{})}){var f,h;n.dropAnimationDurationMs=i,n.type&&r!==n.type&&Vi(t,n.type),n.type=r,f=t,h=r,Ni.has(h)||Ni.set(h,new Set),Ni.get(h).has(f)||(Ni.get(h).add(f),Go()),n.items=[...e],n.dragDisabled=s,n.transformDraggedElement=d,!Hi||Ii||function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}(c,n.dropTargetStyle)&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(u,n.dropTargetClasses)||(Ei([t],(()=>n.dropTargetStyle),(()=>u)),Ci([t],(()=>c),(()=>u))),n.dropTargetStyle=c,n.dropTargetClasses=[...u],Hi&&n.dropFromOthersDisabled!==a&&(a?Ei([t],(t=>Fi.get(t).dropTargetStyle),(t=>Fi.get(t).dropTargetClasses)):Ci([t],(t=>Fi.get(t).dropTargetStyle),(t=>Fi.get(t).dropTargetClasses))),n.dropFromOthersDisabled=a,Fi.set(t,n);const p=Gi(n.items);for(let e=0;e<t.children.length;e++){const i=t.children[e];ji(i,s),e!==p?(i.removeEventListener("mousedown",Wi.get(i)),i.removeEventListener("touchstart",Wi.get(i)),s||(i.addEventListener("mousedown",l),i.addEventListener("touchstart",l),Wi.set(i,l)),o.set(i,e)):(xi(_i,i,Bi.x,Bi.y,(()=>n.transformDraggedElement(_i,Li,e))),(m=i).style.visibility="hidden",m.setAttribute("data-is-dnd-shadow-item","true"))}var m}return a(e),{update:t=>{a(t)},destroy:()=>{Vi(t,n.type),Fi.delete(t)}}}const er={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},nr={[er.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[er.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"};let or;function ir(){or=document.createElement("div"),or.id="dnd-action-aria-alert",or.style.position="fixed",or.style.bottom="0",or.style.left="0",or.style.zIndex="-5",or.style.opacity="0",or.style.height="0",or.style.width="0",or.setAttribute("role","alert"),document.body.prepend(or),Object.entries(nr).forEach((([t,e])=>document.body.prepend(function(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}(t,e))))}function rr(t){or.innerHTML="";const e=document.createTextNode(t);or.appendChild(e),or.style.display="none",or.style.display="inline"}const sr={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let lr,ar,cr,ur,dr=!1,fr="",hr="";const pr=new WeakSet,mr=new WeakMap,gr=new WeakMap,wr=new Map,$r=new Map,vr=new Map,yr=Zo?null:("complete"===document.readyState?ir():window.addEventListener("DOMContentLoaded",ir),{...er});function br(t,e){ar===t&&Er(),vr.get(e).delete(t),Xo(),0===vr.get(e).size&&vr.delete(e),0===vr.size&&(window.removeEventListener("keydown",xr),window.removeEventListener("click",kr))}function xr(t){if(dr)switch(t.key){case"Escape":Er()}}function kr(){dr&&(pr.has(document.activeElement)||Er())}function jr(t){if(!dr)return;const e=t.currentTarget;if(e===ar)return;fr=e.getAttribute("aria-label")||"";const{items:n}=$r.get(ar),o=n.find((t=>t.id===ur)),i=n.indexOf(o),r=n.splice(i,1)[0],{items:s,autoAriaDisabled:l}=$r.get(e);e.getBoundingClientRect().top<ar.getBoundingClientRect().top||e.getBoundingClientRect().left<ar.getBoundingClientRect().left?(s.push(r),l||rr(`Moved item ${hr} to the end of the list ${fr}`)):(s.unshift(r),l||rr(`Moved item ${hr} to the beginning of the list ${fr}`));Mo(ar,n,{trigger:No,id:ur,source:Uo}),Mo(e,s,{trigger:qo,id:ur,source:Uo}),ar=e}function Cr(){wr.forEach((({update:t},e)=>t($r.get(e))))}function Er(t=!0){$r.get(ar).autoAriaDisabled||rr(`Stopped dragging item ${hr}`),pr.has(document.activeElement)&&document.activeElement.blur(),t&&_o(ar,$r.get(ar).items,{trigger:Wo,id:ur,source:Uo}),Ei(vr.get(lr),(t=>$r.get(t).dropTargetStyle),(t=>$r.get(t).dropTargetClasses)),cr=null,ur=null,hr="",lr=null,ar=null,fr="",dr=!1,Cr()}function Tr(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:sr,dropTargetClasses:[],autoAriaDisabled:!1};function o(t,e,n){t.length<=1||t.splice(n,1,t.splice(e,1,t[n])[0])}function i(e){switch(e.key){case"Enter":case" ":if((void 0!==e.target.disabled||e.target.href||e.target.isContentEditable)&&!pr.has(e.target))return;e.preventDefault(),e.stopPropagation(),dr?Er():r(e);break;case"ArrowDown":case"ArrowRight":{if(!dr)return;e.preventDefault(),e.stopPropagation();const{items:i}=$r.get(t),r=Array.from(t.children),s=r.indexOf(e.currentTarget);s<r.length-1&&(n.autoAriaDisabled||rr(`Moved item ${hr} to position ${s+2} in the list ${fr}`),o(i,s,s+1),Mo(t,i,{trigger:qo,id:ur,source:Uo}));break}case"ArrowUp":case"ArrowLeft":{if(!dr)return;e.preventDefault(),e.stopPropagation();const{items:i}=$r.get(t),r=Array.from(t.children).indexOf(e.currentTarget);r>0&&(n.autoAriaDisabled||rr(`Moved item ${hr} to position ${r} in the list ${fr}`),o(i,r,r-1),Mo(t,i,{trigger:qo,id:ur,source:Uo}));break}}}function r(e){!function(e){const{items:n}=$r.get(t),o=Array.from(t.children),i=o.indexOf(e);cr=e,cr.tabIndex=0,ur=n[i].id,hr=o[i].getAttribute("aria-label")||""}(e.currentTarget),ar=t,lr=n.type,dr=!0;const o=Array.from(vr.get(n.type)).filter((t=>t===ar||!$r.get(t).dropFromOthersDisabled));if(Ci(o,(t=>$r.get(t).dropTargetStyle),(t=>$r.get(t).dropTargetClasses)),!n.autoAriaDisabled){let t=`Started dragging item ${hr}. Use the arrow keys to move it within its list ${fr}`;o.length>1&&(t+=", or tab to another list in order to move the item into it"),rr(t)}_o(t,$r.get(t).items,{trigger:Ao,id:ur,source:Uo}),Cr()}function s(t){dr&&t.currentTarget!==cr&&(t.stopPropagation(),Er(!1),r(t))}function l({items:e=[],type:o="--any--",dragDisabled:r=!1,dropFromOthersDisabled:l=!1,dropTargetStyle:a=sr,dropTargetClasses:c=[],autoAriaDisabled:u=!1}){var d,f;n.items=[...e],n.dragDisabled=r,n.dropFromOthersDisabled=l,n.dropTargetStyle=a,n.dropTargetClasses=c,n.autoAriaDisabled=u,u||(t.setAttribute("aria-disabled",r),t.setAttribute("role","list"),t.setAttribute("aria-describedby",r?yr.DND_ZONE_DRAG_DISABLED:yr.DND_ZONE_ACTIVE)),n.type&&o!==n.type&&br(t,n.type),n.type=o,d=t,f=o,0===vr.size&&(window.addEventListener("keydown",xr),window.addEventListener("click",kr)),vr.has(f)||vr.set(f,new Set),vr.get(f).has(d)||(vr.get(f).add(d),Go()),$r.set(t,n),t.tabIndex=dr&&(t===ar||cr.contains(t)||n.dropFromOthersDisabled||ar&&n.type!==$r.get(ar).type)?-1:0,t.addEventListener("focus",jr);for(let e=0;e<t.children.length;e++){const o=t.children[e];pr.add(o),o.tabIndex=dr?-1:0,u||o.setAttribute("role","listitem"),o.removeEventListener("keydown",mr.get(o)),o.removeEventListener("click",gr.get(o)),r||(o.addEventListener("keydown",i),mr.set(o,i),o.addEventListener("click",s),gr.set(o,s)),dr&&n.items[e].id===ur&&(cr=o,cr.tabIndex=0,o.focus())}}l(e);const a={update:t=>{l(t)},destroy:()=>{br(t,n.type),$r.delete(t),wr.delete(t)}};return wr.set(t,a),a}function Mr(t,e){_r(e);const n=tr(t,e),o=Tr(t,e);return{update:t=>{_r(t),n.update(t),o.update(t)},destroy:()=>{n.destroy(),o.destroy()}}}function _r(t){const{items:e,flipDurationMs:n,type:o,dragDisabled:i,dropFromOthersDisabled:r,dropTargetStyle:s,dropTargetClasses:l,transformDraggedElement:a,autoAriaDisabled:c,...u}=t;if(Object.keys(u).length>0&&console.warn("dndzone will ignore unknown options",u),!e)throw new Error("no 'items' key provided to dndzone");const d=e.find((t=>!{}.hasOwnProperty.call(t,"id")));if(d)throw new Error(`missing 'id' property for item ${ai(d)}`);if(l&&!Array.isArray(l))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof l}, ${ai(l)}`)}function Lr(t,e,n){const o=t.slice();return o[5]=e[n],o}function Sr(e){let n;return{c(){n=j("div"),P(n,"class","placeholder svelte-f8uj3v")},m(t,e){b(t,n,e)},p:t,d(t){t&&x(n)}}}function Dr(t){let e,n,o,i,r,s;return{c(){e=j("img"),P(e,"alt",n=t[5].title??""),P(e,"draggable","false"),P(e,"srcset",o=sn(t[1],t[5].hash,t[5].uniq)+", "+`${sn(t[1]+"2x",t[5].hash,t[5].uniq)} 2x`),e.src!==(i=sn(t[1],t[5].hash,t[5].uniq))&&P(e,"src",i),P(e,"class","svelte-f8uj3v")},m(t,n){b(t,e,n),r||(s=_(e,"dragstart",L(Rr)),r=!0)},p(t,r){1&r&&n!==(n=t[5].title??"")&&P(e,"alt",n),3&r&&o!==(o=sn(t[1],t[5].hash,t[5].uniq)+", "+`${sn(t[1]+"2x",t[5].hash,t[5].uniq)} 2x`)&&P(e,"srcset",o),3&r&&e.src!==(i=sn(t[1],t[5].hash,t[5].uniq))&&P(e,"src",i)},d(t){t&&x(e),r=!1,s()}}}function Pr(n,o){let i,r,s,l,a,c,u=(o[5].title??"")+"",d=t;function f(t,e){return t[5].hash&&t[5].uniq?Dr:Sr}let h=f(o),p=h(o);return{key:n,first:null,c(){i=j("div"),p.c(),r=T(),s=j("div"),l=E(u),a=T(),P(i,"class","editablePhoto svelte-f8uj3v"),this.first=i},m(t,e){b(t,i,e),p.m(i,null),y(i,r),y(i,s),y(s,l),y(i,a)},p(t,e){h===(h=f(o=t))&&p?p.p(o,e):(p.d(1),p=h(o),p&&(p.c(),p.m(i,r))),1&e&&u!==(u=(o[5].title??"")+"")&&O(l,u)},r(){c=i.getBoundingClientRect()},f(){Y(i),d()},a(){d(),d=function(n,o,i,r){if(!o)return t;const s=n.getBoundingClientRect();if(o.left===s.left&&o.right===s.right&&o.top===s.top&&o.bottom===s.bottom)return t;const{delay:l=0,duration:a=300,easing:c=e,start:u=m()+l,end:d=u+a,tick:f=t,css:h}=i(n,{from:o,to:s},r);let p,g=!0,w=!1;function $(){h&&U(n,p),g=!1}return v((t=>{if(!w&&t>=u&&(w=!0),w&&t>=d&&(f(1,0),$()),!g)return!1;if(w){const e=0+1*c((t-u)/a);f(e,1-e)}return!0})),h&&(p=V(n,0,1,a,l,c,h)),l||(w=!0),f(0,1),$}(i,c,To,{duration:Ar})},d(t){t&&x(i),p.d()}}}function Or(e){let n,o,s,l,a=[],c=new Map,u=e[0];const d=t=>t[5].id;for(let t=0;t<u.length;t+=1){let n=Lr(e,u,t),o=d(n);c.set(o,a[t]=Pr(o,n))}return{c(){n=j("div");for(let t=0;t<a.length;t+=1)a[t].c();P(n,"class","editableLayout svelte-f8uj3v")},m(i,c){b(i,n,c);for(let t=0;t<a.length;t+=1)a[t].m(n,null);var u;s||(l=[(u=o=Mr.call(null,n,{items:e[0],flipDurationMs:Ar}),u&&r(u.destroy)?u.destroy:t),_(n,"consider",e[2]),_(n,"finalize",e[3])],s=!0)},p(t,[e]){if(3&e){u=t[0];for(let t=0;t<a.length;t+=1)a[t].r();a=function(t,e,n,o,i,r,s,l,a,c,u,d){let f=t.length,h=r.length,p=f;const m={};for(;p--;)m[t[p].key]=p;const g=[],w=new Map,$=new Map;for(p=h;p--;){const t=d(i,r,p),l=n(t);let a=s.get(l);a?o&&a.p(t,e):(a=c(l,t),a.c()),w.set(l,g[p]=a),l in m&&$.set(l,Math.abs(p-m[l]))}const v=new Set,y=new Set;function b(t){bt(t,1),t.m(l,u),s.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=g[h-1],n=t[f-1],o=e.key,i=n.key;e===n?(u=e.first,f--,h--):w.has(i)?!s.has(o)||v.has(o)?b(e):y.has(i)?f--:$.get(o)>$.get(i)?(y.add(o),b(e)):(v.add(i),f--):(a(n,s),f--)}for(;f--;){const e=t[f];w.has(e.key)||a(e,s)}for(;h;)b(g[h-1]);return g}(a,e,d,1,t,u,c,n,Tt,Pr,null,Lr);for(let t=0;t<a.length;t+=1)a[t].a()}o&&r(o.update)&&1&e&&o.update.call(null,{items:t[0],flipDurationMs:Ar})},i:t,o:t,d(t){t&&x(n);for(let t=0;t<a.length;t+=1)a[t].d();s=!1,i(l)}}}const Ar=200,Rr=()=>{};function Br(t,e,n){const o=K();let{stubList:i=[]}=e,{size:r="medium"}=e;return t.$$set=t=>{"stubList"in t&&n(0,i=t.stubList),"size"in t&&n(1,r=t.size)},[i,r,function(t){n(0,i=t.detail.items)},function(t){n(0,i=t.detail.items),o("reordered",{newStubs:i})}]}class zr extends Dt{constructor(t){super(),St(this,t,Br,Or,s,{stubList:0,size:1})}}function Hr(t,e,n){const o=t.slice();return o[18]=e[n],o[20]=n,o}function Ir(e){let n,o;return n=new _n({}),n.$on("done",e[8]),{c(){Mt(n.$$.fragment)},m(t,e){_t(n,t,e),o=!0},p:t,i(t){o||(bt(n.$$.fragment,t),o=!0)},o(t){xt(n.$$.fragment,t),o=!1},d(t){Lt(n,t)}}}function qr(e){let n,o;return n=new Pn({}),n.$on("dismissed",e[10]),n.$on("done",e[11]),{c(){Mt(n.$$.fragment)},m(t,e){_t(n,t,e),o=!0},p:t,i(t){o||(bt(n.$$.fragment,t),o=!0)},o(t){xt(n.$$.fragment,t),o=!1},d(t){Lt(n,t)}}}function Nr(t){let e,n,o,i,r,s;o=new $e({props:{title:"Add Album",margin:"0 0 0 10px",$$slots:{default:[Fr]},$$scope:{ctx:t}}}),o.$on("click",t[12]);let l=t[0]?.length>1&&Wr(t);return{c(){e=j("h2"),e.textContent="Albums",n=T(),Mt(o.$$.fragment),i=T(),l&&l.c(),r=M(),P(e,"class","svelte-fpj1v5")},m(t,a){b(t,e,a),b(t,n,a),_t(o,t,a),b(t,i,a),l&&l.m(t,a),b(t,r,a),s=!0},p(t,e){const n={};2097152&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),t[0]?.length>1?l?(l.p(t,e),1&e&&bt(l,1)):(l=Wr(t),l.c(),bt(l,1),l.m(r.parentNode,r)):l&&(vt(),xt(l,1,1,(()=>{l=null})),yt())},i(t){s||(bt(o.$$.fragment,t),bt(l),s=!0)},o(t){xt(o.$$.fragment,t),xt(l),s=!1},d(t){t&&x(e),t&&x(n),Lt(o,t),t&&x(i),l&&l.d(t),t&&x(r)}}}function Fr(t){let e,n,o,i,r;return{c(){e=C("svg"),n=C("rect"),o=C("circle"),i=C("line"),r=C("line"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"cx","128"),P(o,"cy","128"),P(o,"r","96"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"x1","88"),P(i,"y1","128"),P(i,"x2","168"),P(i,"y2","128"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"x1","128"),P(r,"y1","88"),P(r,"x2","128"),P(r,"y2","168"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256")},m(t,s){b(t,e,s),y(e,n),y(e,o),y(e,i),y(e,r)},d(t){t&&x(e)}}}function Wr(t){let e,n,o;return n=new $e({props:{margin:"0 0 0 0",title:(t[6]?"Exit":"Enter")+" Edit Mode",$$slots:{default:[Vr]},$$scope:{ctx:t}}}),n.$on("click",t[13]),{c(){e=j("div"),Mt(n.$$.fragment),P(e,"class","reorderButton svelte-fpj1v5"),H(e,"toggled",t[6])},m(t,i){b(t,e,i),_t(n,e,null),o=!0},p(t,o){const i={};64&o&&(i.title=(t[6]?"Exit":"Enter")+" Edit Mode"),2097152&o&&(i.$$scope={dirty:o,ctx:t}),n.$set(i),64&o&&H(e,"toggled",t[6])},i(t){o||(bt(n.$$.fragment,t),o=!0)},o(t){xt(n.$$.fragment,t),o=!1},d(t){t&&x(e),Lt(n)}}}function Vr(t){let e,n,o,i,r,s;return{c(){e=C("svg"),n=C("rect"),o=C("polyline"),i=C("line"),r=C("polyline"),s=C("line"),P(n,"width","256"),P(n,"height","256"),P(n,"fill","none"),P(o,"points","192 144 224 176 192 208"),P(o,"fill","none"),P(o,"stroke","currentColor"),P(o,"stroke-linecap","round"),P(o,"stroke-linejoin","round"),P(o,"stroke-width","24"),P(i,"x1","32"),P(i,"y1","176"),P(i,"x2","224"),P(i,"y2","176"),P(i,"fill","none"),P(i,"stroke","currentColor"),P(i,"stroke-linecap","round"),P(i,"stroke-linejoin","round"),P(i,"stroke-width","24"),P(r,"points","64 112 32 80 64 48"),P(r,"fill","none"),P(r,"stroke","currentColor"),P(r,"stroke-linecap","round"),P(r,"stroke-linejoin","round"),P(r,"stroke-width","24"),P(s,"x1","224.00006"),P(s,"y1","80"),P(s,"x2","32.00006"),P(s,"y2","80"),P(s,"fill","none"),P(s,"stroke","currentColor"),P(s,"stroke-linecap","round"),P(s,"stroke-linejoin","round"),P(s,"stroke-width","24"),P(e,"xmlns","http://www.w3.org/2000/svg"),P(e,"fill","currentColor"),P(e,"viewBox","0 0 256 256")},m(t,l){b(t,e,l),y(e,n),y(e,o),y(e,i),y(e,r),y(e,s)},d(t){t&&x(e)}}}function Ur(t){let e,n,o,i;const r=[Gr,Yr],s=[];function l(t,e){return t[6]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),o=M()},m(t,n){s[e].m(t,n),b(t,o,n),i=!0},p(t,i){let a=e;e=l(t),e===a?s[e].p(t,i):(vt(),xt(s[a],1,1,(()=>{s[a]=null})),yt(),n=s[e],n?n.p(t,i):(n=s[e]=r[e](t),n.c()),bt(n,1),n.m(o.parentNode,o))},i(t){i||(bt(n),i=!0)},o(t){xt(n),i=!1},d(t){s[e].d(t),t&&x(o)}}}function Yr(t){let e,n,o,i,r,s=0==t[0].length&&Xr(),l=t[4]&&Zr(t);return{c(){e=j("div"),s&&s.c(),n=T(),l&&l.c(),P(e,"class","albumListDisplay svelte-fpj1v5"),P(e,"style",o=`height: ${t[4]?.containerHeight||0}px;`),ct((()=>t[14].call(e)))},m(o,a){b(o,e,a),s&&s.m(e,null),y(e,n),l&&l.m(e,null),i=z(e,t[14].bind(e)),r=!0},p(t,i){0==t[0].length?s||(s=Xr(),s.c(),s.m(e,n)):s&&(s.d(1),s=null),t[4]?l?(l.p(t,i),16&i&&bt(l,1)):(l=Zr(t),l.c(),bt(l,1),l.m(e,null)):l&&(vt(),xt(l,1,1,(()=>{l=null})),yt()),(!r||16&i&&o!==(o=`height: ${t[4]?.containerHeight||0}px;`))&&P(e,"style",o)},i(t){r||(bt(l),r=!0)},o(t){xt(l),r=!1},d(t){t&&x(e),s&&s.d(),l&&l.d(),i()}}}function Gr(t){let e,n;return e=new zr({props:{stubList:t[1]}}),e.$on("reordered",t[9]),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.stubList=t[1]),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Xr(t){let e;return{c(){e=j("div"),e.textContent="(No albums on this site… yet.)"},m(t,n){b(t,e,n)},d(t){t&&x(e)}}}function Zr(t){let e,n;return e=new to({props:{stubs:t[1],$$slots:{default:[Kr]},$$scope:{ctx:t}}}),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.stubs=t[1]),2097171&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Jr(t){let e,n,o,i,r;return n=new Eo({props:{size:"medium",photo:t[1][t[20]],layoutDims:t[4].boxes[t[20]],textOverlay:t[18].title}}),{c(){e=j("a"),Mt(n.$$.fragment),o=T(),P(e,"href",i=`/album/${t[18].slug}`)},m(t,i){b(t,e,i),_t(n,e,null),y(e,o),r=!0},p(t,o){const s={};2&o&&(s.photo=t[1][t[20]]),16&o&&(s.layoutDims=t[4].boxes[t[20]]),1&o&&(s.textOverlay=t[18].title),n.$set(s),(!r||1&o&&i!==(i=`/album/${t[18].slug}`))&&P(e,"href",i)},i(t){r||(bt(n.$$.fragment,t),r=!0)},o(t){xt(n.$$.fragment,t),r=!1},d(t){t&&x(e),Lt(n)}}}function Kr(t){let e,n,o=t[0],i=[];for(let e=0;e<o.length;e+=1)i[e]=Jr(Hr(t,o,e));const r=t=>xt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=M()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);b(t,e,o),n=!0},p(t,n){if(19&n){let s;for(o=t[0],s=0;s<o.length;s+=1){const r=Hr(t,o,s);i[s]?(i[s].p(r,n),bt(i[s],1)):(i[s]=Jr(r),i[s].c(),bt(i[s],1),i[s].m(e.parentNode,e))}for(vt(),s=o.length;s<i.length;s+=1)r(s);yt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)bt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)xt(i[t]);n=!1},d(t){k(i,t),t&&x(e)}}}function Qr(t){let e,n,o,i,r,s,l=t[3]&&!t[6]&&Ir(t),a=t[5]&&qr(t),c=t[3]&&Nr(t),u=t[0]&&Ur(t);return{c(){l&&l.c(),e=T(),a&&a.c(),n=T(),o=j("div"),i=j("div"),c&&c.c(),r=T(),u&&u.c(),P(i,"class","header svelte-fpj1v5"),P(o,"class","albumList svelte-fpj1v5")},m(t,d){l&&l.m(t,d),b(t,e,d),a&&a.m(t,d),b(t,n,d),b(t,o,d),y(o,i),c&&c.m(i,null),y(o,r),u&&u.m(o,null),s=!0},p(t,[r]){t[3]&&!t[6]?l?(l.p(t,r),72&r&&bt(l,1)):(l=Ir(t),l.c(),bt(l,1),l.m(e.parentNode,e)):l&&(vt(),xt(l,1,1,(()=>{l=null})),yt()),t[5]?a?(a.p(t,r),32&r&&bt(a,1)):(a=qr(t),a.c(),bt(a,1),a.m(n.parentNode,n)):a&&(vt(),xt(a,1,1,(()=>{a=null})),yt()),t[3]?c?(c.p(t,r),8&r&&bt(c,1)):(c=Nr(t),c.c(),bt(c,1),c.m(i,null)):c&&(vt(),xt(c,1,1,(()=>{c=null})),yt()),t[0]?u?(u.p(t,r),1&r&&bt(u,1)):(u=Ur(t),u.c(),bt(u,1),u.m(o,null)):u&&(vt(),xt(u,1,1,(()=>{u=null})),yt())},i(t){s||(bt(l),bt(a),bt(c),bt(u),s=!0)},o(t){xt(l),xt(a),xt(c),xt(u),s=!1},d(t){l&&l.d(t),t&&x(e),a&&a.d(t),t&&x(n),t&&x(o),c&&c.d(),u&&u.d()}}}function ts(t,e,n){let o;c(t,ce,(t=>n(3,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};let r,s,l;function a(t){return i(this,void 0,void 0,(function*(){const e=yield ue("/album/list",{authorize:t});e.success?n(0,r=e.data):console.error(e)}))}let u=null;let d=!1,f=!1;return t.$$.update=()=>{8&t.$$.dirty&&a(o),1&t.$$.dirty&&r&&n(1,s=r.map((t=>{if(t.coverPhoto){const e=Object.assign({},t.coverPhoto);return e.id=t.id,e.title=t.title,e}return{id:t.id,title:t.title,aspect:4/3,hash:"",uniq:"",blurHash:"",isVideo:!1,uploadTimeStamp:0,uploadedBy:0,originalFilename:"",size:0,width:0,height:0,tags:[],make:null,model:null,lens:null,mime:null,creationDate:null,subjectArea:null,aperture:null,iso:null,shutterSpeed:null,gpsLat:null,gpsLon:null,gpsAlt:null}}))),7&t.$$.dirty&&r&&function(t,e){if(!t||!e)return;const o=e.map((t=>null!=t?t.aspect:4/3));n(4,u=en(o,{targetRowHeight:300,containerWidth:t,containerPadding:10,widowLayoutStyle:"center"}))}(l,s)},[r,s,l,o,u,d,f,a,function(t){t.detail.numFiles>0&&Ut.goto("/album/unsorted")},function(t){return i(this,void 0,void 0,(function*(){const e=yield ue("/album/reorderList/",{params:{newOrdering:t.detail.newStubs.map((t=>t.id))},method:"POST",authorize:!0});e.success?n(1,s=t.detail.newStubs):console.error(e)}))},()=>n(5,d=!1),()=>{n(5,d=!1),a(o)},()=>n(5,d=!0),()=>{n(6,f=!f)},function(){l=this.clientWidth,n(2,l)}]}class es extends Dt{constructor(t){super(),St(this,t,ts,Qr,s,{})}}function ns(e){let n;return{c(){n=j("div"),n.innerHTML='<div class="error svelte-197tbwd">404</div> \n    <div class="explain svelte-197tbwd">There’s nothing here…</div>',P(n,"class","notFound svelte-197tbwd")},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&x(n)}}}class os extends Dt{constructor(t){super(),St(this,t,null,ns,s,{})}}const{document:is}=Et;function rs(t){t[10]=t[11].default}function ss(t){let e,n;return e=new Xe({}),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ls(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function as(t){let e,n,o;rs(t);var i=t[10];function r(t){return{props:{albumSlug:t[9].params.albumSlug}}}return i&&(e=new i(r(t))),{c(){e&&Mt(e.$$.fragment),n=M()},m(t,i){e&&_t(e,t,i),b(t,n,i),o=!0},p(t,o){rs(t);const s={};if(512&o&&(s.albumSlug=t[9].params.albumSlug),i!==(i=t[10])){if(e){vt();const t=e;xt(t.$$.fragment,1,0,(()=>{Lt(t,1)})),yt()}i?(e=new i(r(t)),Mt(e.$$.fragment),bt(e.$$.fragment,1),_t(e,n.parentNode,n)):e=null}else i&&e.$set(s)},i(t){o||(e&&bt(e.$$.fragment,t),o=!0)},o(t){e&&xt(e.$$.fragment,t),o=!1},d(t){t&&x(n),e&&Lt(e,t)}}}function cs(e){let n;return{c(){n=E("Loading…")},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&x(n)}}}function us(t){let e,n,o={ctx:t,current:null,token:null,hasCatch:!1,pending:cs,then:as,catch:ls,value:11,blocks:[,,,]};return Ct(import("./AlbumIndex-6fd92e7a.js"),o),{c(){e=M(),o.block.c()},m(t,i){b(t,e,i),o.block.m(t,o.anchor=i),o.mount=()=>e.parentNode,o.anchor=e,n=!0},p(e,n){{const i=(t=e).slice();i[11]=o.resolved,o.block.p(i,n)}},i(t){n||(bt(o.block),n=!0)},o(t){for(let t=0;t<3;t+=1){xt(o.blocks[t])}n=!1},d(t){t&&x(e),o.block.d(t),o.token=null,o=null}}}function ds(t){let e,n;return e=new es({}),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function fs(t){let e,n;return e=new os({}),{c(){Mt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(bt(e.$$.fragment,t),n=!0)},o(t){xt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function hs(t){let e,n,o,i,r,s,l,a;return e=new Qt({props:{path:"/setup",$$slots:{default:[ss]},$$scope:{ctx:t}}}),o=new Qt({props:{path:"/album/:albumSlug/*",$$slots:{default:[us,({meta:t})=>({9:t}),({meta:t})=>t?512:0]},$$scope:{ctx:t}}}),r=new Qt({props:{path:"/",$$slots:{default:[ds]},$$scope:{ctx:t}}}),l=new Qt({props:{fallback:!0,$$slots:{default:[fs]},$$scope:{ctx:t}}}),{c(){Mt(e.$$.fragment),n=T(),Mt(o.$$.fragment),i=T(),Mt(r.$$.fragment),s=T(),Mt(l.$$.fragment)},m(t,c){_t(e,t,c),b(t,n,c),_t(o,t,c),b(t,i,c),_t(r,t,c),b(t,s,c),_t(l,t,c),a=!0},p(t,n){const i={};4096&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const s={};4608&n&&(s.$$scope={dirty:n,ctx:t}),o.$set(s);const a={};4096&n&&(a.$$scope={dirty:n,ctx:t}),r.$set(a);const c={};4096&n&&(c.$$scope={dirty:n,ctx:t}),l.$set(c)},i(t){a||(bt(e.$$.fragment,t),bt(o.$$.fragment,t),bt(r.$$.fragment,t),bt(l.$$.fragment,t),a=!0)},o(t){xt(e.$$.fragment,t),xt(o.$$.fragment,t),xt(r.$$.fragment,t),xt(l.$$.fragment,t),a=!1},d(t){Lt(e,t),t&&x(n),Lt(o,t),t&&x(i),Lt(r,t),t&&x(s),Lt(l,t)}}}function ps(t){let e;return{c(){e=j("div"),e.innerHTML='<a href="https://github.com/sjml/pozzo" target="_" class="svelte-1vbmpnp"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20" viewBox="0 0 24 24" class="svelte-1vbmpnp"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>\n                Pozzo Gallery</a>',P(e,"class","promo svelte-1vbmpnp")},m(t,n){b(t,e,n)},d(t){t&&x(e)}}}function ms(t){let e,n,o,i,r,s,l,a;is.title=e="\n        "+t[2]+"\n    ",i=new Ve({}),i.$on("fullScreenOn",t[4]),i.$on("fullScreenOff",t[5]),s=new Qt({props:{path:"/*",firstmatch:!0,$$slots:{default:[hs]},$$scope:{ctx:t}}});let c=t[0].promo&&null==t[1]&&ps();return{c(){n=T(),o=j("div"),Mt(i.$$.fragment),r=T(),Mt(s.$$.fragment),l=T(),c&&c.c(),P(o,"class","container svelte-1vbmpnp")},m(t,e){b(t,n,e),b(t,o,e),_t(i,o,null),y(o,r),_t(s,o,null),y(o,l),c&&c.m(o,null),a=!0},p(t,[n]){(!a||4&n)&&e!==(e="\n        "+t[2]+"\n    ")&&(is.title=e);const i={};4096&n&&(i.$$scope={dirty:n,ctx:t}),s.$set(i),t[0].promo&&null==t[1]?c||(c=ps(),c.c(),c.m(o,null)):c&&(c.d(1),c=null)},i(t){a||(bt(i.$$.fragment,t),bt(s.$$.fragment,t),a=!0)},o(t){xt(i.$$.fragment,t),xt(s.$$.fragment,t),a=!1},d(t){t&&x(n),t&&x(o),Lt(i),Lt(s),c&&c.d()}}}function gs(t){t?document.documentElement.requestFullscreen():document.exitFullscreen()}function ws(t,e,n){let o,i,r,s;c(t,te,(t=>n(0,o=t))),c(t,ne,(t=>n(6,i=t))),c(t,re,(t=>n(3,r=t))),c(t,se,(t=>n(1,s=t)));var l=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))};Z((function(){return l(this,void 0,void 0,(function*(){const t=yield ue("/info");t.success?(Object.assign(o,t.data),te.set(o),0==o.siteTitle&&Ut.goto("/setup")):console.error(t),document.addEventListener("fullscreenchange",(()=>{h(ne,i=null!=document.fullscreenElement,i)}))}))}));let a="Pozzo";return t.$$.update=()=>{if(15&t.$$.dirty){const t=o.siteTitle;"string"==typeof t&&(n(2,a=t),r&&(n(2,a+=` | ${r.title}`),s&&n(2,a+=` | ${s.title}`)))}},[o,s,a,r,()=>gs(!0),()=>gs(!1)]}const $s=new class extends Dt{constructor(t){super(),St(this,t,ws,ms,s,{})}}({target:document.body,props:{}});export{A as $,Z as A,ee as B,y as C,O as D,k as E,rn as F,sn as G,nn as H,$e as I,C as J,vo as K,Je as L,Ze as M,_ as N,ct as O,jt as P,fe as Q,ue as R,Dt as S,on as T,nt as U,q as V,le as W,K as X,en as Y,H as Z,_n as _,xt as a,z as a0,zr as a1,to as a2,Eo as a3,$s as a4,b,Mt as c,Lt as d,M as e,yt as f,vt as g,x as h,St as i,c as j,re as k,ce as l,_t as m,Ut as n,J as o,h as p,Qt as q,T as r,s,bt as t,Ct as u,t as v,E as w,j as x,P as y,se as z};
