import{S as t,i as e,s as o,y as r,z as n,b as s,x as l,h as a,a7 as c,a4 as u,w as i,U as p,c as h,B as d,m,V as f,ad as g,t as P,a as w,d as $,g as b,f as v,e as k,N as y,j as q,k as x,l as I,ae as L,p as C,q as M,H as G,I as N,L as j,af as V,ag as O,r as S,ah as A}from"./main-5139e551.js";import{M as W}from"./Markdown-b7d9fb90.js";function R(t){let e,o;return{c(){e=r("video"),n(e,"class","main svelte-18nqc1q"),e.src!==(o=t[0])&&n(e,"src",o),e.controls=!0,n(e,"poster",t[1])},m(t,o){s(t,e,o)},p(t,[r]){1&r&&e.src!==(o=t[0])&&n(e,"src",o),2&r&&n(e,"poster",t[1])},i:l,o:l,d(t){t&&a(e)}}}function z(t,e,o){let r,n,{photoWhichIsReallyAVideo:s}=e;return c((()=>{o(1,n=u("large",s.hash,s.uniq));const t=s.originalFilename.split(".").pop();o(0,r=u("orig",s.hash,s.uniq,t))})),t.$$set=t=>{"photoWhichIsReallyAVideo"in t&&o(2,s=t.photoWhichIsReallyAVideo)},[r,n,s]}class T extends t{constructor(t){super(),e(this,t,z,R,o,{photoWhichIsReallyAVideo:2})}}function F(t,e,o){const r=t.slice();return r[6]=e[o],r}function B(t){let e,o,l;return o=new W({props:{markdown:t[0].currentGroup.description}}),{c(){e=r("div"),h(o.$$.fragment),n(e,"class","interstitial svelte-1wqdbb")},m(t,r){s(t,e,r),m(o,e,null),l=!0},p(t,e){const r={};1&e&&(r.markdown=t[0].currentGroup.description),o.$set(r)},i(t){l||(P(o.$$.fragment,t),l=!0)},o(t){w(o.$$.fragment,t),l=!1},d(t){t&&a(e),$(o)}}}function D(t){let e,o,r,n;const l=[U,H],c=[];function u(t,e){return t[0].currentPhoto.isVideo?1:0}return e=u(t),o=c[e]=l[e](t),{c(){o.c(),r=k()},m(t,o){c[e].m(t,o),s(t,r,o),n=!0},p(t,n){let s=e;e=u(t),e===s?c[e].p(t,n):(b(),w(c[s],1,1,(()=>{c[s]=null})),v(),o=c[e],o?o.p(t,n):(o=c[e]=l[e](t),o.c()),P(o,1),o.m(r.parentNode,r))},i(t){n||(P(o),n=!0)},o(t){w(o),n=!1},d(t){c[e].d(t),t&&a(r)}}}function H(t){let e,o;return e=new T({props:{photoWhichIsReallyAVideo:t[0].currentPhoto}}),{c(){h(e.$$.fragment)},m(t,r){m(e,t,r),o=!0},p(t,o){const r={};1&o&&(r.photoWhichIsReallyAVideo=t[0].currentPhoto),e.$set(r)},i(t){o||(P(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){$(e,t)}}}function U(t){let e,o;return e=new A({props:{photo:t[0].currentPhoto,lazy:!1,size:Y,objectFit:"contain"}}),{c(){h(e.$$.fragment)},m(t,r){m(e,t,r),o=!0},p(t,o){const r={};1&o&&(r.photo=t[0].currentPhoto),e.$set(r)},i(t){o||(P(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){$(e,t)}}}function _(t){let e,o,l,c,u,k,q,x,I,L,C,M,N,j,V,O,S,A,W,R,z,T,B,D,H,U,_,K,X,Y,Z,tt,et,ot,rt,nt,st=t[0].currentPhoto.title+"",lt=t[0].currentPhoto.width+"",at=t[0].currentPhoto.height+"",ct=g(t[0].currentPhoto.size)+"",ut=t[0].currentPhoto.uploadTimeStamp+"",it=(t[0].currentPhoto.tags.length>0?t[0].currentPhoto.tags.join(", "):"(None)")+"";H=new G({props:{margin:"0 10px 0 0",$$slots:{default:[E]},$$scope:{ctx:t}}});let pt=t[0].currentPhoto.gpsLat&&t[0].currentPhoto.gpsLon&&J(t),ht=t[2],dt=[];for(let e=0;e<ht.length;e+=1)dt[e]=Q(F(t,ht,e));return{c(){e=r("div"),o=r("div"),l=r("span"),l.textContent="Title:",c=i(),u=p(st),k=i(),q=r("table"),x=r("tr"),I=r("td"),I.textContent="Original: ",L=r("td"),C=p(lt),M=p("Ã—"),N=p(at),j=p(" ("),V=p(ct),O=p(")"),S=i(),A=r("tr"),W=r("td"),W.textContent="Uploaded: ",R=r("td"),z=p(ut),T=i(),B=r("div"),D=r("a"),h(H.$$.fragment),_=i(),pt&&pt.c(),K=i(),X=r("table"),Y=r("tr"),Z=r("td"),Z.textContent="Tags",tt=i(),et=r("td"),ot=p(it),rt=i();for(let t=0;t<dt.length;t+=1)dt[t].c();n(l,"class","label svelte-1wqdbb"),n(o,"class","title svelte-1wqdbb"),n(I,"class","label svelte-1wqdbb"),n(W,"class","label svelte-1wqdbb"),n(q,"class","photoMeta svelte-1wqdbb"),n(D,"href",U="/api/photo/orig/"+t[0].currentPhoto.id),n(D,"class","svelte-1wqdbb"),n(B,"class","dlOrig svelte-1wqdbb"),n(Z,"class","label svelte-1wqdbb"),n(et,"class","value"),n(X,"class","photoMeta svelte-1wqdbb"),n(e,"class","metadata svelte-1wqdbb")},m(t,r){s(t,e,r),d(e,o),d(o,l),d(o,c),d(o,u),d(e,k),d(e,q),d(q,x),d(x,I),d(x,L),d(L,C),d(L,M),d(L,N),d(L,j),d(L,V),d(L,O),d(q,S),d(q,A),d(A,W),d(A,R),d(R,z),d(e,T),d(e,B),d(B,D),m(H,D,null),d(e,_),pt&&pt.m(e,null),d(e,K),d(e,X),d(X,Y),d(Y,Z),d(Y,tt),d(Y,et),d(et,ot),d(X,rt);for(let t=0;t<dt.length;t+=1)dt[t].m(X,null);nt=!0},p(t,o){(!nt||1&o)&&st!==(st=t[0].currentPhoto.title+"")&&f(u,st),(!nt||1&o)&&lt!==(lt=t[0].currentPhoto.width+"")&&f(C,lt),(!nt||1&o)&&at!==(at=t[0].currentPhoto.height+"")&&f(N,at),(!nt||1&o)&&ct!==(ct=g(t[0].currentPhoto.size)+"")&&f(V,ct),(!nt||1&o)&&ut!==(ut=t[0].currentPhoto.uploadTimeStamp+"")&&f(z,ut);const r={};if(512&o&&(r.$$scope={dirty:o,ctx:t}),H.$set(r),(!nt||1&o&&U!==(U="/api/photo/orig/"+t[0].currentPhoto.id))&&n(D,"href",U),t[0].currentPhoto.gpsLat&&t[0].currentPhoto.gpsLon?pt?(pt.p(t,o),1&o&&P(pt,1)):(pt=J(t),pt.c(),P(pt,1),pt.m(e,K)):pt&&(b(),w(pt,1,1,(()=>{pt=null})),v()),(!nt||1&o)&&it!==(it=(t[0].currentPhoto.tags.length>0?t[0].currentPhoto.tags.join(", "):"(None)")+"")&&f(ot,it),5&o){let e;for(ht=t[2],e=0;e<ht.length;e+=1){const r=F(t,ht,e);dt[e]?dt[e].p(r,o):(dt[e]=Q(r),dt[e].c(),dt[e].m(X,null))}for(;e<dt.length;e+=1)dt[e].d(1);dt.length=ht.length}},i(t){nt||(P(H.$$.fragment,t),P(pt),nt=!0)},o(t){w(H.$$.fragment,t),w(pt),nt=!1},d(t){t&&a(e),$(H),pt&&pt.d(),y(dt,t)}}}function E(t){let e,o,l,c,u,p,h;return{c(){e=N("svg"),o=N("rect"),l=N("polyline"),c=N("line"),u=N("path"),p=i(),h=r("div"),h.textContent="Download Original",n(o,"width","256"),n(o,"height","256"),n(o,"fill","none"),n(l,"points","86 110 128 152 170 110"),n(l,"fill","none"),n(l,"stroke","currentColor"),n(l,"stroke-linecap","round"),n(l,"stroke-linejoin","round"),n(l,"stroke-width","24"),n(c,"x1","128"),n(c,"y1","39.97056"),n(c,"x2","128"),n(c,"y2","151.97056"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-linecap","round"),n(c,"stroke-linejoin","round"),n(c,"stroke-width","24"),n(u,"d","M224,136v72a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V136"),n(u,"fill","none"),n(u,"stroke","currentColor"),n(u,"stroke-linecap","round"),n(u,"stroke-linejoin","round"),n(u,"stroke-width","24"),n(e,"xmlns","http://www.w3.org/2000/svg"),n(e,"fill","currentColor"),n(e,"viewBox","0 0 256 256"),n(e,"class","svelte-1wqdbb")},m(t,r){s(t,e,r),d(e,o),d(e,l),d(e,c),d(e,u),s(t,p,r),s(t,h,r)},d(t){t&&a(e),t&&a(p),t&&a(h)}}}function J(t){let e,o,l,c,u,f,g,b,v,k,y,q,x,I,L,C;return o=new j({props:{loader:"PhotoMap",photos:[t[0].currentPhoto],exploreIconOnly:!0,popups:!1}}),{c(){e=r("div"),h(o.$$.fragment),l=i(),c=r("div"),u=p("{"),f=i(),g=r("a"),b=p("OpenStreetMap"),k=p("\n                | "),y=r("a"),q=p("Google Maps"),I=i(),L=p("}"),n(e,"class","photoMap svelte-1wqdbb"),n(g,"target","_"),n(g,"href",v="https://www.openstreetmap.org/?mlat="+t[0].currentPhoto.gpsLat+"&mlon="+t[0].currentPhoto.gpsLon+"#map=18/"+t[0].currentPhoto.gpsLat+"/"+t[0].currentPhoto.gpsLon),n(g,"class","svelte-1wqdbb"),n(y,"target","_"),n(y,"href",x="https://www.google.com/maps/search/?api=1&query="+t[0].currentPhoto.gpsLat+","+t[0].currentPhoto.gpsLon),n(y,"class","svelte-1wqdbb"),n(c,"class","mapLinks svelte-1wqdbb")},m(t,r){s(t,e,r),m(o,e,null),s(t,l,r),s(t,c,r),d(c,u),d(c,f),d(c,g),d(g,b),d(c,k),d(c,y),d(y,q),d(c,I),d(c,L),C=!0},p(t,e){const r={};1&e&&(r.photos=[t[0].currentPhoto]),o.$set(r),(!C||1&e&&v!==(v="https://www.openstreetmap.org/?mlat="+t[0].currentPhoto.gpsLat+"&mlon="+t[0].currentPhoto.gpsLon+"#map=18/"+t[0].currentPhoto.gpsLat+"/"+t[0].currentPhoto.gpsLon))&&n(g,"href",v),(!C||1&e&&x!==(x="https://www.google.com/maps/search/?api=1&query="+t[0].currentPhoto.gpsLat+","+t[0].currentPhoto.gpsLon))&&n(y,"href",x)},i(t){C||(P(o.$$.fragment,t),C=!0)},o(t){w(o.$$.fragment,t),C=!1},d(t){t&&a(e),$(o),t&&a(l),t&&a(c)}}}function K(t){let e,o,l,c,u,h,m,g=t[6].value+"",P=(null==t[6].filter?t[0].currentPhoto[t[6].key]:t[6].filter(t[0].currentPhoto[t[6].key]))+"";return{c(){e=r("tr"),o=r("td"),l=p(g),c=i(),u=r("td"),h=p(P),m=i(),n(o,"class","label svelte-1wqdbb"),n(u,"class","value")},m(t,r){s(t,e,r),d(e,o),d(o,l),d(e,c),d(e,u),d(u,h),d(e,m)},p(t,e){1&e&&P!==(P=(null==t[6].filter?t[0].currentPhoto[t[6].key]:t[6].filter(t[0].currentPhoto[t[6].key]))+"")&&f(h,P)},d(t){t&&a(e)}}}function Q(t){let e,o=null!=t[0].currentPhoto[t[6].key]&&K(t);return{c(){o&&o.c(),e=k()},m(t,r){o&&o.m(t,r),s(t,e,r)},p(t,r){null!=t[0].currentPhoto[t[6].key]?o?o.p(t,r):(o=K(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},d(t){o&&o.d(t),t&&a(e)}}}function X(t){let e,o,l,c,u,p;const h=[D,B],d=[];function m(t,e){return t[0].currentPhoto?0:t[0].currentGroup?1:-1}~(o=m(t))&&(l=d[o]=h[o](t));let f=t[0].currentPhoto&&t[1]&&_(t);return{c(){e=r("div"),l&&l.c(),c=i(),f&&f.c(),u=k(),n(e,"class","fullPerusal svelte-1wqdbb")},m(t,r){s(t,e,r),~o&&d[o].m(e,null),s(t,c,r),f&&f.m(t,r),s(t,u,r),p=!0},p(t,[r]){let n=o;o=m(t),o===n?~o&&d[o].p(t,r):(l&&(b(),w(d[n],1,1,(()=>{d[n]=null})),v()),~o?(l=d[o],l?l.p(t,r):(l=d[o]=h[o](t),l.c()),P(l,1),l.m(e,null)):l=null),t[0].currentPhoto&&t[1]?f?(f.p(t,r),3&r&&P(f,1)):(f=_(t),f.c(),P(f,1),f.m(u.parentNode,u)):f&&(b(),w(f,1,1,(()=>{f=null})),v())},i(t){p||(P(l),P(f),p=!0)},o(t){w(l),w(f),p=!1},d(t){t&&a(e),~o&&d[o].d(),t&&a(c),f&&f.d(t),t&&a(u)}}}const Y="large";function Z(t,e,o){let r,n,s;q(t,x,(t=>o(0,r=t))),q(t,I,(t=>o(4,n=t))),q(t,L,(t=>o(1,s=t)));const l=[{key:"creationDate",value:"Taken",filter:V},{key:"mime",value:"Format"},{key:"make",value:"Camera Make"},{key:"model",value:"Camera Model"},{key:"lens",value:"Lens"},{key:"aperture",value:"Aperture",filter:t=>`f/${t}`},{key:"iso",value:"ISO"},{key:"shutterSpeed",value:"Shutter Speed",filter:O}];let{perusalIdentifier:a}=e;return C((()=>{M(x,r.currentIdx=-1,r),M(x,r.currentPhoto=null,r),M(x,r.currentGroup=null,r)})),t.$$set=t=>{"perusalIdentifier"in t&&o(3,a=t.perusalIdentifier)},t.$$.update=()=>{8&t.$$.dirty&&function(t){if(t.startsWith("g")){M(x,r.currentPhoto=null,r);const e=parseInt(t.slice(1));if(isNaN(e))r.currentGroup;else{const t=r.nodes.findIndex((t=>!t.hasOwnProperty("hash")&&(t.id==e||void 0)));-1==t?M(x,r.currentGroup=null,r):(M(x,r.currentIdx=t,r),M(x,r.currentGroup=r.nodes[t],r))}}else{M(x,r.currentGroup=null,r);const e=parseInt(t);if(isNaN(e))M(x,r.currentPhoto=null,r);else{const t=r.nodes.findIndex((t=>!!t.hasOwnProperty("hash")&&(t.id==e||void 0)));-1==t?M(x,r.currentPhoto=null,r):(M(x,r.currentIdx=t,r),M(x,r.currentPhoto=r.nodes[t],r))}}null==r.currentPhoto&&null==r.currentGroup&&S(`/${n.type}/${n.slug}`)}(a)},[r,s,l,a]}export default class extends t{constructor(t){super(),e(this,t,Z,X,o,{perusalIdentifier:3})}}
