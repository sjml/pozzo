import{S as t,i as e,s as n,g as o,k as l,n as s,A as a,w as r,b as c,ac as i,o as p,a1 as u,D as d,E as f,a as m,F as g,t as h,I as v,ad as w,J as $,y as k,f as y,ae as z,af as x,j as L,h as b,c as C,p as j,m as I,v as M,H as N,d as S,G as q,K as O,L as T,a8 as F,ag as _}from"./main-7b06f501.js";function D(t){let e,n;return{c(){e=o("video"),l(e,"class","main svelte-18nqc1q"),e.src!==(n=t[0])&&l(e,"src",n),e.controls=!0,l(e,"poster",t[1])},m(t,n){s(t,e,n)},p(t,[o]){1&o&&e.src!==(n=t[0])&&l(e,"src",n),2&o&&l(e,"poster",t[1])},i:a,o:a,d(t){t&&r(e)}}}function P(t,e,n){let o,l,s;return c(t,i,(t=>n(2,o=t))),p((()=>{n(1,s=u("large",o.hash,o.uniq));const t=o.originalFilename.split(".").pop();n(0,l=u("orig",o.hash,o.uniq,t))})),[l,s]}class A extends t{constructor(t){super(),e(this,t,P,D,n,{})}}function G(t,e,n){const o=t.slice();return o[7]=e[n],o}function H(t){t[10]=t[11].default}function V(t){let e,n,a,c,i,p;const u=[J,E],v=[];function w(t,e){return t[0].isVideo?1:0}n=w(t),a=v[n]=u[n](t);let $=t[1]&&K(t);return{c(){e=o("div"),a.c(),c=L(),$&&$.c(),i=d(),l(e,"class","fullPhoto svelte-12wz3c2")},m(t,o){s(t,e,o),v[n].m(e,null),s(t,c,o),$&&$.m(t,o),s(t,i,o),p=!0},p(t,o){let l=n;n=w(t),n===l?v[n].p(t,o):(f(),m(v[l],1,1,(()=>{v[l]=null})),g(),a=v[n],a?a.p(t,o):(a=v[n]=u[n](t),a.c()),h(a,1),a.m(e,null)),t[1]?$?($.p(t,o),2&o&&h($,1)):($=K(t),$.c(),h($,1),$.m(i.parentNode,i)):$&&(f(),m($,1,1,(()=>{$=null})),g())},i(t){p||(h(a),h($),p=!0)},o(t){m(a),m($),p=!1},d(t){t&&r(e),v[n].d(),t&&r(c),$&&$.d(t),t&&r(i)}}}function B(t){let e;return{c(){e=b("Loading…")},m(t,n){s(t,e,n)},p:a,i:a,o:a,d(t){t&&r(e)}}}function E(t){let e,n;return e=new A({}),{c(){C(e.$$.fragment)},m(t,o){I(e,t,o),n=!0},p:a,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function J(t){let e,n;return e=new _({props:{photo:t[0],lazy:!1,size:et,objectFit:"contain"}}),{c(){C(e.$$.fragment)},m(t,o){I(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.photo=t[0]),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function K(t){let e,n,a,c,i,p,u,d,v,w,$,k,y,z,x,T,F,_,D,P,A,H,V,B,E,J,K,R,W,X,Y,tt,et,nt,ot,lt,st=t[0].title+"",at=t[0].width+"",rt=t[0].height+"",ct=N(t[0].size)+"",it=t[0].uploadTimeStamp+"",pt=(t[0].tags.length>0?t[0].tags.join(", "):"(None)")+"";E=new O({props:{margin:"0 10px 0 0",$$slots:{default:[U]},$$scope:{ctx:t}}});let ut=t[0].gpsLat&&t[0].gpsLon&&Q(t),dt=t[2],ft=[];for(let e=0;e<dt.length;e+=1)ft[e]=Z(G(t,dt,e));return{c(){e=o("div"),n=o("div"),a=o("span"),a.textContent="Title:",c=L(),i=b(st),p=L(),u=o("table"),d=o("tr"),v=o("td"),v.textContent="Original: ",w=o("td"),$=b(at),k=b("×"),y=b(rt),z=b(" ("),x=b(ct),T=b(")"),F=L(),_=o("tr"),D=o("td"),D.textContent="Uploaded: ",P=o("td"),A=b(it),H=L(),V=o("div"),B=o("a"),C(E.$$.fragment),K=L(),ut&&ut.c(),R=L(),W=o("table"),X=o("tr"),Y=o("td"),Y.textContent="Tags",tt=L(),et=o("td"),nt=b(pt),ot=L();for(let t=0;t<ft.length;t+=1)ft[t].c();l(a,"class","label svelte-12wz3c2"),l(n,"class","title svelte-12wz3c2"),l(v,"class","label svelte-12wz3c2"),l(D,"class","label svelte-12wz3c2"),l(u,"class","photoMeta svelte-12wz3c2"),l(B,"href",J="/api/photo/orig/"+t[0].id),l(B,"tinro-ignore",""),l(B,"class","svelte-12wz3c2"),l(V,"class","dlOrig svelte-12wz3c2"),l(Y,"class","label svelte-12wz3c2"),l(et,"class","value"),l(W,"class","photoMeta svelte-12wz3c2"),l(e,"class","metadata svelte-12wz3c2")},m(t,o){s(t,e,o),j(e,n),j(n,a),j(n,c),j(n,i),j(e,p),j(e,u),j(u,d),j(d,v),j(d,w),j(w,$),j(w,k),j(w,y),j(w,z),j(w,x),j(w,T),j(u,F),j(u,_),j(_,D),j(_,P),j(P,A),j(e,H),j(e,V),j(V,B),I(E,B,null),j(e,K),ut&&ut.m(e,null),j(e,R),j(e,W),j(W,X),j(X,Y),j(X,tt),j(X,et),j(et,nt),j(W,ot);for(let t=0;t<ft.length;t+=1)ft[t].m(W,null);lt=!0},p(t,n){(!lt||1&n)&&st!==(st=t[0].title+"")&&M(i,st),(!lt||1&n)&&at!==(at=t[0].width+"")&&M($,at),(!lt||1&n)&&rt!==(rt=t[0].height+"")&&M(y,rt),(!lt||1&n)&&ct!==(ct=N(t[0].size)+"")&&M(x,ct),(!lt||1&n)&&it!==(it=t[0].uploadTimeStamp+"")&&M(A,it);const o={};if(4096&n&&(o.$$scope={dirty:n,ctx:t}),E.$set(o),(!lt||1&n&&J!==(J="/api/photo/orig/"+t[0].id))&&l(B,"href",J),t[0].gpsLat&&t[0].gpsLon?ut?(ut.p(t,n),1&n&&h(ut,1)):(ut=Q(t),ut.c(),h(ut,1),ut.m(e,R)):ut&&(f(),m(ut,1,1,(()=>{ut=null})),g()),(!lt||1&n)&&pt!==(pt=(t[0].tags.length>0?t[0].tags.join(", "):"(None)")+"")&&M(nt,pt),5&n){let e;for(dt=t[2],e=0;e<dt.length;e+=1){const o=G(t,dt,e);ft[e]?ft[e].p(o,n):(ft[e]=Z(o),ft[e].c(),ft[e].m(W,null))}for(;e<ft.length;e+=1)ft[e].d(1);ft.length=dt.length}},i(t){lt||(h(E.$$.fragment,t),h(ut),lt=!0)},o(t){m(E.$$.fragment,t),m(ut),lt=!1},d(t){t&&r(e),S(E),ut&&ut.d(),q(ft,t)}}}function U(t){let e,n,a,c,i,p,u;return{c(){e=T("svg"),n=T("rect"),a=T("polyline"),c=T("line"),i=T("path"),p=L(),u=o("div"),u.textContent="Download Original",l(n,"width","256"),l(n,"height","256"),l(n,"fill","none"),l(a,"points","86 110 128 152 170 110"),l(a,"fill","none"),l(a,"stroke","currentColor"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"stroke-width","24"),l(c,"x1","128"),l(c,"y1","39.97056"),l(c,"x2","128"),l(c,"y2","151.97056"),l(c,"fill","none"),l(c,"stroke","currentColor"),l(c,"stroke-linecap","round"),l(c,"stroke-linejoin","round"),l(c,"stroke-width","24"),l(i,"d","M224,136v72a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V136"),l(i,"fill","none"),l(i,"stroke","currentColor"),l(i,"stroke-linecap","round"),l(i,"stroke-linejoin","round"),l(i,"stroke-width","24"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"fill","currentColor"),l(e,"viewBox","0 0 256 256"),l(e,"class","svelte-12wz3c2")},m(t,o){s(t,e,o),j(e,n),j(e,a),j(e,c),j(e,i),s(t,p,o),s(t,u,o)},d(t){t&&r(e),t&&r(p),t&&r(u)}}}function Q(t){let e,n,a,c,i,p,u,d,f,g,v,w,$,k,y,z={ctx:t,current:null,token:null,hasCatch:!1,pending:X,then:W,catch:R,value:11,blocks:[,,,]};return F(import("./PhotoMap-5461348f.js"),z),{c(){e=o("div"),z.block.c(),n=L(),a=o("div"),c=b("{"),i=L(),p=o("a"),u=b("OpenStreetMap"),f=b("\n                    | "),g=o("a"),v=b("Google Maps"),$=L(),k=b("}"),l(e,"class","photoMap svelte-12wz3c2"),l(p,"target","_"),l(p,"href",d="https://www.openstreetmap.org/?mlat="+t[0].gpsLat+"&mlon="+t[0].gpsLon+"#map=18/"+t[0].gpsLat+"/"+t[0].gpsLon),l(p,"class","svelte-12wz3c2"),l(g,"target","_"),l(g,"href",w="https://www.google.com/maps/search/?api=1&query="+t[0].gpsLat+","+t[0].gpsLon),l(g,"class","svelte-12wz3c2"),l(a,"class","mapLinks svelte-12wz3c2")},m(t,o){s(t,e,o),z.block.m(e,z.anchor=null),z.mount=()=>e,z.anchor=null,s(t,n,o),s(t,a,o),j(a,c),j(a,i),j(a,p),j(p,u),j(a,f),j(a,g),j(g,v),j(a,$),j(a,k),y=!0},p(e,n){{const o=(t=e).slice();o[11]=z.resolved,z.block.p(o,n)}(!y||1&n&&d!==(d="https://www.openstreetmap.org/?mlat="+t[0].gpsLat+"&mlon="+t[0].gpsLon+"#map=18/"+t[0].gpsLat+"/"+t[0].gpsLon))&&l(p,"href",d),(!y||1&n&&w!==(w="https://www.google.com/maps/search/?api=1&query="+t[0].gpsLat+","+t[0].gpsLon))&&l(g,"href",w)},i(t){y||(h(z.block),y=!0)},o(t){for(let t=0;t<3;t+=1){const e=z.blocks[t];m(e)}y=!1},d(t){t&&r(e),z.block.d(),z.token=null,z=null,t&&r(n),t&&r(a)}}}function R(t){return{c:a,m:a,p:a,i:a,o:a,d:a}}function W(t){let e,n,o;H(t);var l=t[10];function a(t){return{props:{photos:[t[0]],exploreIconOnly:!0,popups:!1}}}return l&&(e=new l(a(t))),{c(){e&&C(e.$$.fragment),n=d()},m(t,l){e&&I(e,t,l),s(t,n,l),o=!0},p(t,o){H(t);const s={};if(1&o&&(s.photos=[t[0]]),l!==(l=t[10])){if(e){f();const t=e;m(t.$$.fragment,1,0,(()=>{S(t,1)})),g()}l?(e=new l(a(t)),C(e.$$.fragment),h(e.$$.fragment,1),I(e,n.parentNode,n)):e=null}else l&&e.$set(s)},i(t){o||(e&&h(e.$$.fragment,t),o=!0)},o(t){e&&m(e.$$.fragment,t),o=!1},d(t){t&&r(n),e&&S(e,t)}}}function X(t){return{c:a,m:a,p:a,i:a,o:a,d:a}}function Y(t){let e,n,a,c,i,p,u,d=t[7].value+"",f=(null==t[7].filter?t[0][t[7].key]:t[7].filter(t[0][t[7].key]))+"";return{c(){e=o("tr"),n=o("td"),a=b(d),c=L(),i=o("td"),p=b(f),u=L(),l(n,"class","label svelte-12wz3c2"),l(i,"class","value")},m(t,o){s(t,e,o),j(e,n),j(n,a),j(e,c),j(e,i),j(i,p),j(e,u)},p(t,e){1&e&&f!==(f=(null==t[7].filter?t[0][t[7].key]:t[7].filter(t[0][t[7].key]))+"")&&M(p,f)},d(t){t&&r(e)}}}function Z(t){let e,n=null!=t[0][t[7].key]&&Y(t);return{c(){n&&n.c(),e=d()},m(t,o){n&&n.m(t,o),s(t,e,o)},p(t,o){null!=t[0][t[7].key]?n?n.p(t,o):(n=Y(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&r(e)}}}function tt(t){let e,n,o,l;const a=[B,V],c=[];function i(t,e){return t[0]?1:0}return e=i(t),n=c[e]=a[e](t),{c(){n.c(),o=d()},m(t,n){c[e].m(t,n),s(t,o,n),l=!0},p(t,[l]){let s=e;e=i(t),e===s?c[e].p(t,l):(f(),m(c[s],1,1,(()=>{c[s]=null})),g(),n=c[e],n?n.p(t,l):(n=c[e]=a[e](t),n.c()),h(n,1),n.m(o.parentNode,o))},i(t){l||(h(n),l=!0)},o(t){m(n),l=!1},d(t){c[e].d(t),t&&r(o)}}}const et="large";function nt(t,e,n){let o,l,s;c(t,i,(t=>n(0,o=t))),c(t,v,(t=>n(4,l=t))),c(t,w,(t=>n(1,s=t)));var a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(l,s){function a(t){try{c(o.next(t))}catch(t){s(t)}}function r(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?l(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}c((o=o.apply(t,e||[])).next())}))};const r=[{key:"creationDate",value:"Taken",filter:z},{key:"mime",value:"Format"},{key:"make",value:"Camera Make"},{key:"model",value:"Camera Model"},{key:"lens",value:"Lens"},{key:"aperture",value:"Aperture",filter:t=>`f/${t}`},{key:"iso",value:"ISO"},{key:"shutterSpeed",value:"Shutter Speed",filter:x}];let{photoIdentifier:p}=e;return $((()=>{k(i,o=null,o)})),t.$$set=t=>{"photoIdentifier"in t&&n(3,p=t.photoIdentifier)},t.$$.update=()=>{8&t.$$.dirty&&function(t){a(this,void 0,void 0,(function*(){const e=parseInt(t);if(isNaN(e))return void y.goto(`/album/${l.slug}`);const n=l.photos.findIndex((t=>t.id==e));-1!=n?k(i,o=l.photos[n],o):y.goto(`/album/${l.slug}`)}))}(p)},[o,s,r,p]}export default class extends t{constructor(t){super(),e(this,t,nt,tt,n,{photoIdentifier:3})}}
