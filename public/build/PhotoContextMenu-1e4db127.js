import{S as e,i as t,s as n,c as o,m as l,A as r,t as s,a as i,d as c,K as d,g as u,j as a,D as m,k as f,n as p,r as h,E as $,F as v,w as g,G as k,h as w,p as x,v as y,b as C,a5 as j,I as b,C as I,o as B,R as H,ah as M,ai as A,L as X,z as Y}from"./main-71cfada0.js";const{document:D}=M;function P(e,t,n){const o=e.slice();return o[20]=t[n],o}function L(e){let t,n;return t=new A({}),t.$on("dismissed",e[10]),t.$on("done",e[11]),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p:r,i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function N(e){let t,n;return t=new d({props:{$$slots:{default:[V]},$$scope:{ctx:e}}}),t.$on("click",e[12]),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p(e,n){const o={};8388800&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function V(e){let t,n,o,l,r,s,i,c,d,m=e[7].coverPhoto.id==e[6][0].id?"Unset":"Set";return{c(){t=u("div"),n=X("svg"),o=X("rect"),l=X("polyline"),r=X("path"),s=a(),i=u("div"),c=w(m),d=w(" as Cover Photo"),f(o,"width","256"),f(o,"height","256"),f(o,"fill","none"),f(l,"points","200 176 127.993 136 56 176"),f(l,"fill","none"),f(l,"stroke","currentColor"),f(l,"stroke-linecap","round"),f(l,"stroke-linejoin","round"),f(l,"stroke-width","24"),f(r,"d","M200,224l-72.0074-40L56,224V40a8,8,0,0,1,8-8H192a8,8,0,0,1,8,8Z"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(r,"stroke-width","24"),f(n,"xmlns","http://www.w3.org/2000/svg"),f(n,"fill","currentColor"),f(n,"viewBox","0 0 256 256"),f(n,"class","svelte-1lmumdt"),f(t,"class","cover menuItem svelte-1lmumdt")},m(e,u){p(e,t,u),x(t,n),x(n,o),x(n,l),x(n,r),x(t,s),x(t,i),x(i,c),x(i,d)},p(e,t){192&t&&m!==(m=e[7].coverPhoto.id==e[6][0].id?"Unset":"Set")&&y(c,m)},d(e){e&&g(t)}}}function W(e){let t,n,o;return{c(){t=X("svg"),n=X("rect"),o=X("polyline"),f(n,"width","256"),f(n,"height","256"),f(n,"fill","none"),f(o,"points","208 96 128 176 48 96"),f(o,"fill","none"),f(o,"stroke","currentColor"),f(o,"stroke-linecap","round"),f(o,"stroke-linejoin","round"),f(o,"stroke-width","24"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 256 256"),f(t,"class","svelte-1lmumdt")},m(e,l){p(e,t,l),x(t,n),x(t,o)},d(e){e&&g(t)}}}function S(e){let t,n,o;return{c(){t=X("svg"),n=X("rect"),o=X("polyline"),f(n,"width","256"),f(n,"height","256"),f(n,"fill","none"),f(o,"points","96 48 176 128 96 208"),f(o,"fill","none"),f(o,"stroke","currentColor"),f(o,"stroke-linecap","round"),f(o,"stroke-linejoin","round"),f(o,"stroke-width","24"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 256 256"),f(t,"class","svelte-1lmumdt")},m(e,l){p(e,t,l),x(t,n),x(t,o)},d(e){e&&g(t)}}}function z(e){let t,n,o;function l(e,t){return e[4]?W:S}let r=l(e),s=r(e);return{c(){t=u("div"),s.c(),n=a(),o=u("div"),o.textContent="Move To",f(o,"class","label svelte-1lmumdt"),f(t,"class","move menuItem svelte-1lmumdt")},m(e,l){p(e,t,l),s.m(t,null),x(t,n),x(t,o)},p(e,o){r!==(r=l(e))&&(s.d(1),s=r(e),s&&(s.c(),s.m(t,n)))},d(e){e&&g(t),s.d()}}}function T(e){let t,n,r,w,x,y,C;n=new d({props:{$$slots:{default:[U]},$$scope:{ctx:e}}});let j=e[3],b=[];for(let t=0;t<j.length;t+=1)b[t]=F(P(e,j,t));const I=e=>i(b[e],1,1,(()=>{b[e]=null}));return{c(){t=u("div"),o(n.$$.fragment),r=a();for(let e=0;e<b.length;e+=1)b[e].c();w=m(),f(t,"class","album menuItem svelte-1lmumdt")},m(o,s){p(o,t,s),l(n,t,null),p(o,r,s);for(let e=0;e<b.length;e+=1)b[e].m(o,s);p(o,w,s),x=!0,y||(C=h(t,"click",e[14]),y=!0)},p(e,t){const o={};if(8388608&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o),392&t){let n;for(j=e[3],n=0;n<j.length;n+=1){const o=P(e,j,n);b[n]?(b[n].p(o,t),s(b[n],1)):(b[n]=F(o),b[n].c(),s(b[n],1),b[n].m(w.parentNode,w))}for($(),n=j.length;n<b.length;n+=1)I(n);v()}},i(e){if(!x){s(n.$$.fragment,e);for(let e=0;e<j.length;e+=1)s(b[e]);x=!0}},o(e){i(n.$$.fragment,e),b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)i(b[e]);x=!1},d(e){e&&g(t),c(n),e&&g(r),k(b,e),e&&g(w),y=!1,C()}}}function U(e){let t,n,o,l,r,s,i;return{c(){t=X("svg"),n=X("rect"),o=X("circle"),l=X("line"),r=X("line"),s=a(),i=u("div"),i.textContent="New Albumâ€¦",f(n,"width","256"),f(n,"height","256"),f(n,"fill","none"),f(o,"cx","128"),f(o,"cy","128"),f(o,"r","96"),f(o,"fill","none"),f(o,"stroke","currentColor"),f(o,"stroke-linecap","round"),f(o,"stroke-linejoin","round"),f(o,"stroke-width","24"),f(l,"x1","88"),f(l,"y1","128"),f(l,"x2","168"),f(l,"y2","128"),f(l,"fill","none"),f(l,"stroke","currentColor"),f(l,"stroke-linecap","round"),f(l,"stroke-linejoin","round"),f(l,"stroke-width","24"),f(r,"x1","128"),f(r,"y1","88"),f(r,"x2","128"),f(r,"y2","168"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(r,"stroke-width","24"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 256 256"),f(t,"class","svelte-1lmumdt"),f(i,"class","label svelte-1lmumdt")},m(e,c){p(e,t,c),x(t,n),x(t,o),x(t,l),x(t,r),p(e,s,c),p(e,i,c)},d(e){e&&g(t),e&&g(s),e&&g(i)}}}function _(e){let t,n;return t=new d({props:{$$slots:{default:[E]},$$scope:{ctx:e}}}),t.$on("click",(function(...t){return e[15](e[20],...t)})),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p(n,o){e=n;const l={};8388616&o&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function E(e){let t,n,o,l,r,s,i,c,d,m,h=e[20].title+"";return{c(){t=u("div"),n=X("svg"),o=X("rect"),l=X("rect"),r=X("path"),s=X("circle"),i=a(),c=u("div"),d=w(h),m=a(),f(o,"width","256"),f(o,"height","256"),f(o,"fill","none"),f(l,"x","32"),f(l,"y","48"),f(l,"width","192"),f(l,"height","160"),f(l,"rx","8"),f(l,"stroke-width","24"),f(l,"stroke","currentColor"),f(l,"stroke-linecap","round"),f(l,"stroke-linejoin","round"),f(l,"fill","none"),f(r,"d","M32,167.99982l50.343-50.343a8,8,0,0,1,11.31371,0l44.68629,44.6863a8,8,0,0,0,11.31371,0l20.68629-20.6863a8,8,0,0,1,11.31371,0L223.99982,184"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(r,"stroke-width","24"),f(s,"cx","156"),f(s,"cy","100"),f(s,"r","16"),f(n,"xmlns","http://www.w3.org/2000/svg"),f(n,"fill","currentColor"),f(n,"viewBox","0 0 256 256"),f(n,"class","svelte-1lmumdt"),f(c,"class","label svelte-1lmumdt"),f(t,"class","album menuItem svelte-1lmumdt")},m(e,u){p(e,t,u),x(t,n),x(n,o),x(n,l),x(n,r),x(n,s),x(t,i),x(t,c),x(c,d),p(e,m,u)},p(e,t){8&t&&h!==(h=e[20].title+"")&&y(d,h)},d(e){e&&g(t),e&&g(m)}}}function F(e){let t,n,o=e[20].id!=e[7].id&&_(e);return{c(){o&&o.c(),t=m()},m(e,l){o&&o.m(e,l),p(e,t,l),n=!0},p(e,n){e[20].id!=e[7].id?o?(o.p(e,n),136&n&&s(o,1)):(o=_(e),o.c(),s(o,1),o.m(t.parentNode,t)):o&&($(),i(o,1,1,(()=>{o=null})),v())},i(e){n||(s(o),n=!0)},o(e){i(o),n=!1},d(e){o&&o.d(e),e&&g(t)}}}function G(e){let t;return{c(){t=u("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256" class="svelte-1lmumdt"><rect width="256" height="256" fill="none"></rect><line x1="215.99609" y1="60" x2="39.99609" y2="60.00005" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="104" y1="104" x2="104" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="152" y1="104" x2="152" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><path d="M199.99609,60.00005V208a8,8,0,0,1-8,8h-128a8,8,0,0,1-8-8v-148" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></path><path d="M168,60V36a16,16,0,0,0-16-16H104A16,16,0,0,0,88,36V60" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></path></svg> \n            <div class="label svelte-1lmumdt">Delete</div>',f(t,"class","delete menuItem svelte-1lmumdt")},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function K(e){let t,n,r,m,k,C,j,b,I,B,H,M,A,X,Y,P,V,W,S=e[6].length+"",U=1==e[6].length?"":"s",_=e[5]&&L(e),E=1==e[6].length&&N(e);H=new d({props:{$$slots:{default:[z]},$$scope:{ctx:e}}}),H.$on("click",e[13]);let F=e[4]&&T(e);return X=new d({props:{$$slots:{default:[G]},$$scope:{ctx:e}}}),X.$on("click",e[16]),{c(){t=a(),_&&_.c(),n=a(),r=u("div"),m=u("div"),k=w(S),C=w(" photo"),j=w(U),b=w(" selected"),I=a(),E&&E.c(),B=a(),o(H.$$.fragment),M=a(),F&&F.c(),A=a(),o(X.$$.fragment),f(m,"class","header menuItem svelte-1lmumdt"),f(r,"class","contextMenu svelte-1lmumdt"),f(r,"style",Y=`left: ${e[0]}px; top: ${e[1]}px`)},m(o,s){p(o,t,s),_&&_.m(o,s),p(o,n,s),p(o,r,s),x(r,m),x(m,k),x(m,C),x(m,j),x(m,b),x(r,I),E&&E.m(r,null),x(r,B),l(H,r,null),x(r,M),F&&F.m(r,null),x(r,A),l(X,r,null),e[17](r),P=!0,V||(W=h(D.body,"click",e[9]),V=!0)},p(e,[t]){e[5]?_?(_.p(e,t),32&t&&s(_,1)):(_=L(e),_.c(),s(_,1),_.m(n.parentNode,n)):_&&($(),i(_,1,1,(()=>{_=null})),v()),(!P||64&t)&&S!==(S=e[6].length+"")&&y(k,S),(!P||64&t)&&U!==(U=1==e[6].length?"":"s")&&y(j,U),1==e[6].length?E?(E.p(e,t),64&t&&s(E,1)):(E=N(e),E.c(),s(E,1),E.m(r,B)):E&&($(),i(E,1,1,(()=>{E=null})),v());const o={};8388624&t&&(o.$$scope={dirty:t,ctx:e}),H.$set(o),e[4]?F?(F.p(e,t),16&t&&s(F,1)):(F=T(e),F.c(),s(F,1),F.m(r,A)):F&&($(),i(F,1,1,(()=>{F=null})),v());const l={};8388608&t&&(l.$$scope={dirty:t,ctx:e}),X.$set(l),(!P||3&t&&Y!==(Y=`left: ${e[0]}px; top: ${e[1]}px`))&&f(r,"style",Y)},i(e){P||(s(_),s(E),s(H.$$.fragment,e),s(F),s(X.$$.fragment,e),P=!0)},o(e){i(_),i(E),i(H.$$.fragment,e),i(F),i(X.$$.fragment,e),P=!1},d(o){o&&g(t),_&&_.d(o),o&&g(n),o&&g(r),E&&E.d(),c(H),F&&F.d(),c(X),e[17](null),V=!1,W()}}}function R(e,t,n){let o,l;C(e,j,(e=>n(6,o=e))),C(e,b,(e=>n(7,l=e)));var r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(l,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((o=o.apply(e,t||[])).next())}))};const s=I();let{posX:i}=t,{posY:c}=t,d=null,u=[],a=!1,m=!1;B((()=>{!function(){r(this,void 0,void 0,(function*(){const e=yield H("/album/list",{authorize:!0});e.success?n(3,u=e.data):console.error(e)}))}(),d.clientWidth+i>document.body.clientWidth&&n(0,i-=d.clientWidth),d.clientHeight+c>document.body.clientHeight&&n(1,c-=d.clientHeight)}));return e.$$set=e=>{"posX"in e&&n(0,i=e.posX),"posY"in e&&n(1,c=e.posY)},[i,c,d,u,a,m,o,l,s,function(e){m||(e.clientX<i||e.clientX>i+d.clientWidth||e.clientY<c||e.clientY>c+d.clientHeight)&&s("dismissed")},()=>n(5,m=!1),e=>s("move",{targetAlbumID:e.detail.newAlbumID}),()=>s("coverPhotoClicked",{}),()=>n(4,a=!a),()=>n(5,m=!0),(e,t)=>s("move",{targetAlbumID:e.id}),()=>s("delete",{}),function(e){Y[e?"unshift":"push"]((()=>{d=e,n(2,d)}))}]}export default class extends e{constructor(e){super(),t(this,e,R,K,n,{posX:0,posY:1})}}
