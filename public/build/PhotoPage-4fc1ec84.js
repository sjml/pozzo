import{S as t,i as e,s as n,z as s,A as l,b as o,v as a,h as r,j as i,a9 as c,y as p,a1 as u,e as d,g as f,a as g,f as m,t as h,k as v,aa as w,o as $,n as k,p as y,ab as z,ac as L,u as x,J as b,c as C,F as I,m as M,K as j,ad as S,d as N,Q as q,G as O,I as T,L as F,ae as _}from"./main-582bc884.js";function P(t){let e,n;return{c(){e=s("video"),l(e,"class","main svelte-18nqc1q"),e.src!==(n=t[0])&&l(e,"src",n),e.controls=!0,l(e,"poster",t[1])},m(t,n){o(t,e,n)},p(t,[s]){1&s&&e.src!==(n=t[0])&&l(e,"src",n),2&s&&l(e,"poster",t[1])},i:a,o:a,d(t){t&&r(e)}}}function A(t,e,n){let s,l,o;return i(t,c,(t=>n(2,s=t))),p((()=>{n(1,o=u("large",s.hash,s.uniq));const t=s.originalFilename.split(".").pop();n(0,l=u("orig",s.hash,s.uniq,t))})),[l,o]}class D extends t{constructor(t){super(),e(this,t,A,P,n,{})}}function G(t,e,n){const s=t.slice();return s[7]=e[n],s}function V(t){let e,n,a,i,c,p;const u=[J,H],v=[];function w(t,e){return t[0].isVideo?1:0}n=w(t),a=v[n]=u[n](t);let $=t[1]&&K(t);return{c(){e=s("div"),a.c(),i=x(),$&&$.c(),c=d(),l(e,"class","fullPhoto svelte-12wz3c2")},m(t,s){o(t,e,s),v[n].m(e,null),o(t,i,s),$&&$.m(t,s),o(t,c,s),p=!0},p(t,s){let l=n;n=w(t),n===l?v[n].p(t,s):(f(),g(v[l],1,1,(()=>{v[l]=null})),m(),a=v[n],a?a.p(t,s):(a=v[n]=u[n](t),a.c()),h(a,1),a.m(e,null)),t[1]?$?($.p(t,s),2&s&&h($,1)):($=K(t),$.c(),h($,1),$.m(c.parentNode,c)):$&&(f(),g($,1,1,(()=>{$=null})),m())},i(t){p||(h(a),h($),p=!0)},o(t){g(a),g($),p=!1},d(t){t&&r(e),v[n].d(),t&&r(i),$&&$.d(t),t&&r(c)}}}function B(t){let e;return{c(){e=b("Loading…")},m(t,n){o(t,e,n)},p:a,i:a,o:a,d(t){t&&r(e)}}}function H(t){let e,n;return e=new D({}),{c(){C(e.$$.fragment)},m(t,s){M(e,t,s),n=!0},p:a,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function J(t){let e,n;return e=new _({props:{photo:t[0],lazy:!1,size:X,objectFit:"contain"}}),{c(){C(e.$$.fragment)},m(t,s){M(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.photo=t[0]),e.$set(s)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function K(t){let e,n,a,i,c,p,u,d,v,w,$,k,y,z,L,T,F,_,P,A,D,V,B,H,J,K,E,W,X,Y,Z,tt,et,nt,st,lt,ot=t[0].title+"",at=t[0].width+"",rt=t[0].height+"",it=S(t[0].size)+"",ct=t[0].uploadTimeStamp+"",pt=(t[0].tags.length>0?t[0].tags.join(", "):"(None)")+"";J=new O({props:{margin:"0 10px 0 0",$$slots:{default:[Q]},$$scope:{ctx:t}}});let ut=t[0].gpsLat&&t[0].gpsLon&&U(t),dt=t[2],ft=[];for(let e=0;e<dt.length;e+=1)ft[e]=R(G(t,dt,e));return{c(){e=s("div"),n=s("div"),a=s("span"),a.textContent="Title:",i=x(),c=b(ot),p=x(),u=s("table"),d=s("tr"),v=s("td"),v.textContent="Original: ",w=s("td"),$=b(at),k=b("×"),y=b(rt),z=b(" ("),L=b(it),T=b(")"),F=x(),_=s("tr"),P=s("td"),P.textContent="Uploaded: ",A=s("td"),D=b(ct),V=x(),B=s("div"),H=s("a"),C(J.$$.fragment),E=x(),ut&&ut.c(),W=x(),X=s("table"),Y=s("tr"),Z=s("td"),Z.textContent="Tags",tt=x(),et=s("td"),nt=b(pt),st=x();for(let t=0;t<ft.length;t+=1)ft[t].c();l(a,"class","label svelte-12wz3c2"),l(n,"class","title svelte-12wz3c2"),l(v,"class","label svelte-12wz3c2"),l(P,"class","label svelte-12wz3c2"),l(u,"class","photoMeta svelte-12wz3c2"),l(H,"href",K="/api/photo/orig/"+t[0].id),l(H,"class","svelte-12wz3c2"),l(B,"class","dlOrig svelte-12wz3c2"),l(Z,"class","label svelte-12wz3c2"),l(et,"class","value"),l(X,"class","photoMeta svelte-12wz3c2"),l(e,"class","metadata svelte-12wz3c2")},m(t,s){o(t,e,s),I(e,n),I(n,a),I(n,i),I(n,c),I(e,p),I(e,u),I(u,d),I(d,v),I(d,w),I(w,$),I(w,k),I(w,y),I(w,z),I(w,L),I(w,T),I(u,F),I(u,_),I(_,P),I(_,A),I(A,D),I(e,V),I(e,B),I(B,H),M(J,H,null),I(e,E),ut&&ut.m(e,null),I(e,W),I(e,X),I(X,Y),I(Y,Z),I(Y,tt),I(Y,et),I(et,nt),I(X,st);for(let t=0;t<ft.length;t+=1)ft[t].m(X,null);lt=!0},p(t,n){(!lt||1&n)&&ot!==(ot=t[0].title+"")&&j(c,ot),(!lt||1&n)&&at!==(at=t[0].width+"")&&j($,at),(!lt||1&n)&&rt!==(rt=t[0].height+"")&&j(y,rt),(!lt||1&n)&&it!==(it=S(t[0].size)+"")&&j(L,it),(!lt||1&n)&&ct!==(ct=t[0].uploadTimeStamp+"")&&j(D,ct);const s={};if(1024&n&&(s.$$scope={dirty:n,ctx:t}),J.$set(s),(!lt||1&n&&K!==(K="/api/photo/orig/"+t[0].id))&&l(H,"href",K),t[0].gpsLat&&t[0].gpsLon?ut?(ut.p(t,n),1&n&&h(ut,1)):(ut=U(t),ut.c(),h(ut,1),ut.m(e,W)):ut&&(f(),g(ut,1,1,(()=>{ut=null})),m()),(!lt||1&n)&&pt!==(pt=(t[0].tags.length>0?t[0].tags.join(", "):"(None)")+"")&&j(nt,pt),5&n){let e;for(dt=t[2],e=0;e<dt.length;e+=1){const s=G(t,dt,e);ft[e]?ft[e].p(s,n):(ft[e]=R(s),ft[e].c(),ft[e].m(X,null))}for(;e<ft.length;e+=1)ft[e].d(1);ft.length=dt.length}},i(t){lt||(h(J.$$.fragment,t),h(ut),lt=!0)},o(t){g(J.$$.fragment,t),g(ut),lt=!1},d(t){t&&r(e),N(J),ut&&ut.d(),q(ft,t)}}}function Q(t){let e,n,a,i,c,p,u;return{c(){e=T("svg"),n=T("rect"),a=T("polyline"),i=T("line"),c=T("path"),p=x(),u=s("div"),u.textContent="Download Original",l(n,"width","256"),l(n,"height","256"),l(n,"fill","none"),l(a,"points","86 110 128 152 170 110"),l(a,"fill","none"),l(a,"stroke","currentColor"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"stroke-width","24"),l(i,"x1","128"),l(i,"y1","39.97056"),l(i,"x2","128"),l(i,"y2","151.97056"),l(i,"fill","none"),l(i,"stroke","currentColor"),l(i,"stroke-linecap","round"),l(i,"stroke-linejoin","round"),l(i,"stroke-width","24"),l(c,"d","M224,136v72a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V136"),l(c,"fill","none"),l(c,"stroke","currentColor"),l(c,"stroke-linecap","round"),l(c,"stroke-linejoin","round"),l(c,"stroke-width","24"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"fill","currentColor"),l(e,"viewBox","0 0 256 256"),l(e,"class","svelte-12wz3c2")},m(t,s){o(t,e,s),I(e,n),I(e,a),I(e,i),I(e,c),o(t,p,s),o(t,u,s)},d(t){t&&r(e),t&&r(p),t&&r(u)}}}function U(t){let e,n,a,i,c,p,u,d,f,m,v,w,$,k,y,z;return n=new F({props:{loader:"PhotoMap",photos:[t[0]],exploreIconOnly:!0,popups:!1}}),{c(){e=s("div"),C(n.$$.fragment),a=x(),i=s("div"),c=b("{"),p=x(),u=s("a"),d=b("OpenStreetMap"),m=b("\n                    | "),v=s("a"),w=b("Google Maps"),k=x(),y=b("}"),l(e,"class","photoMap svelte-12wz3c2"),l(u,"target","_"),l(u,"href",f="https://www.openstreetmap.org/?mlat="+t[0].gpsLat+"&mlon="+t[0].gpsLon+"#map=18/"+t[0].gpsLat+"/"+t[0].gpsLon),l(u,"class","svelte-12wz3c2"),l(v,"target","_"),l(v,"href",$="https://www.google.com/maps/search/?api=1&query="+t[0].gpsLat+","+t[0].gpsLon),l(v,"class","svelte-12wz3c2"),l(i,"class","mapLinks svelte-12wz3c2")},m(t,s){o(t,e,s),M(n,e,null),o(t,a,s),o(t,i,s),I(i,c),I(i,p),I(i,u),I(u,d),I(i,m),I(i,v),I(v,w),I(i,k),I(i,y),z=!0},p(t,e){const s={};1&e&&(s.photos=[t[0]]),n.$set(s),(!z||1&e&&f!==(f="https://www.openstreetmap.org/?mlat="+t[0].gpsLat+"&mlon="+t[0].gpsLon+"#map=18/"+t[0].gpsLat+"/"+t[0].gpsLon))&&l(u,"href",f),(!z||1&e&&$!==($="https://www.google.com/maps/search/?api=1&query="+t[0].gpsLat+","+t[0].gpsLon))&&l(v,"href",$)},i(t){z||(h(n.$$.fragment,t),z=!0)},o(t){g(n.$$.fragment,t),z=!1},d(t){t&&r(e),N(n),t&&r(a),t&&r(i)}}}function E(t){let e,n,a,i,c,p,u,d=t[7].value+"",f=(null==t[7].filter?t[0][t[7].key]:t[7].filter(t[0][t[7].key]))+"";return{c(){e=s("tr"),n=s("td"),a=b(d),i=x(),c=s("td"),p=b(f),u=x(),l(n,"class","label svelte-12wz3c2"),l(c,"class","value")},m(t,s){o(t,e,s),I(e,n),I(n,a),I(e,i),I(e,c),I(c,p),I(e,u)},p(t,e){1&e&&f!==(f=(null==t[7].filter?t[0][t[7].key]:t[7].filter(t[0][t[7].key]))+"")&&j(p,f)},d(t){t&&r(e)}}}function R(t){let e,n=null!=t[0][t[7].key]&&E(t);return{c(){n&&n.c(),e=d()},m(t,s){n&&n.m(t,s),o(t,e,s)},p(t,s){null!=t[0][t[7].key]?n?n.p(t,s):(n=E(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&r(e)}}}function W(t){let e,n,s,l;const a=[B,V],i=[];function c(t,e){return t[0]?1:0}return e=c(t),n=i[e]=a[e](t),{c(){n.c(),s=d()},m(t,n){i[e].m(t,n),o(t,s,n),l=!0},p(t,[l]){let o=e;e=c(t),e===o?i[e].p(t,l):(f(),g(i[o],1,1,(()=>{i[o]=null})),m(),n=i[e],n?n.p(t,l):(n=i[e]=a[e](t),n.c()),h(n,1),n.m(s.parentNode,s))},i(t){l||(h(n),l=!0)},o(t){g(n),l=!1},d(t){i[e].d(t),t&&r(s)}}}const X="large";function Y(t,e,n){let s,l,o;i(t,c,(t=>n(0,s=t))),i(t,v,(t=>n(4,l=t))),i(t,w,(t=>n(1,o=t)));var a=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(l,o){function a(t){try{i(s.next(t))}catch(t){o(t)}}function r(t){try{i(s.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?l(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}i((s=s.apply(t,e||[])).next())}))};const r=[{key:"creationDate",value:"Taken",filter:z},{key:"mime",value:"Format"},{key:"make",value:"Camera Make"},{key:"model",value:"Camera Model"},{key:"lens",value:"Lens"},{key:"aperture",value:"Aperture",filter:t=>`f/${t}`},{key:"iso",value:"ISO"},{key:"shutterSpeed",value:"Shutter Speed",filter:L}];let{photoIdentifier:p}=e;return $((()=>{k(c,s=null,s)})),t.$$set=t=>{"photoIdentifier"in t&&n(3,p=t.photoIdentifier)},t.$$.update=()=>{8&t.$$.dirty&&function(t){a(this,void 0,void 0,(function*(){const e=parseInt(t);if(isNaN(e))return void y(`/album/${l.slug}`);const n=l.photos.findIndex((t=>t.id==e));-1!=n?k(c,s=l.photos[n],s):y(`/album/${l.slug}`)}))}(p)},[s,o,r,p]}export default class extends t{constructor(t){super(),e(this,t,Y,W,n,{photoIdentifier:3})}}
