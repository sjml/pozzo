var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),h=a?t=>requestAnimationFrame(t):t;const l=new Set;function u(t){l.forEach((e=>{e.c(t)||(l.delete(e),e.f())})),0!==l.size&&h(u)}function d(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function w(){return m(" ")}function y(){return m("")}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}const _=new Set;let b,v=0;function R(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-i.length;o&&(t.style.animation=i.join(", "),v-=o,v||h((()=>{v||(_.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),_.clear())})))}function k(t){b=t}function H(){if(!b)throw new Error("Function called outside component initialization");return b}const C=[],P=[],j=[],N=[],S=Promise.resolve();let E=!1;function L(t){j.push(t)}let I=!1;const z=new Set;function O(){if(!I){I=!0;do{for(let t=0;t<C.length;t+=1){const e=C[t];k(e),M(e.$$)}for(k(null),C.length=0;P.length;)P.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];z.has(e)||(z.add(e),e())}j.length=0}while(C.length);for(;N.length;)N.pop()();E=!1,I=!1,z.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}let A;function T(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const B=new Set;let F;function W(){F={r:0,c:[],p:F}}function q(){F.r||o(F.c),F=F.p}function J(t,e){t&&t.i&&(B.delete(t),t.i(e))}function D(t,e,n,i){if(t&&t.o){if(B.has(t))return;B.add(t),F.c.push((()=>{B.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const G={duration:0};function V(n,i,r){let a,d=i(n,r),g=!0;const f=F;function m(){const{delay:i=0,duration:s=300,easing:r=e,tick:m=t,css:w}=d||G;w&&(a=function(t,e,n,i,o,s,r,a=0){const c=16.666/i;let h="{\n";for(let t=0;t<=1;t+=c){const i=e+(n-e)*s(t);h+=100*t+`%{${r(i,1-i)}}\n`}const l=h+`100% {${r(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${a}`,d=t.ownerDocument;_.add(d);const g=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(p("style")).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[u]||(f[u]=!0,g.insertRule(`@keyframes ${u} ${l}`,g.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${u} ${i}ms linear ${o}ms 1 both`,v+=1,u}(n,1,0,s,i,r,w));const y=c()+i,$=y+s;L((()=>T(n,!1,"start"))),function(t){let e;0===l.size&&h(u),new Promise((n=>{l.add(e={c:t,f:n})}))}((t=>{if(g){if(t>=$)return m(0,1),T(n,!1,"end"),--f.r||o(f.c),!1;if(t>=y){const e=r((t-y)/s);m(1-e,e)}}return g}))}return f.r+=1,s(d)?(A||(A=Promise.resolve(),A.then((()=>{A=null}))),A).then((()=>{d=d(),m()})):m(),{end(t){t&&d.tick&&d.tick(1,0),g&&(a&&R(n,a),g=!1)}}}function Y(t,e){const n=e.token={};function i(t,i,o,s){if(e.token!==n)return;e.resolved=s;let r=e.ctx;void 0!==o&&(r=r.slice(),r[o]=s);const a=t&&(e.current=t)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==i&&t&&(W(),D(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),q())})):e.block.d(1),a.c(),J(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[i]=a),c&&O()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=H();if(t.then((t=>{k(n),i(e.then,1,e.value,t),k(null)}),(t=>{if(k(n),i(e.catch,2,e.error,t),k(null),!e.hasCatch)throw t})),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}var o}function K(t){t&&t.c()}function Q(t,e,i){const{fragment:r,on_mount:a,on_destroy:c,after_update:h}=t.$$;r&&r.m(e,i),L((()=>{const e=a.map(n).filter(s);c?c.push(...e):o(e),t.$$.on_mount=[]})),h.forEach(L)}function U(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(C.push(t),E||(E=!0,S.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(e,n,s,r,a,c,h=[-1]){const l=b;k(e);const u=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:h,skip_bound:!1};let d=!1;if(u.ctx=s?s(e,n.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return u.ctx&&a(u.ctx[t],u.ctx[t]=o)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](o),d&&X(e,t)),n})):[],u.update(),d=!0,o(u.before_update),u.fragment=!!r&&r(u.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);u.fragment&&u.fragment.l(t),t.forEach(f)}else u.fragment&&u.fragment.c();n.intro&&J(e.$$.fragment),Q(e,n.target,n.anchor),O()}k(l)}class tt{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */
var et,nt=(function(t){(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,n,i,o=this.items.concat(t),s=this.width-(o.length-1)*this.spacing,r=o.reduce((function(t,e){return t+e.aspectRatio}),0),a=s/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(s/t.aspectRatio,"justify"),!0):r<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):r>this.maxAspectRatio?0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,n=this.items.reduce((function(t,e){return t+e.aspectRatio}),0),i=e/this.targetRowHeight,Math.abs(r-a)>Math.abs(n-i)?(this.completeLayout(e/n,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,e){var n,i,o,s,r,a=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===e||["justify","center","left"].indexOf(e)<0)&&(e="left"),t!==(i=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)))?(this.height=i,n=c/i/(c/t)):(this.height=t,n=1),this.items.forEach((function(t){t.top=this.top,t.width=t.aspectRatio*this.height*n,t.height=this.height,t.left=a,a+=t.width+this.spacing}),this),"justify"===e?(a-=this.spacing+this.left,o=(a-this.width)/this.items.length,s=this.items.map((function(t,e){return Math.round((e+1)*o)})),1===this.items.length?this.items[0].width-=Math.round(o):this.items.forEach((function(t,e){e>0?(t.left-=s[e-1],t.width-=s[e]-s[e-1]):t.width-=s[e]}))):"center"===e&&(r=(this.width-a)/2,this.items.forEach((function(t){t.left+=r+this.spacing}),this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}}(et={exports:{}},et.exports),et.exports);
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */function it(t,e){var n;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(n=!0),new nt({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:n,widowLayoutStyle:t.widowLayoutStyle})}function ot(t,e,n){return e._rows.push(n),e._layoutItems=e._layoutItems.concat(n.getItems()),e._containerHeight+=n.height+t.boxSpacing.vertical,n.items}var st=function(t,e){var n={},i={},o={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},s={},r={};return e=e||{},n=Object.assign(o,e),s.top=isNaN(parseFloat(n.containerPadding.top))?n.containerPadding:n.containerPadding.top,s.right=isNaN(parseFloat(n.containerPadding.right))?n.containerPadding:n.containerPadding.right,s.bottom=isNaN(parseFloat(n.containerPadding.bottom))?n.containerPadding:n.containerPadding.bottom,s.left=isNaN(parseFloat(n.containerPadding.left))?n.containerPadding:n.containerPadding.left,r.horizontal=isNaN(parseFloat(n.boxSpacing.horizontal))?n.boxSpacing:n.boxSpacing.horizontal,r.vertical=isNaN(parseFloat(n.boxSpacing.vertical))?n.boxSpacing:n.boxSpacing.vertical,n.containerPadding=s,n.boxSpacing=r,i._layoutItems=[],i._awakeItems=[],i._inViewportItems=[],i._leadingOrphans=[],i._trailingOrphans=[],i._containerHeight=n.containerPadding.top,i._rows=[],i._orphans=[],n._widowCount=0,function(t,e,n){var i,o,s,r=[];return t.forceAspectRatio&&n.forEach((function(e){e.forcedAspectRatio=!0,e.aspectRatio=t.forceAspectRatio})),n.some((function(n,s){if(isNaN(n.aspectRatio))throw new Error("Item "+s+" has an invalid aspect ratio");if(o||(o=it(t,e)),i=o.addItem(n),o.isLayoutComplete()){if(r=r.concat(ot(t,e,o)),e._rows.length>=t.maxNumRows)return o=null,!0;if(o=it(t,e),!i&&(i=o.addItem(n),o.isLayoutComplete())){if(r=r.concat(ot(t,e,o)),e._rows.length>=t.maxNumRows)return o=null,!0;o=it(t,e)}}})),o&&o.getItems().length&&t.showWidows&&(e._rows.length?(s=e._rows[e._rows.length-1].isBreakoutRow?e._rows[e._rows.length-1].targetRowHeight:e._rows[e._rows.length-1].height,o.forceComplete(!1,s)):o.forceComplete(!1),r=r.concat(ot(t,e,o)),t._widowCount=o.getItems().length),e._containerHeight=e._containerHeight-t.boxSpacing.vertical,e._containerHeight=e._containerHeight+t.containerPadding.bottom,{containerHeight:e._containerHeight,widowCount:t._widowCount,boxes:e._layoutItems}}(n,i,t.map((function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}})))};function rt(t,{delay:n=0,duration:i=400,easing:o=e}={}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:i,easing:o,css:t=>"opacity: "+t*s}}function at(t){let e,n,i,o,s,r,a,c,h,l,u,m,y=!t[3]&&ct(t);return{c(){e=p("div"),y&&y.c(),n=w(),i=p("img"),$(i,"alt",o=t[0].title),$(i,"srcset",s=`/img/${t[1]}/${t[0].hash}.jpg, /img/${t[1]}2x/${t[0].hash}.jpg 2x`),i.src!==(r=`/img/${t[1]}/${t[0].hash}.jpg`)&&$(i,"src",r),$(i,"width",a=t[2].width+"px"),$(i,"height",c=t[2].height+"px"),$(i,"class","svelte-2zxlky"),$(e,"class","albumPhoto svelte-2zxlky"),$(e,"style",h=`width: ${t[2].width}px; height: ${t[2].height}px; top: ${t[2].top}px; left: ${t[2].left}px;`)},m(o,s){var r,a,c,h;g(o,e,s),y&&y.m(e,null),d(e,n),d(e,i),l=!0,u||(r=i,a="load",c=t[4],r.addEventListener(a,c,h),m=()=>r.removeEventListener(a,c,h),u=!0)},p(t,u){t[3]?y&&(W(),D(y,1,1,(()=>{y=null})),q()):y?(y.p(t,u),8&u&&J(y,1)):(y=ct(t),y.c(),J(y,1),y.m(e,n)),(!l||1&u&&o!==(o=t[0].title))&&$(i,"alt",o),(!l||3&u&&s!==(s=`/img/${t[1]}/${t[0].hash}.jpg, /img/${t[1]}2x/${t[0].hash}.jpg 2x`))&&$(i,"srcset",s),(!l||3&u&&i.src!==(r=`/img/${t[1]}/${t[0].hash}.jpg`))&&$(i,"src",r),(!l||4&u&&a!==(a=t[2].width+"px"))&&$(i,"width",a),(!l||4&u&&c!==(c=t[2].height+"px"))&&$(i,"height",c),(!l||4&u&&h!==(h=`width: ${t[2].width}px; height: ${t[2].height}px; top: ${t[2].top}px; left: ${t[2].left}px;`))&&$(e,"style",h)},i(t){l||(J(y),l=!0)},o(t){D(y),l=!1},d(t){t&&f(e),y&&y.d(),u=!1,m()}}}function ct(t){let e,n,i,o,s,r,a;return{c(){e=p("img"),$(e,"class","preload svelte-2zxlky"),$(e,"alt",n=t[0].title),e.src!==(i="data:image/jpeg;base64,"+t[0].tinyJPEG)&&$(e,"src",i),$(e,"width",o=t[2].width+"px"),$(e,"height",s=t[2].height+"px")},m(t,n){g(t,e,n),a=!0},p(t,r){(!a||1&r&&n!==(n=t[0].title))&&$(e,"alt",n),(!a||1&r&&e.src!==(i="data:image/jpeg;base64,"+t[0].tinyJPEG))&&$(e,"src",i),(!a||4&r&&o!==(o=t[2].width+"px"))&&$(e,"width",o),(!a||4&r&&s!==(s=t[2].height+"px"))&&$(e,"height",s)},i(t){a||(r&&r.end(1),a=!0)},o(t){r=V(e,rt,{duration:200}),a=!1},d(t){t&&f(e),t&&r&&r.end()}}}function ht(t){let e,n,i=t[0]&&t[2]&&at(t);return{c(){i&&i.c(),e=y()},m(t,o){i&&i.m(t,o),g(t,e,o),n=!0},p(t,[n]){t[0]&&t[2]?i?(i.p(t,n),5&n&&J(i,1)):(i=at(t),i.c(),J(i,1),i.m(e.parentNode,e)):i&&(W(),D(i,1,1,(()=>{i=null})),q())},i(t){n||(J(i),n=!0)},o(t){D(i),n=!1},d(t){i&&i.d(t),t&&f(e)}}}function lt(t,e,n){let{photo:i}=e,{size:o="medium"}=e,{dims:s}=e,r=!1;return t.$$set=t=>{"photo"in t&&n(0,i=t.photo),"size"in t&&n(1,o=t.size),"dims"in t&&n(2,s=t.dims)},[i,o,s,r,function(){n(3,r=!0)}]}class ut extends tt{constructor(t){super(),Z(this,t,lt,ht,r,{photo:0,size:1,dims:2})}}function dt(t,e,n){const i=t.slice();return i[5]=e[n],i[7]=n,i}function gt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function ft(t){let e,n,i,o,s,r=t[4].title+"",a=t[4].photos,c=[];for(let e=0;e<a.length;e+=1)c[e]=pt(dt(t,a,e));const h=t=>D(c[t],1,1,(()=>{c[t]=null}));return{c(){e=p("h2"),n=m(r),i=w(),o=p("div");for(let t=0;t<c.length;t+=1)c[t].c();$(e,"class","svelte-tq026l"),$(o,"class","albumPhotos svelte-tq026l"),x(o,"height",t[0].containerHeight+"px"),x(o,"width","1200px")},m(t,r){g(t,e,r),d(e,n),g(t,i,r),g(t,o,r);for(let t=0;t<c.length;t+=1)c[t].m(o,null);s=!0},p(t,e){if((!s||2&e)&&r!==(r=t[4].title+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,r),3&e){let n;for(a=t[4].photos,n=0;n<a.length;n+=1){const i=dt(t,a,n);c[n]?(c[n].p(i,e),J(c[n],1)):(c[n]=pt(i),c[n].c(),J(c[n],1),c[n].m(o,null))}for(W(),n=a.length;n<c.length;n+=1)h(n);q()}(!s||1&e)&&x(o,"height",t[0].containerHeight+"px")},i(t){if(!s){for(let t=0;t<a.length;t+=1)J(c[t]);s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)D(c[t]);s=!1},d(t){t&&f(e),t&&f(i),t&&f(o),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(c,t)}}}function pt(t){let e,n;return e=new ut({props:{photo:t[5],size:"medium",dims:t[0].boxes[t[7]]}}),{c(){K(e.$$.fragment)},m(t,i){Q(e,t,i),n=!0},p(t,n){const i={};2&n&&(i.photo=t[5]),1&n&&(i.dims=t[0].boxes[t[7]]),e.$set(i)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function wt(t){let e,n,i,o={ctx:t,current:null,token:null,hasCatch:!1,pending:mt,then:ft,catch:gt,value:4,blocks:[,,,]};return Y(n=t[1],o),{c(){e=y(),o.block.c()},m(t,n){g(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,i=!0},p(e,[i]){if(t=e,o.ctx=t,2&i&&n!==(n=t[1])&&Y(n,o));else{const e=t.slice();e[4]=o.resolved,o.block.p(e,i)}},i(t){i||(J(o.block),i=!0)},o(t){for(let t=0;t<3;t+=1){D(o.blocks[t])}i=!1},d(t){t&&f(e),o.block.d(t),o.token=null,o=null}}}function yt(t,e,n){let i;var o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};let s=null;return n(1,i=function(){return o(this,void 0,void 0,(function*(){const t=yield fetch(`${location.origin}/api/album/view/1`,{body:JSON.stringify({previews:1}),method:"POST"});if(t.ok){const e=yield t.json(),i=e.photos.map((t=>t.aspect));return n(0,s=st(i,{containerWidth:1200})),e}{const e=yield t.json();throw new Error(e)}}))}()),[s,i]}class $t extends tt{constructor(t){super(),Z(this,t,yt,wt,r,{})}}function xt(e){let n,i,o,s,r;return s=new $t({}),{c(){n=p("main"),i=p("h1"),i.textContent="Pozzo",o=w(),K(s.$$.fragment),$(i,"class","svelte-45rfii"),$(n,"class","svelte-45rfii")},m(t,e){g(t,n,e),d(n,i),d(n,o),Q(s,n,null),r=!0},p:t,i(t){r||(J(s.$$.fragment,t),r=!0)},o(t){D(s.$$.fragment,t),r=!1},d(t){t&&f(n),U(s)}}}return new class extends tt{constructor(t){super(),Z(this,t,null,xt,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
