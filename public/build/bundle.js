var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function i(){return Object.create(null)}function s(t){t.forEach(o)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(t){let e;return c(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function d(t,e,n,o){if(t){const i=h(t,e,n,o);return t[0](i)}}function h(t,e,o,i){return t[1]&&i?n(o.ctx.slice(),t[1](i(e))):o.ctx}function f(t,e,n,o,i,s,r){const a=function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(e,o,i,s);if(a){const i=h(e,n,o,r);t.p(i,a)}}function p(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function g(t,e,n=e){return t.set(n),e}const m="undefined"!=typeof window;let $=m?()=>window.performance.now():()=>Date.now(),w=m?t=>requestAnimationFrame(t):t;const v=new Set;function y(t){v.forEach((e=>{e.c(t)||(v.delete(e),e.f())})),0!==v.size&&w(y)}function x(t){let e;return 0===v.size&&w(y),{promise:new Promise((n=>{v.add(e={c:t,f:n})})),abort(){v.delete(e)}}}function b(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode.removeChild(t)}function R(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function H(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function L(){return S(" ")}function P(){return S("")}function C(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function z(t){return function(e){return e.preventDefault(),t.call(this,e)}}function N(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}let j;function I(){if(void 0===j){j=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){j=!0}}return j}function M(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const O=new Set;let B,A=0;function U(t,e,n,o,i,s,r,a=0){const c=16.666/o;let l="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*s(t);l+=100*t+`%{${r(o,1-o)}}\n`}const u=l+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,h=t.ownerDocument;O.add(h);const f=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(H("style")).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${i}ms 1 both`,A+=1,d}function F(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),A-=i,A||w((()=>{A||(O.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),O.clear())})))}function W(t){B=t}function D(){if(!B)throw new Error("Function called outside component initialization");return B}function J(t){D().$$.on_mount.push(t)}function q(t){D().$$.on_destroy.push(t)}function G(){const t=D();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=M(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}function V(t,e){D().$$.context.set(t,e)}function Z(t){return D().$$.context.get(t)}const X=[],Y=[],K=[],Q=[],tt=Promise.resolve();let et=!1;function nt(){et||(et=!0,tt.then(at))}function ot(){return nt(),tt}function it(t){K.push(t)}let st=!1;const rt=new Set;function at(){if(!st){st=!0;do{for(let t=0;t<X.length;t+=1){const e=X[t];W(e),ct(e.$$)}for(W(null),X.length=0;Y.length;)Y.pop()();for(let t=0;t<K.length;t+=1){const e=K[t];rt.has(e)||(rt.add(e),e())}K.length=0}while(X.length);for(;Q.length;)Q.pop()();et=!1,st=!1,rt.clear()}}function ct(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}let lt;function ut(){return lt||(lt=Promise.resolve(),lt.then((()=>{lt=null}))),lt}function dt(t,e,n){t.dispatchEvent(M(`${e?"intro":"outro"}${n}`))}const ht=new Set;let ft;function pt(){ft={r:0,c:[],p:ft}}function gt(){ft.r||s(ft.c),ft=ft.p}function mt(t,e){t&&t.i&&(ht.delete(t),t.i(e))}function $t(t,e,n,o){if(t&&t.o){if(ht.has(t))return;ht.add(t),ft.c.push((()=>{ht.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const wt={duration:0};function vt(n,o,i){let a,c=o(n,i),l=!0;const u=ft;function d(){const{delay:o=0,duration:i=300,easing:r=e,tick:d=t,css:h}=c||wt;h&&(a=U(n,1,0,i,o,r,h));const f=$()+o,p=f+i;it((()=>dt(n,!1,"start"))),x((t=>{if(l){if(t>=p)return d(0,1),dt(n,!1,"end"),--u.r||s(u.c),!1;if(t>=f){const e=r((t-f)/i);d(1-e,e)}}return l}))}return u.r+=1,r(c)?ut().then((()=>{c=c(),d()})):d(),{end(t){t&&c.tick&&c.tick(1,0),l&&(a&&F(n,a),l=!1)}}}function yt(t){return"object"==typeof t&&null!==t?t:{}}function xt(t){t&&t.c()}function bt(t,e,n){const{fragment:i,on_mount:a,on_destroy:c,after_update:l}=t.$$;i&&i.m(e,n),it((()=>{const e=a.map(o).filter(r);c?c.push(...e):s(e),t.$$.on_mount=[]})),l.forEach(it)}function _t(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(e,n,o,r,a,c,l=[-1]){const u=B;W(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:l,skip_bound:!1};let h=!1;if(d.ctx=o?o(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),h&&function(t,e){-1===t.$$.dirty[0]&&(X.push(t),nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),h=!0,s(d.before_update),d.fragment=!!r&&r(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(k)}else d.fragment&&d.fragment.c();n.intro&&mt(e.$$.fragment),bt(e,n.target,n.anchor),at()}W(u)}class Rt{$destroy(){_t(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ht=[];function St(t,e){return{subscribe:Lt(t,e).subscribe}}function Lt(e,n=t){let o;const i=[];function s(t){if(a(e,t)&&(e=t,o)){const t=!Ht.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Ht.push(n,e)}if(t){for(let t=0;t<Ht.length;t+=2)Ht[t][0](Ht[t+1]);Ht.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,a=t){const c=[r,a];return i.push(c),1===i.length&&(o=n(s)||t),r(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const Pt={},Ct={};function zt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const Nt=function(t,e){const n=[];let o=zt(t);return{get location(){return o},listen(e){n.push(e);const i=()=>{o=zt(t),e({location:o,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const o=n.indexOf(e);n.splice(o,1)}},navigate(e,{state:i,replace:s=!1}={}){i={...i,key:Date.now()+""};try{s?t.history.replaceState(i,null,e):t.history.pushState(i,null,e)}catch(n){t.location[s?"replace":"assign"](e)}o=zt(t),n.forEach((t=>t({location:o,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],o=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return o[e]},pushState(t,i,s){const[r,a=""]=s.split("?");e++,n.push({pathname:r,search:a}),o.push(t)},replaceState(t,i,s){const[r,a=""]=s.split("?");n[e]={pathname:r,search:a},o[e]=t}}}}()),Tt=/^:(.+)/;function Et(t){return"*"===t[0]}function jt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function It(t){return t.replace(/(^\/+|\/+$)/g,"")}function Mt(t,e){return{route:t,score:t.default?0:jt(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return Tt.test(t)}(e)?Et(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function Ot(t,e){let n,o;const[i]=e.split("?"),s=jt(i),r=""===s[0],a=function(t){return t.map(Mt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,i=a.length;t<i;t++){const i=a[t].route;let c=!1;if(i.default){o={route:i,params:{},uri:e};continue}const l=jt(i.path),u={},d=Math.max(s.length,l.length);let h=0;for(;h<d;h++){const t=l[h],e=s[h];if(void 0!==t&&Et(t)){u["*"===t?"*":t.slice(1)]=s.slice(h).map(decodeURIComponent).join("/");break}if(void 0===e){c=!0;break}let n=Tt.exec(t);if(n&&!r){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){c=!0;break}}if(!c){n={route:i,params:u,uri:"/"+s.slice(0,h).join("/")};break}}return n||o||null}function Bt(t,e){return`${It("/"===e?t:`${It(t)}/${It(e)}`)}/`}function At(t){let e;const n=t[9].default,o=d(n,t,t[8],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,[e]){o&&o.p&&256&e&&f(o,n,t,t[8],e,null,null)},i(t){e||(mt(o,t),e=!0)},o(t){$t(o,t),e=!1},d(t){o&&o.d(t)}}}function Ut(e,n,o){let i,a,l,{$$slots:d={},$$scope:h}=n,{basepath:f="/"}=n,{url:p=null}=n;const g=Z(Pt),m=Z(Ct),$=Lt([]);u(e,$,(t=>o(7,l=t)));const w=Lt(null);let v=!1;const y=g||Lt(p?{pathname:p}:Nt.location);u(e,y,(t=>o(6,a=t)));const x=m?m.routerBase:Lt({path:f,uri:f});u(e,x,(t=>o(5,i=t)));const b=function(e,n,o){const i=!Array.isArray(e),a=i?[e]:e,l=n.length<2;return St(o,(e=>{let o=!1;const u=[];let d=0,h=t;const f=()=>{if(d)return;h();const o=n(i?u[0]:u,e);l?e(o):h=r(o)?o:t},p=a.map(((t,e)=>c(t,(t=>{u[e]=t,d&=~(1<<e),o&&f()}),(()=>{d|=1<<e}))));return o=!0,f(),function(){s(p),h()}}))}([x,w],(([t,e])=>{if(null===e)return t;const{path:n}=t,{route:o,uri:i}=e;return{path:o.default?n:o.path.replace(/\*.*$/,""),uri:i}}));return g||(J((()=>Nt.listen((t=>{y.set(t.location)})))),V(Pt,y)),V(Ct,{activeRoute:w,base:x,routerBase:b,registerRoute:function(t){const{path:e}=i;let{path:n}=t;if(t._path=n,t.path=Bt(e,n),"undefined"==typeof window){if(v)return;const e=function(t,e){return Ot([t],e)}(t,a.pathname);e&&(w.set(e),v=!0)}else $.update((e=>(e.push(t),e)))},unregisterRoute:function(t){$.update((e=>{const n=e.indexOf(t);return e.splice(n,1),e}))}}),e.$$set=t=>{"basepath"in t&&o(3,f=t.basepath),"url"in t&&o(4,p=t.url),"$$scope"in t&&o(8,h=t.$$scope)},e.$$.update=()=>{if(32&e.$$.dirty){const{path:t}=i;$.update((e=>(e.forEach((e=>e.path=Bt(t,e._path))),e)))}if(192&e.$$.dirty){const t=Ot(l,a.pathname);w.set(t)}},[$,y,x,f,p,i,a,l,h,d]}class Ft extends Rt{constructor(t){super(),kt(this,t,Ut,At,a,{basepath:3,url:4})}}const Wt=t=>({params:4&t,location:16&t}),Dt=t=>({params:t[2],location:t[4]});function Jt(t){let e,n,o,i;const s=[Gt,qt],r=[];function a(t,e){return null!==t[0]?0:1}return e=a(t),n=r[e]=s[e](t),{c(){n.c(),o=P()},m(t,n){r[e].m(t,n),_(t,o,n),i=!0},p(t,i){let c=e;e=a(t),e===c?r[e].p(t,i):(pt(),$t(r[c],1,1,(()=>{r[c]=null})),gt(),n=r[e],n?n.p(t,i):(n=r[e]=s[e](t),n.c()),mt(n,1),n.m(o.parentNode,o))},i(t){i||(mt(n),i=!0)},o(t){$t(n),i=!1},d(t){r[e].d(t),t&&k(o)}}}function qt(t){let e;const n=t[10].default,o=d(n,t,t[9],Dt);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&532&e&&f(o,n,t,t[9],e,Wt,Dt)},i(t){e||(mt(o,t),e=!0)},o(t){$t(o,t),e=!1},d(t){o&&o.d(t)}}}function Gt(t){let e,o,i;const s=[{location:t[4]},t[2],t[3]];var r=t[0];function a(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return{props:e}}return r&&(e=new r(a())),{c(){e&&xt(e.$$.fragment),o=P()},m(t,n){e&&bt(e,t,n),_(t,o,n),i=!0},p(t,n){const i=28&n?function(t,e){const n={},o={},i={$$scope:1};let s=t.length;for(;s--;){const r=t[s],a=e[s];if(a){for(const t in r)t in a||(o[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[s]=a}else for(const t in r)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(s,[16&n&&{location:t[4]},4&n&&yt(t[2]),8&n&&yt(t[3])]):{};if(r!==(r=t[0])){if(e){pt();const t=e;$t(t.$$.fragment,1,0,(()=>{_t(t,1)})),gt()}r?(e=new r(a()),xt(e.$$.fragment),mt(e.$$.fragment,1),bt(e,o.parentNode,o)):e=null}else r&&e.$set(i)},i(t){i||(e&&mt(e.$$.fragment,t),i=!0)},o(t){e&&$t(e.$$.fragment,t),i=!1},d(t){t&&k(o),e&&_t(e,t)}}}function Vt(t){let e,n,o=null!==t[1]&&t[1].route===t[7]&&Jt(t);return{c(){o&&o.c(),e=P()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){null!==t[1]&&t[1].route===t[7]?o?(o.p(t,n),2&n&&mt(o,1)):(o=Jt(t),o.c(),mt(o,1),o.m(e.parentNode,e)):o&&(pt(),$t(o,1,1,(()=>{o=null})),gt())},i(t){n||(mt(o),n=!0)},o(t){$t(o),n=!1},d(t){o&&o.d(t),t&&k(e)}}}function Zt(t,e,o){let i,s,{$$slots:r={},$$scope:a}=e,{path:c=""}=e,{component:l=null}=e;const{registerRoute:d,unregisterRoute:h,activeRoute:f}=Z(Ct);u(t,f,(t=>o(1,i=t)));const g=Z(Pt);u(t,g,(t=>o(4,s=t)));const m={path:c,default:""===c};let $={},w={};return d(m),"undefined"!=typeof window&&q((()=>{h(m)})),t.$$set=t=>{o(13,e=n(n({},e),p(t))),"path"in t&&o(8,c=t.path),"component"in t&&o(0,l=t.component),"$$scope"in t&&o(9,a=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&i&&i.route===m&&o(2,$=i.params);{const{path:t,component:n,...i}=e;o(3,w=i)}},e=p(e),[l,i,$,w,s,f,g,m,c,a,r]}class Xt extends Rt{constructor(t){super(),kt(this,t,Zt,Vt,a,{path:8,component:0})}}const Yt=Lt(localStorage.getItem("pozzoLoginJWT")||"");Yt.subscribe((t=>{localStorage.setItem("pozzoLoginJWT",t)}));const Kt=St({apiUri:`${location.origin}/api`},(t=>{})),Qt=Lt(!1);async function te(t,e){var n;const o={};e=null!=e?e:{},o.method=null!==(n=e.method)&&void 0!==n?n:"GET",e.params&&(o.body=JSON.stringify(e.params)),e.authorize&&(o.headers={Authorization:`Bearer ${l(Yt)}`});const i=await fetch(`${l(Kt).apiUri}${t}`,o);try{if(i.ok){const t=await i.json();return{success:!0,code:i.status,data:t}}{const t=await i.json();return{success:!1,code:i.status,data:t}}}catch(t){return{success:!1,code:500,data:{error:t}}}}function ee(e){let n,o,i;return{c(){n=H("div"),n.textContent="Logout",N(n,"class","link svelte-9x648l")},m(t,s){_(t,n,s),o||(i=C(n,"click",e[8]),o=!0)},p:t,d(t){t&&k(n),o=!1,i()}}}function ne(t){let e,n,o,i,s=t[2]&&oe(t);return{c(){s&&s.c(),e=L(),n=H("div"),n.textContent="Login",N(n,"class","link svelte-9x648l")},m(r,a){s&&s.m(r,a),_(r,e,a),_(r,n,a),o||(i=C(n,"click",t[9]),o=!0)},p(t,n){t[2]?s?s.p(t,n):(s=oe(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){s&&s.d(t),t&&k(e),t&&k(n),o=!1,i()}}}function oe(t){let e,n,o,i,r,a,c,l,u,d,h,f,p,g,m,$,w,v,y,x;return{c(){e=H("div"),n=H("div"),o=H("form"),i=H("label"),r=S("User:\n                            "),a=H("input"),c=L(),l=H("label"),u=S("Password:\n                            "),d=H("input"),h=L(),f=H("button"),p=S("Log In"),m=L(),$=H("div"),w=S(t[5]),v=S(" "),N(a,"type","text"),a.disabled=t[4],N(a,"class","svelte-9x648l"),N(i,"class","svelte-9x648l"),N(d,"type","password"),d.disabled=t[4],N(d,"class","svelte-9x648l"),N(l,"class","svelte-9x648l"),N(f,"type","submit"),f.disabled=g=t[4]||!t[6],N(f,"class","svelte-9x648l"),N($,"class","login-message svelte-9x648l"),N(n,"class","login-prompt svelte-9x648l"),N(e,"class","overlay svelte-9x648l")},m(s,g){var k;_(s,e,g),b(e,n),b(n,o),b(o,i),b(i,r),b(i,a),t[11](a),E(a,t[0]),b(o,c),b(o,l),b(l,u),b(l,d),E(d,t[1]),b(o,h),b(o,f),b(f,p),b(n,m),b(n,$),b($,w),b($,v),y||(x=[C(a,"input",t[12]),C(d,"input",t[13]),C(o,"submit",z(t[10])),C(e,"click",(k=t[14],function(t){t.target===this&&k.call(this,t)}))],y=!0)},p(t,e){16&e&&(a.disabled=t[4]),1&e&&a.value!==t[0]&&E(a,t[0]),16&e&&(d.disabled=t[4]),2&e&&d.value!==t[1]&&E(d,t[1]),80&e&&g!==(g=t[4]||!t[6])&&(f.disabled=g),32&e&&T(w,t[5])},d(n){n&&k(e),t[11](null),y=!1,s(x)}}}function ie(e){let n;function o(t,e){return 0==t[7].length?ne:ee}let i=o(e),s=i(e);return{c(){n=H("div"),s.c(),N(n,"class","login svelte-9x648l")},m(t,e){_(t,n,e),s.m(n,null)},p(t,[e]){i===(i=o(t))&&s?s.p(t,e):(s.d(1),s=i(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&k(n),s.d()}}}function se(t,e,n){let o;u(t,Yt,(t=>n(7,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};let s=null;function r(){null!=s&&(clearTimeout(s),s=null),g(Yt,o="",o)}J((()=>{0!=o.length&&function(){i(this,void 0,void 0,(function*(){const t=yield te("/login/check",{authorize:!0});t.success?s=setTimeout((()=>{s=null,g(Yt,o=t.data.newToken,o)}),1e3*(t.data.validIn+.5)):-2==t.data.code||r()}))}()}));let a,c=!1;let l=!1,d="",h="",f="";let p=!1;return t.$$.update=()=>{3&t.$$.dirty&&(d.length>0&&h.length>0?n(6,p=!0):n(6,p=!1))},[d,h,c,a,l,f,p,o,r,function(){return i(this,void 0,void 0,(function*(){n(0,d=""),n(1,h=""),n(5,f=""),n(2,c=!0),yield ot(),a.focus()}))},function(){return i(this,void 0,void 0,(function*(){n(4,l=!0);const t=yield te("/login/",{params:{userName:d,password:h},method:"POST"});t.success?(g(Yt,o=t.data.token,o),n(2,c=!1)):n(5,f="Incorrect!"),n(4,l=!1)}))},function(t){Y[t?"unshift":"push"]((()=>{a=t,n(3,a)}))},function(){d=this.value,n(0,d)},function(){h=this.value,n(1,h)},()=>n(2,c=!1)]}class re extends Rt{constructor(t){super(),kt(this,t,se,ie,a,{})}}function ae(t,{delay:n=0,duration:o=400,easing:i=e}={}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:i,css:t=>"opacity: "+t*s}}function ce(t){const e=Math.floor(Math.log(t)/Math.log(1024)),n=e<=1?0:2;return`${(t/Math.pow(1024,e)).toFixed(n)} ${["B","kB","MB","GB","TB"][e]}`}function le(e){let n,o,i,s,r,a,c,l,u,d,h,f,p,g,m,$,w,v,y,x,R,P,C=e[0].file.name+"",z=ce(e[0].file.size)+"";return{c(){n=H("div"),o=H("div"),i=H("div"),s=H("div"),r=H("span"),r.textContent="Name:",a=L(),c=S(C),l=L(),u=H("div"),d=H("span"),d.textContent="Size:",h=L(),f=S(z),p=L(),g=H("div"),m=H("img"),w=L(),v=H("div"),y=H("progress"),x=L(),R=H("div"),P=S(e[5]),N(r,"class","label svelte-kncakv"),N(s,"class","name"),N(d,"class","label svelte-kncakv"),N(u,"class","size"),N(i,"class","meta svelte-kncakv"),m.src!==($=e[3])&&N(m,"src",$),N(m,"alt",e[4]),N(m,"class","svelte-kncakv"),N(g,"class","preview svelte-kncakv"),N(o,"class","info svelte-kncakv"),N(y,"class","svelte-kncakv"),N(R,"class","status svelte-kncakv"),N(v,"class","status svelte-kncakv"),N(n,"class","fileUploader svelte-kncakv")},m(t,$){_(t,n,$),b(n,o),b(o,i),b(i,s),b(s,r),b(s,a),b(s,c),b(i,l),b(i,u),b(u,d),b(u,h),b(u,f),b(o,p),b(o,g),b(g,m),b(n,w),b(n,v),b(v,y),e[7](y),b(v,x),b(v,R),b(R,P),e[8](n)},p(t,[e]){1&e&&C!==(C=t[0].file.name+"")&&T(c,C),1&e&&z!==(z=ce(t[0].file.size)+"")&&T(f,z),8&e&&m.src!==($=t[3])&&N(m,"src",$),16&e&&N(m,"alt",t[4]),32&e&&T(P,t[5])},i:t,o:t,d(t){t&&k(n),e[7](null),e[8](null)}}}function ue(t,e,n){let o;u(t,Qt,(t=>n(9,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};let s,{uploadStatus:r}=e;const a=G();function c(){return i(this,void 0,void 0,(function*(){if(r.status>0)return;n(0,r.status=1,r),n(5,p="Uploading…"),o||s.scrollIntoView({behavior:"smooth",block:"center"});const t=yield async function(t,e=null,n=null){return new Promise(((o,i)=>{const s=`${l(Kt).apiUri}/upload`,r=new XMLHttpRequest,a=new FormData;r.upload.onprogress=t=>{t.lengthComputable&&e&&e(t.loaded/t.total)},r.upload.onload=t=>{n&&n(!0)},r.upload.onerror=t=>{n&&n(!1)},r.upload.onabort=t=>{n&&n(!1)},r.onload=t=>{r.status>=200&&r.status<300?o({success:!0,code:r.status,data:JSON.parse(r.responseText)}):o({success:!1,code:r.status,data:JSON.parse(r.responseText)})},r.onerror=t=>{o({success:!1,code:500,data:{error:r.responseText}})},r.open("POST",s,!0),r.setRequestHeader("Authorization",`Bearer ${l(Yt)}`),a.append("photoUp",t),r.send(a)}))}(r.file,(t=>n(1,d.value=t,d)),(t=>{n(5,p="Processing…"),d.removeAttribute("value")}));n(1,d.value=1,d),t.success?(n(5,p="Done!"),n(0,r.status=2,r),a("fileUploadDone")):(n(5,p="Failed :("),n(0,r.status=3,r),a("fileUploadFailed"))}))}J((()=>{n(0,r.startUploadCallback=()=>c(),r),n(1,d.value=0,d);const t=new FileReader;t.readAsDataURL(r.file),t.onloadend=()=>{n(3,h=t.result),n(4,f=r.file.name)}}));let d,h=null,f="",p="Pending…";return t.$$set=t=>{"uploadStatus"in t&&n(0,r=t.uploadStatus)},t.$$.update=()=>{3&t.$$.dirty&&d&&0==r.status&&n(1,d.value=0,d)},[r,d,s,h,f,p,c,function(t){Y[t?"unshift":"push"]((()=>{d=t,n(1,d),n(0,r)}))},function(t){Y[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class de extends Rt{constructor(t){super(),kt(this,t,ue,le,a,{uploadStatus:0,startUpload:6})}get startUpload(){return this.$$.ctx[6]}}function he(t,e,n){const o=t.slice();return o[16]=e[n],o}function fe(t){let e,n,o,i,r,a,c,l;function u(t,e){return t[2]>0?ge:pe}let d=u(t),h=d(t);return{c(){e=H("div"),h.c(),n=L(),o=H("div"),i=H("div"),i.innerHTML='<svg class="w-6 h-6 svelte-11z0cg0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"></path></svg>\n                    Upload',r=L(),a=H("div"),a.innerHTML='<svg class="w-6 h-6 svelte-11z0cg0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n\n                    Cancel',N(i,"class","yes svelte-11z0cg0"),N(a,"class","no svelte-11z0cg0"),N(o,"class","yesno svelte-11z0cg0"),N(e,"class","confirm svelte-11z0cg0")},m(s,u){_(s,e,u),h.m(e,null),b(e,n),b(e,o),b(o,i),b(o,r),b(o,a),c||(l=[C(i,"click",t[7]),C(a,"click",t[9])],c=!0)},p(t,o){d===(d=u(t))&&h?h.p(t,o):(h.d(1),h=d(t),h&&(h.c(),h.m(e,n)))},d(t){t&&k(e),h.d(),c=!1,s(l)}}}function pe(t){let e,n,o,i,s,r=t[0].length+"",a=1==t[0].length?"":"s";return{c(){e=S("Upload "),n=S(r),o=S(" image"),i=S(a),s=S("?")},m(t,r){_(t,e,r),_(t,n,r),_(t,o,r),_(t,i,r),_(t,s,r)},p(t,e){1&e&&r!==(r=t[0].length+"")&&T(n,r),1&e&&a!==(a=1==t[0].length?"":"s")&&T(i,a)},d(t){t&&k(e),t&&k(n),t&&k(o),t&&k(i),t&&k(s)}}}function ge(t){let e,n,o=1==t[2]?"This image ":"These images ";return{c(){e=S(o),n=S("did not upload\n                successfully. Do you want to try again?")},m(t,o){_(t,e,o),_(t,n,o)},p(t,n){4&n&&o!==(o=1==t[2]?"This image ":"These images ")&&T(e,o)},d(t){t&&k(e),t&&k(n)}}}function me(t){let e,n,o=t[1],i=[];for(let e=0;e<o.length;e+=1)i[e]=$e(he(t,o,e));const s=t=>$t(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=P()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);_(t,e,o),n=!0},p(t,n){if(98&n){let r;for(o=t[1],r=0;r<o.length;r+=1){const s=he(t,o,r);i[r]?(i[r].p(s,n),mt(i[r],1)):(i[r]=$e(s),i[r].c(),mt(i[r],1),i[r].m(e.parentNode,e))}for(pt(),r=o.length;r<i.length;r+=1)s(r);gt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)mt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)$t(i[t]);n=!1},d(t){R(i,t),t&&k(e)}}}function $e(t){let e,n;return e=new de({props:{uploadStatus:t[16]}}),e.$on("fileUploadDone",t[5]),e.$on("fileUploadFailed",t[6]),{c(){xt(e.$$.fragment)},m(t,o){bt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.uploadStatus=t[16]),e.$set(o)},i(t){n||(mt(e.$$.fragment,t),n=!0)},o(t){$t(e.$$.fragment,t),n=!1},d(t){_t(e,t)}}}function we(t){let e,n,o,i,s,r=t[3]&&fe(t),a=t[1]&&me(t);return{c(){e=H("div"),r&&r.c(),n=L(),a&&a.c(),N(e,"class","fileUploadList svelte-11z0cg0")},m(c,l){_(c,e,l),r&&r.m(e,null),b(e,n),a&&a.m(e,null),o=!0,i||(s=C(e,"click",t[10]),i=!0)},p(t,[o]){t[3]?r?r.p(t,o):(r=fe(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),t[1]?a?(a.p(t,o),2&o&&mt(a,1)):(a=me(t),a.c(),mt(a,1),a.m(e,null)):a&&(pt(),$t(a,1,1,(()=>{a=null})),gt())},i(t){o||(mt(a),o=!0)},o(t){$t(a),o=!1},d(t){t&&k(e),r&&r.d(),a&&a.d(),i=!1,s()}}}function ve(t){return t.preventDefault(),t.returnValue="","..."}function ye(t,e,n){let o;u(t,Qt,(t=>n(4,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};let s,{fileList:r}=e,a=0,c=0;function l(){for(;c<4&&!(a>=s.length);)s[a].startUploadCallback(),a+=1,c+=1}function d(){c-=1,0==c&&a>=s.length?function(){if(0==h)return void p("finished");n(1,s=s.filter((t=>3==t.status))),n(3,f=!0)}():l()}let h=0;let f=!0;J((()=>i(void 0,void 0,void 0,(function*(){g(Qt,o=!1,o),n(1,s=r.map((t=>({file:t,status:0}))))})))),q((()=>{window.removeEventListener("beforeunload",ve)}));const p=G();return t.$$set=t=>{"fileList"in t&&n(0,r=t.fileList)},[r,s,h,f,o,d,function(){n(2,h+=1),d()},function(){return i(this,void 0,void 0,(function*(){window.addEventListener("beforeunload",ve),n(2,h=0),a=0,c=0,n(3,f=!1);for(let t=0;t<s.length;t++)n(1,s[t].status=0,s);yield ot(),yield new Promise((t=>setTimeout(t,400))),g(Qt,o=!1,o),l()}))},p,()=>p("finished"),()=>g(Qt,o=!0,o)]}class xe extends Rt{constructor(t){super(),kt(this,t,ye,we,a,{fileList:0})}}function be(t){let e,n,o,i;const s=[ke,_e],r=[];function a(t,e){return t[0]?0:1}return e=a(t),n=r[e]=s[e](t),{c(){n.c(),o=P()},m(t,n){r[e].m(t,n),_(t,o,n),i=!0},p(t,i){let c=e;e=a(t),e===c?r[e].p(t,i):(pt(),$t(r[c],1,1,(()=>{r[c]=null})),gt(),n=r[e],n?n.p(t,i):(n=r[e]=s[e](t),n.c()),mt(n,1),n.m(o.parentNode,o))},i(t){i||(mt(n),i=!0)},o(t){$t(n),i=!1},d(t){r[e].d(t),t&&k(o)}}}function _e(t){let e,n,o,i,r=t[1]&&Re();return{c(){e=H("div"),r&&r.c(),N(e,"class","uploadZone svelte-f10smp")},m(s,a){_(s,e,a),r&&r.m(e,null),n=!0,o||(i=[C(e,"dragover",z(t[6])),C(e,"dragenter",z(t[3])),C(e,"dragleave",z(t[4])),C(e,"drop",z(t[5]))],o=!0)},p(t,n){t[1]?r?2&n&&mt(r,1):(r=Re(),r.c(),mt(r,1),r.m(e,null)):r&&(pt(),$t(r,1,1,(()=>{r=null})),gt())},i(t){n||(mt(r),n=!0)},o(t){$t(r),n=!1},d(t){t&&k(e),r&&r.d(),o=!1,s(i)}}}function ke(t){let e,n,o;return n=new xe({props:{fileList:t[0]}}),n.$on("finished",t[7]),{c(){e=H("div"),xt(n.$$.fragment),N(e,"class","uploadZone svelte-f10smp")},m(t,i){_(t,e,i),bt(n,e,null),o=!0},p(t,e){const o={};1&e&&(o.fileList=t[0]),n.$set(o)},i(t){o||(mt(n.$$.fragment,t),o=!0)},o(t){$t(n.$$.fragment,t),o=!1},d(t){t&&k(e),_t(n)}}}function Re(n){let o,i,s,a;return{c(){o=H("div"),o.innerHTML='<div class="dragIndicatorOutline svelte-f10smp"></div>',N(o,"class","dragIndicator svelte-f10smp")},m(t,e){_(t,o,e),a=!0},i(n){a||(it((()=>{s&&s.end(1),i||(i=function(n,o,i){let s,a,c=o(n,i),l=!1,u=0;function d(){s&&F(n,s)}function h(){const{delay:o=0,duration:i=300,easing:r=e,tick:h=t,css:f}=c||wt;f&&(s=U(n,0,1,i,o,r,f,u++)),h(0,1);const p=$()+o,g=p+i;a&&a.abort(),l=!0,it((()=>dt(n,!0,"start"))),a=x((t=>{if(l){if(t>=g)return h(1,0),dt(n,!0,"end"),d(),l=!1;if(t>=p){const e=r((t-p)/i);h(e,1-e)}}return l}))}let f=!1;return{start(){f||(F(n),r(c)?(c=c(),ut().then(h)):h())},invalidate(){f=!1},end(){l&&(d(),l=!1)}}}(o,ae,{duration:100})),i.start()})),a=!0)},o(t){i&&i.invalidate(),s=vt(o,ae,{duration:200}),a=!1},d(t){t&&k(o),t&&s&&s.end()}}}function He(t){let e,n,o=t[2].length>0&&be(t);return{c(){o&&o.c(),e=P()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[2].length>0?o?(o.p(t,n),4&n&&mt(o,1)):(o=be(t),o.c(),mt(o,1),o.m(e.parentNode,e)):o&&(pt(),$t(o,1,1,(()=>{o=null})),gt())},i(t){n||(mt(o),n=!0)},o(t){$t(o),n=!1},d(t){o&&o.d(t),t&&k(e)}}}function Se(t,e,n){let o;u(t,Yt,(t=>n(2,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};let s;let r=!1;return[s,r,o,function(t){n(1,r=!0)},function(t){n(1,r=!1)},function(t){return i(this,void 0,void 0,(function*(){n(1,r=!1);let e=[...t.dataTransfer.files];e=e.filter((t=>"image/jpeg"==t.type)),n(0,s=e)}))},function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)},()=>n(0,s=null)]}class Le extends Rt{constructor(t){super(),kt(this,t,Se,He,a,{})}}
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */
var Pe,Ce=(function(t){(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,n,o,i=this.items.concat(t),s=this.width-(i.length-1)*this.spacing,r=i.reduce((function(t,e){return t+e.aspectRatio}),0),a=s/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(s/t.aspectRatio,"justify"),!0):r<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):r>this.maxAspectRatio?0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,n=this.items.reduce((function(t,e){return t+e.aspectRatio}),0),o=e/this.targetRowHeight,Math.abs(r-a)>Math.abs(n-o)?(this.completeLayout(e/n,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,e){var n,o,i,s,r,a=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===e||["justify","center","left"].indexOf(e)<0)&&(e="left"),t!==(o=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)))?(this.height=o,n=c/o/(c/t)):(this.height=t,n=1),this.items.forEach((function(t){t.top=this.top,t.width=t.aspectRatio*this.height*n,t.height=this.height,t.left=a,a+=t.width+this.spacing}),this),"justify"===e?(a-=this.spacing+this.left,i=(a-this.width)/this.items.length,s=this.items.map((function(t,e){return Math.round((e+1)*i)})),1===this.items.length?this.items[0].width-=Math.round(i):this.items.forEach((function(t,e){e>0?(t.left-=s[e-1],t.width-=s[e]-s[e-1]):t.width-=s[e]}))):"center"===e&&(r=(this.width-a)/2,this.items.forEach((function(t){t.left+=r+this.spacing}),this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}}(Pe={exports:{}},Pe.exports),Pe.exports);
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */function ze(t,e){var n;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(n=!0),new Ce({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:n,widowLayoutStyle:t.widowLayoutStyle})}function Ne(t,e,n){return e._rows.push(n),e._layoutItems=e._layoutItems.concat(n.getItems()),e._containerHeight+=n.height+t.boxSpacing.vertical,n.items}var Te=function(t,e){var n={},o={},i={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},s={},r={};return e=e||{},n=Object.assign(i,e),s.top=isNaN(parseFloat(n.containerPadding.top))?n.containerPadding:n.containerPadding.top,s.right=isNaN(parseFloat(n.containerPadding.right))?n.containerPadding:n.containerPadding.right,s.bottom=isNaN(parseFloat(n.containerPadding.bottom))?n.containerPadding:n.containerPadding.bottom,s.left=isNaN(parseFloat(n.containerPadding.left))?n.containerPadding:n.containerPadding.left,r.horizontal=isNaN(parseFloat(n.boxSpacing.horizontal))?n.boxSpacing:n.boxSpacing.horizontal,r.vertical=isNaN(parseFloat(n.boxSpacing.vertical))?n.boxSpacing:n.boxSpacing.vertical,n.containerPadding=s,n.boxSpacing=r,o._layoutItems=[],o._awakeItems=[],o._inViewportItems=[],o._leadingOrphans=[],o._trailingOrphans=[],o._containerHeight=n.containerPadding.top,o._rows=[],o._orphans=[],n._widowCount=0,function(t,e,n){var o,i,s,r=[];return t.forceAspectRatio&&n.forEach((function(e){e.forcedAspectRatio=!0,e.aspectRatio=t.forceAspectRatio})),n.some((function(n,s){if(isNaN(n.aspectRatio))throw new Error("Item "+s+" has an invalid aspect ratio");if(i||(i=ze(t,e)),o=i.addItem(n),i.isLayoutComplete()){if(r=r.concat(Ne(t,e,i)),e._rows.length>=t.maxNumRows)return i=null,!0;if(i=ze(t,e),!o&&(o=i.addItem(n),i.isLayoutComplete())){if(r=r.concat(Ne(t,e,i)),e._rows.length>=t.maxNumRows)return i=null,!0;i=ze(t,e)}}})),i&&i.getItems().length&&t.showWidows&&(e._rows.length?(s=e._rows[e._rows.length-1].isBreakoutRow?e._rows[e._rows.length-1].targetRowHeight:e._rows[e._rows.length-1].height,i.forceComplete(!1,s)):i.forceComplete(!1),r=r.concat(Ne(t,e,i)),t._widowCount=i.getItems().length),e._containerHeight=e._containerHeight-t.boxSpacing.vertical,e._containerHeight=e._containerHeight+t.containerPadding.bottom,{containerHeight:e._containerHeight,widowCount:t._widowCount,boxes:e._layoutItems}}(n,o,t.map((function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}})))};function Ee(t){let e,n,o,i,s,r,a,c,l,u,d,h=!t[3]&&je(t);return{c(){e=H("div"),h&&h.c(),n=L(),o=H("img"),N(o,"alt",i=t[0].title),N(o,"srcset",s=`/img/${t[1]}/${t[0].hash}.jpg, /img/${t[1]}2x/${t[0].hash}.jpg 2x`),o.src!==(r=`/img/${t[1]}/${t[0].hash}.jpg`)&&N(o,"src",r),N(o,"width",a=t[2].width+"px"),N(e,"class","albumPhoto svelte-1b6zabu"),N(e,"style",c=`width: ${t[2].width}px; height: ${t[2].height}px; top: ${t[2].top}px; left: ${t[2].left}px;`)},m(i,s){_(i,e,s),h&&h.m(e,null),b(e,n),b(e,o),l=!0,u||(d=C(o,"load",t[4]),u=!0)},p(t,u){t[3]?h&&(pt(),$t(h,1,1,(()=>{h=null})),gt()):h?(h.p(t,u),8&u&&mt(h,1)):(h=je(t),h.c(),mt(h,1),h.m(e,n)),(!l||1&u&&i!==(i=t[0].title))&&N(o,"alt",i),(!l||3&u&&s!==(s=`/img/${t[1]}/${t[0].hash}.jpg, /img/${t[1]}2x/${t[0].hash}.jpg 2x`))&&N(o,"srcset",s),(!l||3&u&&o.src!==(r=`/img/${t[1]}/${t[0].hash}.jpg`))&&N(o,"src",r),(!l||4&u&&a!==(a=t[2].width+"px"))&&N(o,"width",a),(!l||4&u&&c!==(c=`width: ${t[2].width}px; height: ${t[2].height}px; top: ${t[2].top}px; left: ${t[2].left}px;`))&&N(e,"style",c)},i(t){l||(mt(h),l=!0)},o(t){$t(h),l=!1},d(t){t&&k(e),h&&h.d(),u=!1,d()}}}function je(t){let e,n,o,i,s,r,a;return{c(){e=H("img"),N(e,"class","preload svelte-1b6zabu"),N(e,"alt",n=t[0].title),e.src!==(o="data:image/jpeg;base64,"+t[0].tinyJPEG)&&N(e,"src",o),N(e,"width",i=t[2].width+"px"),N(e,"height",s=t[2].height+"px")},m(t,n){_(t,e,n),a=!0},p(t,r){(!a||1&r&&n!==(n=t[0].title))&&N(e,"alt",n),(!a||1&r&&e.src!==(o="data:image/jpeg;base64,"+t[0].tinyJPEG))&&N(e,"src",o),(!a||4&r&&i!==(i=t[2].width+"px"))&&N(e,"width",i),(!a||4&r&&s!==(s=t[2].height+"px"))&&N(e,"height",s)},i(t){a||(r&&r.end(1),a=!0)},o(t){r=vt(e,ae,{duration:200}),a=!1},d(t){t&&k(e),t&&r&&r.end()}}}function Ie(t){let e,n,o=t[0]&&t[2]&&Ee(t);return{c(){o&&o.c(),e=P()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[0]&&t[2]?o?(o.p(t,n),5&n&&mt(o,1)):(o=Ee(t),o.c(),mt(o,1),o.m(e.parentNode,e)):o&&(pt(),$t(o,1,1,(()=>{o=null})),gt())},i(t){n||(mt(o),n=!0)},o(t){$t(o),n=!1},d(t){o&&o.d(t),t&&k(e)}}}function Me(t,e,n){let{photo:o}=e,{size:i="medium"}=e,{dims:s}=e,r=!1;return t.$$set=t=>{"photo"in t&&n(0,o=t.photo),"size"in t&&n(1,i=t.size),"dims"in t&&n(2,s=t.dims)},[o,i,s,r,()=>n(3,r=!0)]}class Oe extends Rt{constructor(t){super(),kt(this,t,Me,Ie,a,{photo:0,size:1,dims:2})}}function Be(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function Ae(t){let e,n,o,i,s,r,a,c=t[1].title+"",l=t[2]&&Ue(t);return{c(){e=H("h2"),n=S(c),o=L(),i=H("div"),l&&l.c(),N(e,"class","svelte-13u7rp7"),N(i,"class","albumPhotos svelte-13u7rp7"),N(i,"style",s=`height: ${t[2]?.containerHeight||0}px;`),it((()=>t[4].call(i)))},m(s,c){_(s,e,c),b(e,n),_(s,o,c),_(s,i,c),l&&l.m(i,null),r=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=H("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=I();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=C(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=C(n.contentWindow,"resize",e)}),b(t,n),()=>{(o||i&&n.contentWindow)&&i(),k(n)}}(i,t[4].bind(i)),a=!0},p(t,e){(!a||2&e)&&c!==(c=t[1].title+"")&&T(n,c),t[2]?l?(l.p(t,e),4&e&&mt(l,1)):(l=Ue(t),l.c(),mt(l,1),l.m(i,null)):l&&(pt(),$t(l,1,1,(()=>{l=null})),gt()),(!a||4&e&&s!==(s=`height: ${t[2]?.containerHeight||0}px;`))&&N(i,"style",s)},i(t){a||(mt(l),a=!0)},o(t){$t(l),a=!1},d(t){t&&k(e),t&&k(o),t&&k(i),l&&l.d(),r()}}}function Ue(t){let e,n,o=t[1].photos,i=[];for(let e=0;e<o.length;e+=1)i[e]=Fe(Be(t,o,e));const s=t=>$t(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=P()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);_(t,e,o),n=!0},p(t,n){if(6&n){let r;for(o=t[1].photos,r=0;r<o.length;r+=1){const s=Be(t,o,r);i[r]?(i[r].p(s,n),mt(i[r],1)):(i[r]=Fe(s),i[r].c(),mt(i[r],1),i[r].m(e.parentNode,e))}for(pt(),r=o.length;r<i.length;r+=1)s(r);gt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)mt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)$t(i[t]);n=!1},d(t){R(i,t),t&&k(e)}}}function Fe(t){let e,n;return e=new Oe({props:{photo:t[8],size:"medium",dims:t[2].boxes[t[10]]}}),{c(){xt(e.$$.fragment)},m(t,o){bt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.photo=t[8]),4&n&&(o.dims=t[2].boxes[t[10]]),e.$set(o)},i(t){n||(mt(e.$$.fragment,t),n=!0)},o(t){$t(e.$$.fragment,t),n=!1},d(t){_t(e,t)}}}function We(t){let e,n,o=t[1]&&Ae(t);return{c(){o&&o.c(),e=P()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[1]?o?(o.p(t,n),2&n&&mt(o,1)):(o=Ae(t),o.c(),mt(o,1),o.m(e.parentNode,e)):o&&(pt(),$t(o,1,1,(()=>{o=null})),gt())},i(t){n||(mt(o),n=!0)},o(t){$t(o),n=!1},d(t){o&&o.d(t),t&&k(e)}}}function De(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};let i,{identifier:s}=e;function r(t){if(!t||!a)return;const e=a.photos.map((t=>t.aspect));n(2,c=Te(e,{targetRowHeight:300,containerWidth:t,containerPadding:10,widowLayoutStyle:"center"}))}let a=null,c=null;return J((function(){return o(this,void 0,void 0,(function*(){const t=yield te(`/album/view/${s}`,{params:{previews:1},method:"POST"});if(t.success)return n(1,a=t.data),a;console.error(t)}))})),t.$$set=t=>{"identifier"in t&&n(3,s=t.identifier)},t.$$.update=()=>{1&t.$$.dirty&&r(i),3&t.$$.dirty&&a&&r(i)},[i,a,c,s,function(){i=this.clientWidth,n(0,i)}]}class Je extends Rt{constructor(t){super(),kt(this,t,De,We,a,{identifier:3})}}function qe(e){let n;return{c(){n=H("div"),n.textContent="This would be a list of albums or something I guess.",N(n,"class","welcome svelte-1369nh3")},m(t,e){_(t,n,e)},p:t,i:t,o:t,d(t){t&&k(n)}}}class Ge extends Rt{constructor(t){super(),kt(this,t,null,qe,a,{})}}function Ve(e){let n,o,i,s;return n=new Xt({props:{path:"album/:identifier",component:Je}}),i=new Xt({props:{component:Ge}}),{c(){xt(n.$$.fragment),o=L(),xt(i.$$.fragment)},m(t,e){bt(n,t,e),_(t,o,e),bt(i,t,e),s=!0},p:t,i(t){s||(mt(n.$$.fragment,t),mt(i.$$.fragment,t),s=!0)},o(t){$t(n.$$.fragment,t),$t(i.$$.fragment,t),s=!1},d(t){_t(n,t),t&&k(o),_t(i,t)}}}function Ze(t){let e,n,o,i,s,r,a,c,l;return i=new re({}),r=new Le({}),c=new Ft({props:{url:t[0],$$slots:{default:[Ve]},$$scope:{ctx:t}}}),{c(){e=H("main"),n=H("h1"),n.textContent="Pozzo",o=L(),xt(i.$$.fragment),s=L(),xt(r.$$.fragment),a=L(),xt(c.$$.fragment),N(n,"class","svelte-45rfii"),N(e,"class","svelte-45rfii")},m(t,u){_(t,e,u),b(e,n),b(e,o),bt(i,e,null),b(e,s),bt(r,e,null),b(e,a),bt(c,e,null),l=!0},p(t,[e]){const n={};1&e&&(n.url=t[0]),2&e&&(n.$$scope={dirty:e,ctx:t}),c.$set(n)},i(t){l||(mt(i.$$.fragment,t),mt(r.$$.fragment,t),mt(c.$$.fragment,t),l=!0)},o(t){$t(i.$$.fragment,t),$t(r.$$.fragment,t),$t(c.$$.fragment,t),l=!1},d(t){t&&k(e),_t(i),_t(r),_t(c)}}}function Xe(t,e,n){let{url:o=""}=e;return t.$$set=t=>{"url"in t&&n(0,o=t.url)},[o]}return new class extends Rt{constructor(t){super(),kt(this,t,Xe,Ze,a,{url:0})}}({target:document.body,props:{}})}();
