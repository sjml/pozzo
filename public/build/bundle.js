var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function i(){return Object.create(null)}function s(t){t.forEach(o)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function a(t){let e;return c(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function d(t,e,n,o){if(t){const i=h(t,e,n,o);return t[0](i)}}function h(t,e,o,i){return t[1]&&i?n(o.ctx.slice(),t[1](i(e))):o.ctx}function f(t,e,n,o,i,s,r){const l=function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(e,o,i,s);if(l){const i=h(e,n,o,r);t.p(i,l)}}function p(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function m(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function g(t,e,n=e){return t.set(n),e}const $="undefined"!=typeof window;let v=$?()=>window.performance.now():()=>Date.now(),w=$?t=>requestAnimationFrame(t):t;const y=new Set;function b(t){y.forEach((e=>{e.c(t)||(y.delete(e),e.f())})),0!==y.size&&w(b)}function x(t){let e;return 0===y.size&&w(b),{promise:new Promise((n=>{y.add(e={c:t,f:n})})),abort(){y.delete(e)}}}function k(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode.removeChild(t)}function R(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function H(t){return document.createElement(t)}function L(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function S(t){return document.createTextNode(t)}function C(){return S(" ")}function I(){return S("")}function M(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function z(t){return function(e){return e.preventDefault(),t.call(this,e)}}function N(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set?t[o]=e[o]:A(t,o,e[o])}function j(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e){t.value=null==e?"":e}let E;function D(){if(void 0===E){E=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){E=!0}}return E}function B(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=H("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=D();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=M(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=M(n.contentWindow,"resize",e)}),k(t,n),()=>{(o||i&&n.contentWindow)&&i(),P(n)}}function q(t,e,n){t.classList[n?"add":"remove"](e)}function U(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const F=new Set;let W,J=0;function V(t,e,n,o,i,s,r,l=0){const c=16.666/o;let a="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*s(t);a+=100*t+`%{${r(o,1-o)}}\n`}const u=a+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,h=t.ownerDocument;F.add(h);const f=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(H("style")).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${i}ms 1 both`,J+=1,d}function G(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),J-=i,J||w((()=>{J||(F.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),F.clear())})))}function K(t){W=t}function X(){if(!W)throw new Error("Function called outside component initialization");return W}function Y(t){X().$$.on_mount.push(t)}function Z(t){X().$$.on_destroy.push(t)}function Q(){const t=X();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=U(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}function tt(t,e){X().$$.context.set(t,e)}function et(t){return X().$$.context.get(t)}function nt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const ot=[],it=[],st=[],rt=[],lt=Promise.resolve();let ct=!1;function at(){ct||(ct=!0,lt.then(pt))}function ut(){return at(),lt}function dt(t){st.push(t)}let ht=!1;const ft=new Set;function pt(){if(!ht){ht=!0;do{for(let t=0;t<ot.length;t+=1){const e=ot[t];K(e),mt(e.$$)}for(K(null),ot.length=0;it.length;)it.pop()();for(let t=0;t<st.length;t+=1){const e=st[t];ft.has(e)||(ft.add(e),e())}st.length=0}while(ot.length);for(;rt.length;)rt.pop()();ct=!1,ht=!1,ft.clear()}}function mt(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(dt)}}let gt;function $t(){return gt||(gt=Promise.resolve(),gt.then((()=>{gt=null}))),gt}function vt(t,e,n){t.dispatchEvent(U(`${e?"intro":"outro"}${n}`))}const wt=new Set;let yt;function bt(){yt={r:0,c:[],p:yt}}function xt(){yt.r||s(yt.c),yt=yt.p}function kt(t,e){t&&t.i&&(wt.delete(t),t.i(e))}function _t(t,e,n,o){if(t&&t.o){if(wt.has(t))return;wt.add(t),yt.c.push((()=>{wt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const Pt={duration:0};function Rt(n,o,i){let l,c=o(n,i),a=!0;const u=yt;function d(){const{delay:o=0,duration:i=300,easing:r=e,tick:d=t,css:h}=c||Pt;h&&(l=V(n,1,0,i,o,r,h));const f=v()+o,p=f+i;dt((()=>vt(n,!1,"start"))),x((t=>{if(a){if(t>=p)return d(0,1),vt(n,!1,"end"),--u.r||s(u.c),!1;if(t>=f){const e=r((t-f)/i);d(1-e,e)}}return a}))}return u.r+=1,r(c)?$t().then((()=>{c=c(),d()})):d(),{end(t){t&&c.tick&&c.tick(1,0),a&&(l&&G(n,l),a=!1)}}}function Ht(n,o,i,l){let c=o(n,i),a=l?0:1,u=null,d=null,h=null;function f(){h&&G(n,h)}function p(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function m(o){const{delay:i=0,duration:r=300,easing:l=e,tick:m=t,css:g}=c||Pt,$={start:v()+i,b:o};o||($.group=yt,yt.r+=1),u||d?d=$:(g&&(f(),h=V(n,a,o,r,i,l,g)),o&&m(0,1),u=p($,r),dt((()=>vt(n,o,"start"))),x((t=>{if(d&&t>d.start&&(u=p(d,r),d=null,vt(n,u.b,"start"),g&&(f(),h=V(n,a,u.b,u.duration,0,l,c.css))),u)if(t>=u.end)m(a=u.b,1-a),vt(n,u.b,"end"),d||(u.b?f():--u.group.r||s(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;a=u.a+u.d*l(e/u.duration),m(a,1-a)}return!(!u&&!d)})))}return{run(t){r(c)?$t().then((()=>{c=c(),m(t)})):m(t)},end(){f(),u=d=null}}}const Lt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function St(t,e){const n={},o={},i={$$scope:1};let s=t.length;for(;s--;){const r=t[s],l=e[s];if(l){for(const t in r)t in l||(o[t]=1);for(const t in l)i[t]||(n[t]=l[t],i[t]=1);t[s]=l}else for(const t in r)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function Ct(t){return"object"==typeof t&&null!==t?t:{}}function It(t){t&&t.c()}function Mt(t,e,n){const{fragment:i,on_mount:l,on_destroy:c,after_update:a}=t.$$;i&&i.m(e,n),dt((()=>{const e=l.map(o).filter(r);c?c.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(dt)}function zt(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Nt(e,n,o,r,l,c,a=[-1]){const u=W;K(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:a,skip_bound:!1};let h=!1;if(d.ctx=o?o(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),h&&function(t,e){-1===t.$$.dirty[0]&&(ot.push(t),at(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),h=!0,s(d.before_update),d.fragment=!!r&&r(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(P)}else d.fragment&&d.fragment.c();n.intro&&kt(e.$$.fragment),Mt(e,n.target,n.anchor),pt()}K(u)}class At{$destroy(){zt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Tt=[];function jt(t,e){return{subscribe:Ot(t,e).subscribe}}function Ot(e,n=t){let o;const i=[];function s(t){if(l(e,t)&&(e=t,o)){const t=!Tt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Tt.push(n,e)}if(t){for(let t=0;t<Tt.length;t+=2)Tt[t][0](Tt[t+1]);Tt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,l=t){const c=[r,l];return i.push(c),1===i.length&&(o=n(s)||t),r(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const Et={},Dt={};function Bt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const qt=function(t,e){const n=[];let o=Bt(t);return{get location(){return o},listen(e){n.push(e);const i=()=>{o=Bt(t),e({location:o,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const o=n.indexOf(e);n.splice(o,1)}},navigate(e,{state:i,replace:s=!1}={}){i={...i,key:Date.now()+""};try{s?t.history.replaceState(i,null,e):t.history.pushState(i,null,e)}catch(n){t.location[s?"replace":"assign"](e)}o=Bt(t),n.forEach((t=>t({location:o,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],o=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return o[e]},pushState(t,i,s){const[r,l=""]=s.split("?");e++,n.push({pathname:r,search:l}),o.push(t)},replaceState(t,i,s){const[r,l=""]=s.split("?");n[e]={pathname:r,search:l},o[e]=t}}}}()),{navigate:Ut}=qt,Ft=/^:(.+)/;function Wt(t,e){return t.substr(0,e.length)===e}function Jt(t){return"*"===t[0]}function Vt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Gt(t){return t.replace(/(^\/+|\/+$)/g,"")}function Kt(t,e){return{route:t,score:t.default?0:Vt(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return Ft.test(t)}(e)?Jt(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function Xt(t,e){let n,o;const[i]=e.split("?"),s=Vt(i),r=""===s[0],l=function(t){return t.map(Kt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,i=l.length;t<i;t++){const i=l[t].route;let c=!1;if(i.default){o={route:i,params:{},uri:e};continue}const a=Vt(i.path),u={},d=Math.max(s.length,a.length);let h=0;for(;h<d;h++){const t=a[h],e=s[h];if(void 0!==t&&Jt(t)){u["*"===t?"*":t.slice(1)]=s.slice(h).map(decodeURIComponent).join("/");break}if(void 0===e){c=!0;break}let n=Ft.exec(t);if(n&&!r){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){c=!0;break}}if(!c){n={route:i,params:u,uri:"/"+s.slice(0,h).join("/")};break}}return n||o||null}function Yt(t,e){return t+(e?`?${e}`:"")}function Zt(t,e){return`${Gt("/"===e?t:`${Gt(t)}/${Gt(e)}`)}/`}function Qt(t){let e;const n=t[9].default,o=d(n,t,t[8],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,[e]){o&&o.p&&256&e&&f(o,n,t,t[8],e,null,null)},i(t){e||(kt(o,t),e=!0)},o(t){_t(o,t),e=!1},d(t){o&&o.d(t)}}}function te(e,n,o){let i,l,a,{$$slots:d={},$$scope:h}=n,{basepath:f="/"}=n,{url:p=null}=n;const m=et(Et),g=et(Dt),$=Ot([]);u(e,$,(t=>o(7,a=t)));const v=Ot(null);let w=!1;const y=m||Ot(p?{pathname:p}:qt.location);u(e,y,(t=>o(6,l=t)));const b=g?g.routerBase:Ot({path:f,uri:f});u(e,b,(t=>o(5,i=t)));const x=function(e,n,o){const i=!Array.isArray(e),l=i?[e]:e,a=n.length<2;return jt(o,(e=>{let o=!1;const u=[];let d=0,h=t;const f=()=>{if(d)return;h();const o=n(i?u[0]:u,e);a?e(o):h=r(o)?o:t},p=l.map(((t,e)=>c(t,(t=>{u[e]=t,d&=~(1<<e),o&&f()}),(()=>{d|=1<<e}))));return o=!0,f(),function(){s(p),h()}}))}([b,v],(([t,e])=>{if(null===e)return t;const{path:n}=t,{route:o,uri:i}=e;return{path:o.default?n:o.path.replace(/\*.*$/,""),uri:i}}));return m||(Y((()=>qt.listen((t=>{y.set(t.location)})))),tt(Et,y)),tt(Dt,{activeRoute:v,base:b,routerBase:x,registerRoute:function(t){const{path:e}=i;let{path:n}=t;if(t._path=n,t.path=Zt(e,n),"undefined"==typeof window){if(w)return;const e=function(t,e){return Xt([t],e)}(t,l.pathname);e&&(v.set(e),w=!0)}else $.update((e=>(e.push(t),e)))},unregisterRoute:function(t){$.update((e=>{const n=e.indexOf(t);return e.splice(n,1),e}))}}),e.$$set=t=>{"basepath"in t&&o(3,f=t.basepath),"url"in t&&o(4,p=t.url),"$$scope"in t&&o(8,h=t.$$scope)},e.$$.update=()=>{if(32&e.$$.dirty){const{path:t}=i;$.update((e=>(e.forEach((e=>e.path=Zt(t,e._path))),e)))}if(192&e.$$.dirty){const t=Xt(a,l.pathname);v.set(t)}},[$,y,b,f,p,i,l,a,h,d]}class ee extends At{constructor(t){super(),Nt(this,t,te,Qt,l,{basepath:3,url:4})}}const ne=t=>({params:4&t,location:16&t}),oe=t=>({params:t[2],location:t[4]});function ie(t){let e,n,o,i;const s=[re,se],r=[];function l(t,e){return null!==t[0]?0:1}return e=l(t),n=r[e]=s[e](t),{c(){n.c(),o=I()},m(t,n){r[e].m(t,n),_(t,o,n),i=!0},p(t,i){let c=e;e=l(t),e===c?r[e].p(t,i):(bt(),_t(r[c],1,1,(()=>{r[c]=null})),xt(),n=r[e],n?n.p(t,i):(n=r[e]=s[e](t),n.c()),kt(n,1),n.m(o.parentNode,o))},i(t){i||(kt(n),i=!0)},o(t){_t(n),i=!1},d(t){r[e].d(t),t&&P(o)}}}function se(t){let e;const n=t[10].default,o=d(n,t,t[9],oe);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&532&e&&f(o,n,t,t[9],e,ne,oe)},i(t){e||(kt(o,t),e=!0)},o(t){_t(o,t),e=!1},d(t){o&&o.d(t)}}}function re(t){let e,o,i;const s=[{location:t[4]},t[2],t[3]];var r=t[0];function l(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return{props:e}}return r&&(e=new r(l())),{c(){e&&It(e.$$.fragment),o=I()},m(t,n){e&&Mt(e,t,n),_(t,o,n),i=!0},p(t,n){const i=28&n?St(s,[16&n&&{location:t[4]},4&n&&Ct(t[2]),8&n&&Ct(t[3])]):{};if(r!==(r=t[0])){if(e){bt();const t=e;_t(t.$$.fragment,1,0,(()=>{zt(t,1)})),xt()}r?(e=new r(l()),It(e.$$.fragment),kt(e.$$.fragment,1),Mt(e,o.parentNode,o)):e=null}else r&&e.$set(i)},i(t){i||(e&&kt(e.$$.fragment,t),i=!0)},o(t){e&&_t(e.$$.fragment,t),i=!1},d(t){t&&P(o),e&&zt(e,t)}}}function le(t){let e,n,o=null!==t[1]&&t[1].route===t[7]&&ie(t);return{c(){o&&o.c(),e=I()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){null!==t[1]&&t[1].route===t[7]?o?(o.p(t,n),2&n&&kt(o,1)):(o=ie(t),o.c(),kt(o,1),o.m(e.parentNode,e)):o&&(bt(),_t(o,1,1,(()=>{o=null})),xt())},i(t){n||(kt(o),n=!0)},o(t){_t(o),n=!1},d(t){o&&o.d(t),t&&P(e)}}}function ce(t,e,o){let i,s,{$$slots:r={},$$scope:l}=e,{path:c=""}=e,{component:a=null}=e;const{registerRoute:d,unregisterRoute:h,activeRoute:f}=et(Dt);u(t,f,(t=>o(1,i=t)));const m=et(Et);u(t,m,(t=>o(4,s=t)));const g={path:c,default:""===c};let $={},v={};return d(g),"undefined"!=typeof window&&Z((()=>{h(g)})),t.$$set=t=>{o(13,e=n(n({},e),p(t))),"path"in t&&o(8,c=t.path),"component"in t&&o(0,a=t.component),"$$scope"in t&&o(9,l=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&i&&i.route===g&&o(2,$=i.params);{const{path:t,component:n,...i}=e;o(3,v=i)}},e=p(e),[a,i,$,v,s,f,m,g,c,l,r]}class ae extends At{constructor(t){super(),Nt(this,t,ce,le,l,{path:8,component:0})}}function ue(t){let e,o,i,s;const r=t[16].default,l=d(r,t,t[15],null);let c=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],a={};for(let t=0;t<c.length;t+=1)a=n(a,c[t]);return{c(){e=H("a"),l&&l.c(),T(e,a)},m(n,r){_(n,e,r),l&&l.m(e,null),o=!0,i||(s=M(e,"click",t[5]),i=!0)},p(t,[n]){l&&l.p&&32768&n&&f(l,r,t,t[15],n,null,null),T(e,a=St(c,[(!o||1&n)&&{href:t[0]},(!o||4&n)&&{"aria-current":t[2]},2&n&&t[1],64&n&&t[6]]))},i(t){o||(kt(l,t),o=!0)},o(t){_t(l,t),o=!1},d(t){t&&P(e),l&&l.d(t),i=!1,s()}}}function de(t,e,o){let i;const s=["to","replace","state","getProps"];let r,l,c=m(e,s),{$$slots:a={},$$scope:d}=e,{to:h="#"}=e,{replace:f=!1}=e,{state:g={}}=e,{getProps:$=(()=>({}))}=e;const{base:v}=et(Dt);u(t,v,(t=>o(13,r=t)));const w=et(Et);u(t,w,(t=>o(14,l=t)));const y=Q();let b,x,k,_;return t.$$set=t=>{e=n(n({},e),p(t)),o(6,c=m(e,s)),"to"in t&&o(7,h=t.to),"replace"in t&&o(8,f=t.replace),"state"in t&&o(9,g=t.state),"getProps"in t&&o(10,$=t.getProps),"$$scope"in t&&o(15,d=t.$$scope)},t.$$.update=()=>{8320&t.$$.dirty&&o(0,b="/"===h?r.uri:function(t,e){if(Wt(t,"/"))return t;const[n,o]=t.split("?"),[i]=e.split("?"),s=Vt(n),r=Vt(i);if(""===s[0])return Yt(i,o);if(!Wt(s[0],"."))return Yt(("/"===i?"":"/")+r.concat(s).join("/"),o);const l=r.concat(s),c=[];return l.forEach((t=>{".."===t?c.pop():"."!==t&&c.push(t)})),Yt("/"+c.join("/"),o)}(h,r.uri)),16385&t.$$.dirty&&o(11,x=Wt(l.pathname,b)),16385&t.$$.dirty&&o(12,k=b===l.pathname),4096&t.$$.dirty&&o(2,i=k?"page":void 0),23553&t.$$.dirty&&o(1,_=$({location:l,href:b,isPartiallyCurrent:x,isCurrent:k}))},[b,_,i,v,w,function(t){if(y("click",t),function(t){return!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)){t.preventDefault();const e=l.pathname===b||f;Ut(b,{state:g,replace:e})}},c,h,f,g,$,x,k,r,l,d,a]}class he extends At{constructor(t){super(),Nt(this,t,de,ue,l,{to:7,replace:8,state:9,getProps:10})}}function fe(t,{delay:n=0,duration:o=400,easing:i=e}={}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:i,css:t=>"opacity: "+t*s}}function pe(t){let e,n,o,i,r;const l=t[2].default,c=d(l,t,t[1],null);return{c(){e=H("div"),c&&c.c(),A(e,"class","overlay svelte-1w85ihi")},m(n,s){var l;_(n,e,s),c&&c.m(e,null),o=!0,i||(r=[M(e,"mousedown",N(t[3])),M(e,"mouseup",N(t[4])),M(e,"click",(l=t[5],function(t){t.target===this&&l.call(this,t)}))],i=!0)},p(t,[e]){c&&c.p&&2&e&&f(c,l,t,t[1],e,null,null)},i(t){o||(kt(c,t),dt((()=>{n||(n=Ht(e,fe,{duration:200},!0)),n.run(1)})),o=!0)},o(t){_t(c,t),n||(n=Ht(e,fe,{duration:200},!1)),n.run(0),o=!1},d(t){t&&P(e),c&&c.d(t),t&&n&&n.end(),i=!1,s(r)}}}function me(t,e,n){let{$$slots:o={},$$scope:i}=e;const s=Q();return t.$$set=t=>{"$$scope"in t&&n(1,i=t.$$scope)},[s,i,o,function(e){nt(t,e)},function(e){nt(t,e)},()=>s("clickedOutside")]}class ge extends At{constructor(t){super(),Nt(this,t,me,pe,l,{})}}const $e=Ot(!1),ve=Ot(localStorage.getItem("pozzoLoginJWT")||"");ve.subscribe((t=>{localStorage.setItem("pozzoLoginJWT",t),0==t.length?$e.set(!1):$e.set(!0)}));const we=jt({apiUri:`${location.origin}/api`},(t=>{})),ye=Ot(!1),be=Ot([]),xe=Ot(null),ke=Ot(null);async function _e(t,e){var n;const o={};e=null!=e?e:{},o.method=null!==(n=e.method)&&void 0!==n?n:"GET",e.params&&(o.body=JSON.stringify(e.params)),e.authorize&&a(ve).length>0&&(o.headers={Authorization:`Bearer ${a(ve)}`});const i=await fetch(`${a(we).apiUri}${t}`,o);try{if(i.ok){const t=await i.json();return{success:!0,code:i.status,data:t}}{const t=await i.json();return{success:!1,code:i.status,data:t}}}catch(t){return{success:!1,code:500,data:{error:t}}}}function Pe(e){let n,o,i;return{c(){n=H("div"),n.innerHTML='<svg class="w-6 h-6 svelte-he0adt" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>',A(n,"class","link svelte-he0adt"),A(n,"title","Log Out")},m(t,s){_(t,n,s),o||(i=M(n,"click",e[8]),o=!0)},p:t,i:t,o:t,d(t){t&&P(n),o=!1,i()}}}function Re(t){let e,n,o,i,s,r=t[2]&&He(t);return{c(){r&&r.c(),e=C(),n=H("div"),n.innerHTML='<svg class="w-6 h-6 svelte-he0adt" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',A(n,"class","link svelte-he0adt"),A(n,"title","Log In")},m(l,c){r&&r.m(l,c),_(l,e,c),_(l,n,c),o=!0,i||(s=M(n,"click",t[9]),i=!0)},p(t,n){t[2]?r?(r.p(t,n),4&n&&kt(r,1)):(r=He(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&(bt(),_t(r,1,1,(()=>{r=null})),xt())},i(t){o||(kt(r),o=!0)},o(t){_t(r),o=!1},d(t){r&&r.d(t),t&&P(e),t&&P(n),i=!1,s()}}}function He(t){let e,n;return e=new ge({props:{$$slots:{default:[Le]},$$scope:{ctx:t}}}),e.$on("clickedOutside",t[14]),{c(){It(e.$$.fragment)},m(t,o){Mt(e,t,o),n=!0},p(t,n){const o={};262267&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function Le(t){let e,n,o,i,r,l,c,a,u,d,h,f,p,m,g,$,v,w,y;return{c(){e=H("div"),n=H("form"),o=H("label"),i=S("User:\n                            "),r=H("input"),l=C(),c=H("label"),a=S("Password:\n                            "),u=H("input"),d=C(),h=H("button"),f=S("Log In"),m=C(),g=H("div"),$=S(t[5]),v=S(" "),A(r,"type","text"),r.disabled=t[4],A(r,"class","svelte-he0adt"),A(o,"class","svelte-he0adt"),A(u,"type","password"),u.disabled=t[4],A(u,"class","svelte-he0adt"),A(c,"class","svelte-he0adt"),A(h,"type","submit"),h.disabled=p=t[4]||!t[6],A(h,"class","svelte-he0adt"),A(g,"class","login-message svelte-he0adt"),A(e,"class","login-prompt svelte-he0adt")},m(s,p){_(s,e,p),k(e,n),k(n,o),k(o,i),k(o,r),t[11](r),O(r,t[0]),k(n,l),k(n,c),k(c,a),k(c,u),O(u,t[1]),k(n,d),k(n,h),k(h,f),k(e,m),k(e,g),k(g,$),k(g,v),w||(y=[M(r,"input",t[12]),M(u,"input",t[13]),M(n,"submit",z(t[10]))],w=!0)},p(t,e){16&e&&(r.disabled=t[4]),1&e&&r.value!==t[0]&&O(r,t[0]),16&e&&(u.disabled=t[4]),2&e&&u.value!==t[1]&&O(u,t[1]),80&e&&p!==(p=t[4]||!t[6])&&(h.disabled=p),32&e&&j($,t[5])},d(n){n&&P(e),t[11](null),w=!1,s(y)}}}function Se(t){let e,n,o,i;const s=[Re,Pe],r=[];function l(t,e){return 0==t[7].length?0:1}return n=l(t),o=r[n]=s[n](t),{c(){e=H("div"),o.c(),A(e,"class","login svelte-he0adt")},m(t,o){_(t,e,o),r[n].m(e,null),i=!0},p(t,[i]){let c=n;n=l(t),n===c?r[n].p(t,i):(bt(),_t(r[c],1,1,(()=>{r[c]=null})),xt(),o=r[n],o?o.p(t,i):(o=r[n]=s[n](t),o.c()),kt(o,1),o.m(e,null))},i(t){i||(kt(o),i=!0)},o(t){_t(o),i=!1},d(t){t&&P(e),r[n].d()}}}function Ce(t,e,n){let o;u(t,ve,(t=>n(7,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};let s=null;function r(){null!=s&&(clearTimeout(s),s=null),g(ve,o="",o)}Y((()=>{0!=o.length&&function(){i(this,void 0,void 0,(function*(){const t=yield _e("/login/check",{authorize:!0});t.success?s=setTimeout((()=>{s=null,g(ve,o=t.data.newToken,o)}),1e3*(t.data.validIn+.5)):-4==t.data.code||r()}))}()}));let l,c=!1;let a=!1,d="",h="",f="";let p=!1;return t.$$.update=()=>{3&t.$$.dirty&&(d.length>0&&h.length>0?n(6,p=!0):n(6,p=!1))},[d,h,c,l,a,f,p,o,r,function(){return i(this,void 0,void 0,(function*(){n(0,d=""),n(1,h=""),n(5,f=""),n(2,c=!0),yield ut(),l.focus()}))},function(){return i(this,void 0,void 0,(function*(){n(4,a=!0);const t=yield _e("/login/",{params:{userName:d,password:h},method:"POST"});t.success?(g(ve,o=t.data.token,o),n(2,c=!1)):n(5,f="Incorrect!"),n(4,a=!1)}))},function(t){it[t?"unshift":"push"]((()=>{l=t,n(3,l)}))},function(){d=this.value,n(0,d)},function(){h=this.value,n(1,h)},()=>n(2,c=!1)]}class Ie extends At{constructor(t){super(),Nt(this,t,Ce,Se,l,{})}}
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */
var Me,ze=(function(t){(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,n,o,i=this.items.concat(t),s=this.width-(i.length-1)*this.spacing,r=i.reduce((function(t,e){return t+e.aspectRatio}),0),l=s/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(s/t.aspectRatio,"justify"),!0):r<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):r>this.maxAspectRatio?0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,n=this.items.reduce((function(t,e){return t+e.aspectRatio}),0),o=e/this.targetRowHeight,Math.abs(r-l)>Math.abs(n-o)?(this.completeLayout(e/n,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,e){var n,o,i,s,r,l=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===e||["justify","center","left"].indexOf(e)<0)&&(e="left"),t!==(o=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)))?(this.height=o,n=c/o/(c/t)):(this.height=t,n=1),this.items.forEach((function(t){t.top=this.top,t.width=t.aspectRatio*this.height*n,t.height=this.height,t.left=l,l+=t.width+this.spacing}),this),"justify"===e?(l-=this.spacing+this.left,i=(l-this.width)/this.items.length,s=this.items.map((function(t,e){return Math.round((e+1)*i)})),1===this.items.length?this.items[0].width-=Math.round(i):this.items.forEach((function(t,e){e>0?(t.left-=s[e-1],t.width-=s[e]-s[e-1]):t.width-=s[e]}))):"center"===e&&(r=(this.width-l)/2,this.items.forEach((function(t){t.left+=r+this.spacing}),this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}}(Me={exports:{}},Me.exports),Me.exports);
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */function Ne(t,e){var n;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(n=!0),new ze({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:n,widowLayoutStyle:t.widowLayoutStyle})}function Ae(t,e,n){return e._rows.push(n),e._layoutItems=e._layoutItems.concat(n.getItems()),e._containerHeight+=n.height+t.boxSpacing.vertical,n.items}var Te=function(t,e){var n={},o={},i={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},s={},r={};return e=e||{},n=Object.assign(i,e),s.top=isNaN(parseFloat(n.containerPadding.top))?n.containerPadding:n.containerPadding.top,s.right=isNaN(parseFloat(n.containerPadding.right))?n.containerPadding:n.containerPadding.right,s.bottom=isNaN(parseFloat(n.containerPadding.bottom))?n.containerPadding:n.containerPadding.bottom,s.left=isNaN(parseFloat(n.containerPadding.left))?n.containerPadding:n.containerPadding.left,r.horizontal=isNaN(parseFloat(n.boxSpacing.horizontal))?n.boxSpacing:n.boxSpacing.horizontal,r.vertical=isNaN(parseFloat(n.boxSpacing.vertical))?n.boxSpacing:n.boxSpacing.vertical,n.containerPadding=s,n.boxSpacing=r,o._layoutItems=[],o._awakeItems=[],o._inViewportItems=[],o._leadingOrphans=[],o._trailingOrphans=[],o._containerHeight=n.containerPadding.top,o._rows=[],o._orphans=[],n._widowCount=0,function(t,e,n){var o,i,s,r=[];return t.forceAspectRatio&&n.forEach((function(e){e.forcedAspectRatio=!0,e.aspectRatio=t.forceAspectRatio})),n.some((function(n,s){if(isNaN(n.aspectRatio))throw new Error("Item "+s+" has an invalid aspect ratio");if(i||(i=Ne(t,e)),o=i.addItem(n),i.isLayoutComplete()){if(r=r.concat(Ae(t,e,i)),e._rows.length>=t.maxNumRows)return i=null,!0;if(i=Ne(t,e),!o&&(o=i.addItem(n),i.isLayoutComplete())){if(r=r.concat(Ae(t,e,i)),e._rows.length>=t.maxNumRows)return i=null,!0;i=Ne(t,e)}}})),i&&i.getItems().length&&t.showWidows&&(e._rows.length?(s=e._rows[e._rows.length-1].isBreakoutRow?e._rows[e._rows.length-1].targetRowHeight:e._rows[e._rows.length-1].height,i.forceComplete(!1,s)):i.forceComplete(!1),r=r.concat(Ae(t,e,i)),t._widowCount=i.getItems().length),e._containerHeight=e._containerHeight-t.boxSpacing.vertical,e._containerHeight=e._containerHeight+t.containerPadding.bottom,{containerHeight:e._containerHeight,widowCount:t._widowCount,boxes:e._layoutItems}}(n,o,t.map((function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}})))};function je(t){const e=Math.floor(Math.log(t)/Math.log(1024)),n=e<=1?0:2;return`${(t/Math.pow(1024,e)).toFixed(n)} ${["B","kB","MB","GB","TB"][e]}`}function Oe(t,e,n){return`/img/${e.match(/.{1,2}/g).slice(0,3).map((t=>"ad"==t?"a_":t)).join("/")}/${e}_${n}_${t}.jpg`}function Ee(t){let e,n,o,i,s,r,l,c,a,u=!t[3]&&De(t);return{c(){e=H("div"),u&&u.c(),n=C(),o=H("img"),A(o,"alt",i=t[0].title),A(o,"draggable","false"),A(o,"srcset",s=Oe(t[1],t[0].hash,t[0].uniq)+", "+`${Oe(t[1]+"2x",t[0].hash,t[0].uniq)} 2x`),o.src!==(r=Oe(t[1],t[0].hash,t[0].uniq))&&A(o,"src",r),A(o,"class","svelte-1lsjzcr"),A(e,"class","albumPhoto svelte-1lsjzcr"),q(e,"selected",t[4])},m(i,s){_(i,e,s),u&&u.m(e,null),k(e,n),k(e,o),l=!0,c||(a=M(o,"load",t[7]),c=!0)},p(t,c){t[3]?u&&(bt(),_t(u,1,1,(()=>{u=null})),xt()):u?(u.p(t,c),8&c&&kt(u,1)):(u=De(t),u.c(),kt(u,1),u.m(e,n)),(!l||1&c&&i!==(i=t[0].title))&&A(o,"alt",i),(!l||3&c&&s!==(s=Oe(t[1],t[0].hash,t[0].uniq)+", "+`${Oe(t[1]+"2x",t[0].hash,t[0].uniq)} 2x`))&&A(o,"srcset",s),(!l||3&c&&o.src!==(r=Oe(t[1],t[0].hash,t[0].uniq)))&&A(o,"src",r),16&c&&q(e,"selected",t[4])},i(t){l||(kt(u),l=!0)},o(t){_t(u),l=!1},d(t){t&&P(e),u&&u.d(),c=!1,a()}}}function De(t){let e,n,o,i,s,r,l;return{c(){e=H("img"),A(e,"class","preload svelte-1lsjzcr"),A(e,"draggable","false"),A(e,"alt",n=t[0].title),e.src!==(o="data:image/jpeg;base64,"+t[0].tinyJPEG)&&A(e,"src",o),A(e,"width",i=t[2].width+"px"),A(e,"height",s=t[2].height+"px")},m(t,n){_(t,e,n),l=!0},p(t,r){(!l||1&r&&n!==(n=t[0].title))&&A(e,"alt",n),(!l||1&r&&e.src!==(o="data:image/jpeg;base64,"+t[0].tinyJPEG))&&A(e,"src",o),(!l||4&r&&i!==(i=t[2].width+"px"))&&A(e,"width",i),(!l||4&r&&s!==(s=t[2].height+"px"))&&A(e,"height",s)},i(t){l||(r&&r.end(1),l=!0)},o(t){r=Rt(e,fe,{duration:200}),l=!1},d(t){t&&P(e),t&&r&&r.end()}}}function Be(t){let e,n,o=t[0]&&t[2]&&Ee(t);return{c(){o&&o.c(),e=I()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[0]&&t[2]?o?(o.p(t,n),5&n&&kt(o,1)):(o=Ee(t),o.c(),kt(o,1),o.m(e.parentNode,e)):o&&(bt(),_t(o,1,1,(()=>{o=null})),xt())},i(t){n||(kt(o),n=!0)},o(t){_t(o),n=!1},d(t){o&&o.d(t),t&&P(e)}}}function qe(t,e,n){let o;u(t,be,(t=>n(6,o=t)));let{photo:i}=e,{photoIdxInAlbum:s}=e,{size:r="medium"}=e,{dims:l}=e,c=!1,a=!1;return t.$$set=t=>{"photo"in t&&n(0,i=t.photo),"photoIdxInAlbum"in t&&n(5,s=t.photoIdxInAlbum),"size"in t&&n(1,r=t.size),"dims"in t&&n(2,l=t.dims)},t.$$.update=()=>{96&t.$$.dirty&&n(4,a=o.indexOf(s)>=0)},[i,r,l,c,a,s,o,()=>n(3,c=!0)]}class Ue extends At{constructor(t){super(),Nt(this,t,qe,Be,l,{photo:0,photoIdxInAlbum:5,size:1,dims:2})}}const Fe={};function We(t){let e,n,o,i,r,l,c,a,u,d,h,f,p,m,g,$,v,w,y,b;return{c(){e=H("div"),n=H("form"),o=H("label"),i=S("Album Name:\n                "),r=H("input"),l=C(),c=H("div"),a=H("label"),u=H("input"),d=S("\n                    Private"),h=C(),f=H("button"),p=S("Create Album"),g=C(),$=H("div"),v=S(t[3]),w=S(" "),A(r,"type","text"),r.disabled=t[2],A(r,"class","svelte-1fqfkob"),A(o,"class","svelte-1fqfkob"),A(u,"type","checkbox"),A(a,"class","svelte-1fqfkob"),A(c,"class","visibilityToggle"),A(f,"type","submit"),f.disabled=m=t[2]||t[1].length<=0,A(f,"class","svelte-1fqfkob"),A($,"class","new-album-message svelte-1fqfkob"),A(e,"class","new-album-prompt svelte-1fqfkob")},m(s,m){_(s,e,m),k(e,n),k(n,o),k(o,i),k(o,r),t[7](r),O(r,t[1]),k(n,l),k(n,c),k(c,a),k(a,u),u.checked=t[4],k(a,d),k(n,h),k(n,f),k(f,p),k(e,g),k(e,$),k($,v),k($,w),y||(b=[M(r,"input",t[8]),M(u,"change",t[9]),M(n,"submit",z(t[6]))],y=!0)},p(t,e){4&e&&(r.disabled=t[2]),2&e&&r.value!==t[1]&&O(r,t[1]),16&e&&(u.checked=t[4]),6&e&&m!==(m=t[2]||t[1].length<=0)&&(f.disabled=m),8&e&&j(v,t[3])},d(n){n&&P(e),t[7](null),y=!1,s(b)}}}function Je(t){let e,n;return e=new ge({props:{$$slots:{default:[We]},$$scope:{ctx:t}}}),e.$on("clickedOutside",t[10]),{c(){It(e.$$.fragment)},m(t,o){Mt(e,t,o),n=!0},p(t,[n]){const o={};4127&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function Ve(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};const i=Q();Y((()=>o(void 0,void 0,void 0,(function*(){n(1,r=""),n(3,c=""),yield ut(),s.focus()}))));let s=null,r="",l=!1,c="",a=!1;return[s,r,l,c,a,i,function(){return o(this,void 0,void 0,(function*(){n(2,l=!0);const t=yield _e("/album/new",{params:{title:r,isPrivate:a},method:"POST",authorize:!0});t.success?i("done",{newAlbumID:t.data.albumID}):n(3,c="Duplicate name!"),n(2,l=!1)}))},function(t){it[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(){r=this.value,n(1,r)},function(){a=this.checked,n(4,a)},()=>i("dismissed")]}class Ge extends At{constructor(t){super(),Nt(this,t,Ve,Je,l,{})}}function Ke(t,e,n){const o=t.slice();return o[19]=e[n],o}function Xe(e){let n,o;return n=new Ge({}),n.$on("dismissed",e[10]),n.$on("done",e[7]),{c(){It(n.$$.fragment)},m(t,e){Mt(n,t,e),o=!0},p:t,i(t){o||(kt(n.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),o=!1},d(t){zt(n,t)}}}function Ye(t){let e,n;return{c(){e=L("svg"),n=L("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M19 9l-7 7-7-7"),A(e,"class","w-6 h-6 svelte-1l35930"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){_(t,e,o),k(e,n)},d(t){t&&P(e)}}}function Ze(t){let e,n;return{c(){e=L("svg"),n=L("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M9 5l7 7-7 7"),A(e,"class","w-6 h-6 svelte-1l35930"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24"),A(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){_(t,e,o),k(e,n)},d(t){t&&P(e)}}}function Qe(t){let e,n,o,i,s,r=t[4],l=[];for(let e=0;e<r.length;e+=1)l[e]=en(Ke(t,r,e));return{c(){e=H("div"),e.innerHTML='<svg class="w-6 h-6 svelte-1l35930" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            New Album…',n=C();for(let t=0;t<l.length;t+=1)l[t].c();o=I(),A(e,"class","album menu-item svelte-1l35930")},m(r,c){_(r,e,c),_(r,n,c);for(let t=0;t<l.length;t+=1)l[t].m(r,c);_(r,o,c),i||(s=M(e,"click",t[12]),i=!0)},p(t,e){if(273&e){let n;for(r=t[4],n=0;n<r.length;n+=1){const i=Ke(t,r,n);l[n]?l[n].p(i,e):(l[n]=en(i),l[n].c(),l[n].m(o.parentNode,o))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&P(e),t&&P(n),R(l,t),t&&P(o),i=!1,s()}}}function tn(t){let e,n,o,i,s,r,l,c,a,u=t[19].title+"";function d(){return t[13](t[19])}return{c(){e=H("div"),n=L("svg"),o=L("path"),i=C(),s=H("div"),r=S(u),l=C(),A(o,"stroke-linecap","round"),A(o,"stroke-linejoin","round"),A(o,"stroke-width","2"),A(o,"d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"),A(n,"class","w-6 h-6 svelte-1l35930"),A(n,"fill","none"),A(n,"stroke","currentColor"),A(n,"viewBox","0 0 24 24"),A(n,"xmlns","http://www.w3.org/2000/svg"),A(s,"class","label svelte-1l35930"),A(e,"class","album menu-item svelte-1l35930")},m(t,u){_(t,e,u),k(e,n),k(n,o),k(e,i),k(e,s),k(s,r),k(e,l),c||(a=M(e,"click",d),c=!0)},p(e,n){t=e,16&n&&u!==(u=t[19].title+"")&&j(r,u)},d(t){t&&P(e),c=!1,a()}}}function en(t){let e,n=t[19].id!=t[0].id&&tn(t);return{c(){n&&n.c(),e=I()},m(t,o){n&&n.m(t,o),_(t,e,o)},p(t,o){t[19].id!=t[0].id?n?n.p(t,o):(n=tn(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&P(e)}}}function nn(t){let e,n,o,i,r,l,c,a,u,d,h,f,p,m,g,$,v,w,y=t[3].length+"",b=1==t[3].length?"":"s",x=t[6]&&Xe(t);function R(t,e){return t[5]?Ye:Ze}let L=R(t),I=L(t),z=t[5]&&Qe(t);return{c(){x&&x.c(),e=C(),n=H("div"),o=H("div"),i=S(y),r=S(" photo"),l=S(b),c=S(" selected"),a=C(),u=H("div"),I.c(),d=C(),h=H("div"),h.textContent="Move To",f=C(),z&&z.c(),p=C(),m=H("div"),m.innerHTML='<svg class="w-6 h-6 svelte-1l35930" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> \n        <div class="label svelte-1l35930">Delete</div>',A(o,"class","header menu-item svelte-1l35930"),A(h,"class","label svelte-1l35930"),A(u,"class","move menu-item svelte-1l35930"),A(m,"class","delete menu-item svelte-1l35930"),A(n,"class","contextMenu svelte-1l35930"),A(n,"style",g=`left: ${t[1]}px; top: ${t[2]}px`)},m(s,g){x&&x.m(s,g),_(s,e,g),_(s,n,g),k(n,o),k(o,i),k(o,r),k(o,l),k(o,c),k(n,a),k(n,u),I.m(u,null),k(u,d),k(u,h),k(n,f),z&&z.m(n,null),k(n,p),k(n,m),$=!0,v||(w=[M(u,"click",t[11]),M(m,"click",t[14])],v=!0)},p(t,[o]){t[6]?x?(x.p(t,o),64&o&&kt(x,1)):(x=Xe(t),x.c(),kt(x,1),x.m(e.parentNode,e)):x&&(bt(),_t(x,1,1,(()=>{x=null})),xt()),(!$||8&o)&&y!==(y=t[3].length+"")&&j(i,y),(!$||8&o)&&b!==(b=1==t[3].length?"":"s")&&j(l,b),L!==(L=R(t))&&(I.d(1),I=L(t),I&&(I.c(),I.m(u,d))),t[5]?z?z.p(t,o):(z=Qe(t),z.c(),z.m(n,p)):z&&(z.d(1),z=null),(!$||6&o&&g!==(g=`left: ${t[1]}px; top: ${t[2]}px`))&&A(n,"style",g)},i(t){$||(kt(x),$=!0)},o(t){_t(x),$=!1},d(t){x&&x.d(t),t&&P(e),t&&P(n),I.d(),z&&z.d(),v=!1,s(w)}}}function on(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};const i=et(Fe);const s=Q();function r(t){return o(this,void 0,void 0,(function*(){let e;e="number"==typeof t?t:t.id;for(let t of u){const n=yield _e("/photo/copy",{authorize:!0,method:"POST",params:{photoID:t.id,albumID:e}});if(!n.success){console.error("Couldn't copy photo to album.",n);continue}const o=yield _e("/album/remove",{authorize:!0,method:"POST",params:{photoID:t.id,albumID:d.id}});o.success||console.error("Couldn't remove photo from album.",o)}s("done")}))}function l(){return o(this,void 0,void 0,(function*(){for(let t of u){const e=yield _e("/photo/delete",{authorize:!0,method:"POST",params:{photoID:t.id}});e.success||console.error("Could not delete photo",e)}s("done")}))}Y((()=>{!function(){o(this,void 0,void 0,(function*(){const t=yield _e("/album/list",{authorize:!0});t.success?n(4,h=t.data):console.error(t)}))}(),n(1,c=i.clickLocation[0]),n(2,a=i.clickLocation[1]),n(3,u=i.getSelectedPhotos())}));let c=0,a=0,u=[],{currentAlbum:d}=e,h=[],f=!1,p=!1;return t.$$set=t=>{"currentAlbum"in t&&n(0,d=t.currentAlbum)},[d,c,a,u,h,f,p,function(t){n(6,p=!1),r(t.detail.newAlbumID)},r,l,()=>n(6,p=!1),()=>n(5,f=!f),()=>n(6,p=!0),t=>r(t),()=>l()]}class sn extends At{constructor(t){super(),Nt(this,t,on,nn,l,{currentAlbum:0})}}function rn(e){let n,o,i,s,r,l,c,a,u,d,h,f,p,m,g,$,v,w,y,b,x,R,L=e[0].file.name+"",I=je(e[0].file.size)+"";return{c(){n=H("div"),o=H("div"),i=H("div"),s=H("div"),r=H("span"),r.textContent="Name:",l=C(),c=S(L),a=C(),u=H("div"),d=H("span"),d.textContent="Size:",h=C(),f=S(I),p=C(),m=H("div"),g=H("img"),v=C(),w=H("div"),y=H("progress"),b=C(),x=H("div"),R=S(e[5]),A(r,"class","label svelte-kncakv"),A(s,"class","name"),A(d,"class","label svelte-kncakv"),A(u,"class","size"),A(i,"class","meta svelte-kncakv"),g.src!==($=e[3])&&A(g,"src",$),A(g,"alt",e[4]),A(g,"class","svelte-kncakv"),A(m,"class","preview svelte-kncakv"),A(o,"class","info svelte-kncakv"),A(y,"class","svelte-kncakv"),A(x,"class","status svelte-kncakv"),A(w,"class","status svelte-kncakv"),A(n,"class","fileUploader svelte-kncakv")},m(t,$){_(t,n,$),k(n,o),k(o,i),k(i,s),k(s,r),k(s,l),k(s,c),k(i,a),k(i,u),k(u,d),k(u,h),k(u,f),k(o,p),k(o,m),k(m,g),k(n,v),k(n,w),k(w,y),e[7](y),k(w,b),k(w,x),k(x,R),e[8](n)},p(t,[e]){1&e&&L!==(L=t[0].file.name+"")&&j(c,L),1&e&&I!==(I=je(t[0].file.size)+"")&&j(f,I),8&e&&g.src!==($=t[3])&&A(g,"src",$),16&e&&A(g,"alt",t[4]),32&e&&j(R,t[5])},i:t,o:t,d(t){t&&P(n),e[7](null),e[8](null)}}}function ln(t,e,n){let o;u(t,ye,(t=>n(9,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};let s,{uploadStatus:r}=e;const l=Q();function c(){return i(this,void 0,void 0,(function*(){if(r.status>0)return;n(0,r.status=1,r),n(5,p="Uploading…"),o||s.scrollIntoView({behavior:"smooth",block:"center"});const t=yield async function(t,e=null,n=null){return new Promise(((o,i)=>{0==a(ve).length&&o({success:!1,code:403,data:{error:"Unauthorized"}});const s=t.file,r=`${a(we).apiUri}/upload`,l=new XMLHttpRequest,c=new FormData;l.upload.onprogress=t=>{t.lengthComputable&&e&&e(t.loaded/t.total)},l.upload.onload=t=>{n&&n(!0)},l.upload.onerror=t=>{n&&n(!1)},l.upload.onabort=t=>{n&&n(!1)},l.onload=t=>{l.status>=200&&l.status<300?o({success:!0,code:l.status,data:JSON.parse(l.responseText)}):o({success:!1,code:l.status,data:JSON.parse(l.responseText)})},l.onerror=t=>{o({success:!1,code:500,data:{error:l.responseText}})},l.open("POST",r,!0),l.setRequestHeader("Authorization",`Bearer ${a(ve)}`);const u={order:t.index};null!=t.targetAlbum&&(u.albumID=t.targetAlbum),c.append("data",JSON.stringify(u)),c.append("photoUp",s),l.send(c)}))}(r,(t=>n(1,d.value=t,d)),(t=>{n(5,p="Processing…"),d.removeAttribute("value")}));n(1,d.value=1,d),t.success?(n(5,p="Done!"),n(0,r.status=2,r),l("fileUploadDone")):(n(5,p="Failed :("),n(0,r.status=3,r),l("fileUploadFailed"))}))}Y((()=>i(void 0,void 0,void 0,(function*(){n(0,r.startUploadCallback=()=>c(),r),n(1,d.value=0,d);const t=new FileReader;t.readAsDataURL(r.file),t.onloadend=()=>{n(3,h=t.result),n(4,f=r.file.name)}}))));let d,h=null,f="",p="Pending…";return t.$$set=t=>{"uploadStatus"in t&&n(0,r=t.uploadStatus)},t.$$.update=()=>{3&t.$$.dirty&&d&&0==r.status&&n(1,d.value=0,d)},[r,d,s,h,f,p,c,function(t){it[t?"unshift":"push"]((()=>{d=t,n(1,d),n(0,r)}))},function(t){it[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class cn extends At{constructor(t){super(),Nt(this,t,ln,rn,l,{uploadStatus:0,startUpload:6})}get startUpload(){return this.$$.ctx[6]}}function an(t,e,n){const o=t.slice();return o[17]=e[n],o}function un(t){let e,n,o,i,r,l,c,a;function u(t,e){return t[2]>0?hn:dn}let d=u(t),h=d(t);return{c(){e=H("div"),h.c(),n=C(),o=H("div"),i=H("div"),i.innerHTML='<svg class="w-6 h-6 svelte-11d3o8p" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"></path></svg>\n                    Upload',r=C(),l=H("div"),l.innerHTML='<svg class="w-6 h-6 svelte-11d3o8p" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n\n                    Cancel',A(i,"class","yes svelte-11d3o8p"),A(l,"class","no svelte-11d3o8p"),A(o,"class","yesno svelte-11d3o8p"),A(e,"class","confirm svelte-11d3o8p")},m(s,u){_(s,e,u),h.m(e,null),k(e,n),k(e,o),k(o,i),k(o,r),k(o,l),c||(a=[M(i,"click",t[7]),M(l,"click",t[9])],c=!0)},p(t,o){d===(d=u(t))&&h?h.p(t,o):(h.d(1),h=d(t),h&&(h.c(),h.m(e,n)))},d(t){t&&P(e),h.d(),c=!1,s(a)}}}function dn(t){let e,n,o,i,s,r=t[0].length+"",l=1==t[0].length?"":"s";return{c(){e=S("Upload "),n=S(r),o=S(" image"),i=S(l),s=S("?")},m(t,r){_(t,e,r),_(t,n,r),_(t,o,r),_(t,i,r),_(t,s,r)},p(t,e){1&e&&r!==(r=t[0].length+"")&&j(n,r),1&e&&l!==(l=1==t[0].length?"":"s")&&j(i,l)},d(t){t&&P(e),t&&P(n),t&&P(o),t&&P(i),t&&P(s)}}}function hn(t){let e,n,o=1==t[2]?"This image ":"These images ";return{c(){e=S(o),n=S("did not upload\n                successfully. Do you want to try again?")},m(t,o){_(t,e,o),_(t,n,o)},p(t,n){4&n&&o!==(o=1==t[2]?"This image ":"These images ")&&j(e,o)},d(t){t&&P(e),t&&P(n)}}}function fn(t){let e,n,o=t[1],i=[];for(let e=0;e<o.length;e+=1)i[e]=pn(an(t,o,e));const s=t=>_t(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=I()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);_(t,e,o),n=!0},p(t,n){if(98&n){let r;for(o=t[1],r=0;r<o.length;r+=1){const s=an(t,o,r);i[r]?(i[r].p(s,n),kt(i[r],1)):(i[r]=pn(s),i[r].c(),kt(i[r],1),i[r].m(e.parentNode,e))}for(bt(),r=o.length;r<i.length;r+=1)s(r);xt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)kt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)_t(i[t]);n=!1},d(t){R(i,t),t&&P(e)}}}function pn(t){let e,n;return e=new cn({props:{uploadStatus:t[17]}}),e.$on("fileUploadDone",t[5]),e.$on("fileUploadFailed",t[6]),{c(){It(e.$$.fragment)},m(t,o){Mt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.uploadStatus=t[17]),e.$set(o)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function mn(t){let e,n,o,i,s,r=t[3]&&un(t),l=t[1]&&fn(t);return{c(){e=H("div"),r&&r.c(),n=C(),l&&l.c(),A(e,"class","fileUploadList svelte-11d3o8p")},m(c,a){_(c,e,a),r&&r.m(e,null),k(e,n),l&&l.m(e,null),o=!0,i||(s=M(e,"click",t[10]),i=!0)},p(t,[o]){t[3]?r?r.p(t,o):(r=un(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),t[1]?l?(l.p(t,o),2&o&&kt(l,1)):(l=fn(t),l.c(),kt(l,1),l.m(e,null)):l&&(bt(),_t(l,1,1,(()=>{l=null})),xt())},i(t){o||(kt(l),o=!0)},o(t){_t(l),o=!1},d(t){t&&P(e),r&&r.d(),l&&l.d(),i=!1,s()}}}function gn(t){return t.preventDefault(),t.returnValue="","..."}function $n(t,e,n){let o,i;u(t,ye,(t=>n(4,o=t))),u(t,ke,(t=>n(13,i=t)));var s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};let r,{fileList:l}=e,c=0,a=0;function d(){for(;a<4&&!(c>=r.length);)r[c].startUploadCallback(),c+=1,a+=1}function h(){a-=1,0==a&&c>=r.length?function(){if(0==f)return void m("finished");n(1,r=r.filter((t=>3==t.status))),n(3,p=!0)}():d()}let f=0;let p=!0;Y((()=>s(void 0,void 0,void 0,(function*(){g(ye,o=!1,o);let t=null,e=1;if(null!=i){t=i.id;const n=i.photos.map((t=>t.ordering));e=0==n.length?1:Math.max(...n)+1}n(1,r=l.map(((n,o)=>({file:n,status:0,index:o+e,targetAlbum:t}))))})))),Z((()=>{window.removeEventListener("beforeunload",gn)}));const m=Q();return t.$$set=t=>{"fileList"in t&&n(0,l=t.fileList)},[l,r,f,p,o,h,function(){n(2,f+=1),h()},function(){return s(this,void 0,void 0,(function*(){window.addEventListener("beforeunload",gn),n(2,f=0),c=0,a=0,n(3,p=!1);for(let t=0;t<r.length;t++)n(1,r[t].status=0,r);yield ut(),yield new Promise((t=>setTimeout(t,400))),g(ye,o=!1,o),d()}))},m,()=>m("dismissed"),()=>g(ye,o=!0,o)]}class vn extends At{constructor(t){super(),Nt(this,t,$n,mn,l,{fileList:0})}}function wn(t){let e,n,o,i;const s=[bn,yn],r=[];function l(t,e){return t[0]?0:1}return e=l(t),n=r[e]=s[e](t),{c(){n.c(),o=I()},m(t,n){r[e].m(t,n),_(t,o,n),i=!0},p(t,i){let c=e;e=l(t),e===c?r[e].p(t,i):(bt(),_t(r[c],1,1,(()=>{r[c]=null})),xt(),n=r[e],n?n.p(t,i):(n=r[e]=s[e](t),n.c()),kt(n,1),n.m(o.parentNode,o))},i(t){i||(kt(n),i=!0)},o(t){_t(n),i=!1},d(t){r[e].d(t),t&&P(o)}}}function yn(n){let o,i,s,l,c;return{c(){o=H("div"),i=H("div"),i.innerHTML='<div class="dragIndicatorOutline svelte-d3lznb"></div>',A(i,"class","dragIndicator svelte-d3lznb"),A(o,"class","uploadZone svelte-d3lznb")},m(t,e){_(t,o,e),k(o,i),c=!0},p:t,i(n){c||(dt((()=>{l&&l.end(1),s||(s=function(n,o,i){let s,l,c=o(n,i),a=!1,u=0;function d(){s&&G(n,s)}function h(){const{delay:o=0,duration:i=300,easing:r=e,tick:h=t,css:f}=c||Pt;f&&(s=V(n,0,1,i,o,r,f,u++)),h(0,1);const p=v()+o,m=p+i;l&&l.abort(),a=!0,dt((()=>vt(n,!0,"start"))),l=x((t=>{if(a){if(t>=m)return h(1,0),vt(n,!0,"end"),d(),a=!1;if(t>=p){const e=r((t-p)/i);h(e,1-e)}}return a}))}let f=!1;return{start(){f||(G(n),r(c)?(c=c(),$t().then(h)):h())},invalidate(){f=!1},end(){a&&(d(),a=!1)}}}(i,fe,{duration:100})),s.start()})),c=!0)},o(t){s&&s.invalidate(),l=Rt(i,fe,{duration:200}),c=!1},d(t){t&&P(o),t&&l&&l.end()}}}function bn(t){let e,n,o;return n=new vn({props:{fileList:t[0]}}),n.$on("finished",t[4]),n.$on("dismissed",t[5]),{c(){e=H("div"),It(n.$$.fragment),A(e,"class","uploadZone svelte-d3lznb")},m(t,i){_(t,e,i),Mt(n,e,null),o=!0},p(t,e){const o={};1&e&&(o.fileList=t[0]),n.$set(o)},i(t){o||(kt(n.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),o=!1},d(t){t&&P(e),zt(n)}}}function xn(t){let e,n,o,i,r=(t[1]>0||null!=t[0])&&t[2]&&wn(t);return{c(){r&&r.c(),e=I()},m(s,l){r&&r.m(s,l),_(s,e,l),n=!0,o||(i=[M(window,"dragover",z(t[6])),M(window,"dragenter",z(t[7])),M(window,"dragleave",z(t[8])),M(window,"drop",z(t[3]))],o=!0)},p(t,[n]){(t[1]>0||null!=t[0])&&t[2]?r?(r.p(t,n),7&n&&kt(r,1)):(r=wn(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&(bt(),_t(r,1,1,(()=>{r=null})),xt())},i(t){n||(kt(r),n=!0)},o(t){_t(r),n=!1},d(t){r&&r.d(t),t&&P(e),o=!1,s(i)}}}function kn(t,e,n){let o;u(t,$e,(t=>n(2,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};let s;const r=Q();let l=0;return[s,l,o,function(t){return i(this,void 0,void 0,(function*(){n(1,l=0);let e=[...t.dataTransfer.files];e=e.filter((t=>"image/jpeg"==t.type)),0!=e.length&&n(0,s=e)}))},function(){r("done",{numFiles:s.length}),n(0,s=null)},function(){n(0,s=null),r("done",{numFiles:0})},function(e){nt(t,e)},()=>n(1,++l),()=>n(1,--l)]}class _n extends At{constructor(t){super(),Nt(this,t,kn,xn,l,{})}}const{window:Pn}=Lt;function Rn(t,e,n){const o=t.slice();return o[34]=e[n],o[36]=n,o}function Hn(t){let e,n,o,i,s,r,l,c,a,u,d,h=t[1].title+"",f=t[2]&&Ln(t),p=t[3]&&Sn(t),m=t[4]&&Cn(t);return{c(){f&&f.c(),e=C(),n=H("h2"),o=S(h),i=C(),s=H("div"),p&&p.c(),r=C(),m&&m.c(),A(n,"class","svelte-14lncuq"),A(s,"class","albumPhotos svelte-14lncuq"),A(s,"style",l=`height: ${t[4]?.containerHeight||0}px;`),dt((()=>t[23].call(s))),q(s,"selectionMode",t[5])},m(l,h){f&&f.m(l,h),_(l,e,h),_(l,n,h),k(n,o),_(l,i,h),_(l,s,h),p&&p.m(s,null),k(s,r),m&&m.m(s,null),c=B(s,t[23].bind(s)),a=!0,u||(d=M(s,"contextmenu",t[12]),u=!0)},p(t,n){t[2]?f?(f.p(t,n),4&n[0]&&kt(f,1)):(f=Ln(t),f.c(),kt(f,1),f.m(e.parentNode,e)):f&&(bt(),_t(f,1,1,(()=>{f=null})),xt()),(!a||2&n[0])&&h!==(h=t[1].title+"")&&j(o,h),t[3]?p?(p.p(t,n),8&n[0]&&kt(p,1)):(p=Sn(t),p.c(),kt(p,1),p.m(s,r)):p&&(bt(),_t(p,1,1,(()=>{p=null})),xt()),t[4]?m?(m.p(t,n),16&n[0]&&kt(m,1)):(m=Cn(t),m.c(),kt(m,1),m.m(s,null)):m&&(bt(),_t(m,1,1,(()=>{m=null})),xt()),(!a||16&n[0]&&l!==(l=`height: ${t[4]?.containerHeight||0}px;`))&&A(s,"style",l),32&n[0]&&q(s,"selectionMode",t[5])},i(t){a||(kt(f),kt(p),kt(m),a=!0)},o(t){_t(f),_t(p),_t(m),a=!1},d(t){f&&f.d(t),t&&P(e),t&&P(n),t&&P(i),t&&P(s),p&&p.d(),m&&m.d(),c(),u=!1,d()}}}function Ln(e){let n,o;return n=new _n({}),n.$on("done",e[19]),{c(){It(n.$$.fragment)},m(t,e){Mt(n,t,e),o=!0},p:t,i(t){o||(kt(n.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),o=!1},d(t){zt(n,t)}}}function Sn(t){let e,n;return e=new sn({props:{currentAlbum:t[1]}}),e.$on("done",t[13]),{c(){It(e.$$.fragment)},m(t,o){Mt(e,t,o),n=!0},p(t,n){const o={};2&n[0]&&(o.currentAlbum=t[1]),e.$set(o)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function Cn(t){let e,n,o=t[1].photos,i=[];for(let e=0;e<o.length;e+=1)i[e]=In(Rn(t,o,e));const s=t=>_t(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=I()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);_(t,e,o),n=!0},p(t,n){if(19538&n[0]){let r;for(o=t[1].photos,r=0;r<o.length;r+=1){const s=Rn(t,o,r);i[r]?(i[r].p(s,n),kt(i[r],1)):(i[r]=In(s),i[r].c(),kt(i[r],1),i[r].m(e.parentNode,e))}for(bt(),r=o.length;r<i.length;r+=1)s(r);xt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)kt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)_t(i[t]);n=!1},d(t){R(i,t),t&&P(e)}}}function In(t){let e,n,o,i,r,l,c;function a(...e){return t[20](t[36],...e)}function u(...e){return t[21](t[36],...e)}function d(...e){return t[22](t[36],...e)}return n=new Ue({props:{photo:t[34],photoIdxInAlbum:t[36],size:"medium",dims:t[4].boxes[t[36]]}}),{c(){e=H("div"),It(n.$$.fragment),o=C(),A(e,"class","albumSlot svelte-14lncuq"),A(e,"style",i=`top: ${t[4].boxes[t[36]].top}px; left: ${t[4].boxes[t[36]].left}px; width: ${t[4].boxes[t[36]].width}px; height: ${t[4].boxes[t[36]].height}px;`),A(e,"data-pidx",t[36]),A(e,"draggable","true"),q(e,"dragged",t[6]===t[34])},m(t,i){_(t,e,i),Mt(n,e,null),k(e,o),r=!0,l||(c=[M(e,"click",a),M(e,"contextmenu",u),M(e,"dragstart",z(d))],l=!0)},p(o,s){t=o;const l={};2&s[0]&&(l.photo=t[34]),16&s[0]&&(l.dims=t[4].boxes[t[36]]),n.$set(l),(!r||16&s[0]&&i!==(i=`top: ${t[4].boxes[t[36]].top}px; left: ${t[4].boxes[t[36]].left}px; width: ${t[4].boxes[t[36]].width}px; height: ${t[4].boxes[t[36]].height}px;`))&&A(e,"style",i),66&s[0]&&q(e,"dragged",t[6]===t[34])},i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){_t(n.$$.fragment,t),r=!1},d(t){t&&P(e),zt(n),l=!1,s(c)}}}function Mn(t){let e,n,o,i,r=t[1]&&Hn(t);return{c(){r&&r.c(),e=I()},m(s,l){r&&r.m(s,l),_(s,e,l),n=!0,o||(i=[M(Pn,"keydown",t[9]),M(Pn,"keyup",t[8]),M(Pn,"mousemove",t[15]),M(Pn,"mouseup",t[16])],o=!0)},p(t,n){t[1]?r?(r.p(t,n),2&n[0]&&kt(r,1)):(r=Hn(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&(bt(),_t(r,1,1,(()=>{r=null})),xt())},i(t){n||(kt(r),n=!0)},o(t){_t(r),n=!1},d(t){r&&r.d(t),t&&P(e),o=!1,s(i)}}}function zn(t){return window.navigator.platform.startsWith("Mac")?"Meta"==t.key:"Control"==t.key}function Nn(t){return window.navigator.platform.startsWith("Mac")?t.metaKey:t.ctrlKey}function An(t,e,n){let o,i,s,r;u(t,$e,(t=>n(2,o=t))),u(t,be,(t=>n(18,i=t))),u(t,ke,(t=>n(29,s=t))),u(t,xe,(t=>n(30,r=t)));var l=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};let{identifier:c}=e;function a(t){return l(this,void 0,void 0,(function*(){const t=yield _e(`/album/view/${c}`,{params:{previews:1},method:"POST",authorize:!0});t.success?n(1,w=t.data):404==t.code?Ut("/",{replace:!0}):console.error(t)}))}function d(t){if(!t||!w)return;const e=w.photos.map((t=>t.aspect));n(4,y=Te(e,{targetRowHeight:300,containerWidth:t,containerPadding:10,widowLayoutStyle:"center"}))}function h(t,e){if(!o)return;if(m)return void n(3,m=!1);if(!Nn(t))return;const s=i.indexOf(e);g(be,i=-1!=s?i.filter((t=>t!=e)):[...i,e],i)}let f,p=[],m=!1,$=[0,0];function v(t,e){o&&0==i.length&&g(be,i=[e],i)}tt(Fe,{clickLocation:$,getSelectedPhotos:()=>p});let w=null,y=null;Y((()=>l(void 0,void 0,void 0,(function*(){yield a(),g(ke,s=w,s)})))),Z((()=>{g(ke,s=null,s),g(xe,r=null,r)}));let b=!1,x=null,k=null,_=0,P=0;function R(t,e){g(be,i=[],i),g(xe,r=w.photos[e],r),n(6,x=w.photos[e]),k=document.createElement("div"),k.dataset.pidx=t.target.dataset.pidx,k.style.position="fixed",k.style.width="200px",k.style.height="200px",k.style.display="flex";const o=new Image;o.style.maxWidth="200px",o.style.maxHeight="200px",o.style.margin="auto",o.src=Oe("medium",x.hash,x.uniq),k.append(o),_=100,P=100,document.body.append(k),k.style.left=t.pageX-_+"px",k.style.top=t.pageY-P+"px"}return t.$$set=t=>{"identifier"in t&&n(17,c=t.identifier)},t.$$.update=()=>{262146&t.$$.dirty[0]&&(p=i.map((t=>w.photos[t]))),3&t.$$.dirty[0]&&w&&d(f),6&t.$$.dirty[0]&&w&&w.isPrivate&&!o&&Ut("/",{replace:!0})},[f,w,o,m,y,b,x,a,function(t){o&&zn(t)&&n(5,b=!1)},function(t){o&&(zn(t)&&n(5,b=!0),m||("a"==t.key&&Nn(t)&&(g(be,i=[...Array(w.photos.length).keys()],i),t.preventDefault()),"d"==t.key&&Nn(t)&&(g(be,i=[],i),t.preventDefault())))},h,v,function(t){o&&(t.preventDefault(),m?n(3,m=!1):($[0]=t.clientX,$[1]=t.clientY,n(3,m=!0)))},function(t){n(3,m=!1),g(be,i=[],i),a()},R,function(t){if(null!=k){k.style.left=t.pageX-_+"px",k.style.top=t.pageY-P+"px",k.style.display="none";const e=document.elementFromPoint(t.clientX,t.clientY).closest(".albumSlot");null!=e&&e.dataset.pidx!=k.dataset.pidx&&(w.photos.splice(Number(e.dataset.pidx),0,w.photos.splice(Number(k.dataset.pidx),1)[0]),k.dataset.pidx=e.dataset.pidx,d(f),n(1,w)),k.style.display="flex"}},function(t){if(null!=k){n(6,x=null),k.remove(),k=null;!function(t){l(this,void 0,void 0,(function*(){const e=yield _e(`/album/reorder/${c}`,{params:{newOrdering:t},method:"POST",authorize:!0});e.success||console.error(e)}))}(w.photos.map((t=>t.id)))}},c,i,()=>a(),(t,e)=>h(e,t),(t,e)=>v(0,t),(t,e)=>R(e,t),function(){f=this.clientWidth,n(0,f)}]}class Tn extends At{constructor(t){super(),Nt(this,t,An,Mn,l,{identifier:17},[-1,-1])}}function jn(t,e,n){const o=t.slice();return o[9]=e[n],o}function On(e){let n,o;return n=new _n({}),n.$on("done",e[4]),{c(){It(n.$$.fragment)},m(t,e){Mt(n,t,e),o=!0},p:t,i(t){o||(kt(n.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),o=!1},d(t){zt(n,t)}}}function En(e){let n,o;return n=new Ge({}),n.$on("dismissed",e[5]),n.$on("done",e[6]),{c(){It(n.$$.fragment)},m(t,e){Mt(n,t,e),o=!0},p:t,i(t){o||(kt(n.$$.fragment,t),o=!0)},o(t){_t(n.$$.fragment,t),o=!1},d(t){zt(n,t)}}}function Dn(e){let n,o,i;return{c(){n=H("div"),n.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',A(n,"class","addAlbum svelte-v1urai"),A(n,"title","Add Album")},m(t,s){_(t,n,s),o||(i=M(n,"click",e[7]),o=!0)},p:t,d(t){t&&P(n),o=!1,i()}}}function Bn(t){let e,n,o=t[1],i=[];for(let e=0;e<o.length;e+=1)i[e]=Un(jn(t,o,e));const s=t=>_t(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=I()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);_(t,e,o),n=!0},p(t,n){if(2&n){let r;for(o=t[1],r=0;r<o.length;r+=1){const s=jn(t,o,r);i[r]?(i[r].p(s,n),kt(i[r],1)):(i[r]=Un(s),i[r].c(),kt(i[r],1),i[r].m(e.parentNode,e))}for(bt(),r=o.length;r<i.length;r+=1)s(r);xt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)kt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)_t(i[t]);n=!1},d(t){R(i,t),t&&P(e)}}}function qn(t){let e,n=t[9].title+"";return{c(){e=S(n)},m(t,n){_(t,e,n)},p(t,o){2&o&&n!==(n=t[9].title+"")&&j(e,n)},d(t){t&&P(e)}}}function Un(t){let e,n,o,i;return n=new he({props:{to:`album/${t[9].title}`,$$slots:{default:[qn]},$$scope:{ctx:t}}}),{c(){e=H("div"),It(n.$$.fragment),o=C(),A(e,"class","navAlbum svelte-v1urai")},m(t,s){_(t,e,s),Mt(n,e,null),k(e,o),i=!0},p(t,e){const o={};2&e&&(o.to=`album/${t[9].title}`),4098&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){i||(kt(n.$$.fragment,t),i=!0)},o(t){_t(n.$$.fragment,t),i=!1},d(t){t&&P(e),zt(n)}}}function Fn(t){let e,n,o,i,s,r,l,c,a=t[0]&&On(t),u=t[2]&&En(t),d=t[0]&&Dn(t),h=t[1]&&Bn(t);return{c(){a&&a.c(),e=C(),n=H("div"),u&&u.c(),o=C(),i=H("div"),s=H("h2"),s.textContent="Albums",r=C(),d&&d.c(),l=C(),h&&h.c(),A(s,"class","svelte-v1urai"),A(i,"class","header svelte-v1urai"),A(n,"class","albumList svelte-v1urai")},m(t,f){a&&a.m(t,f),_(t,e,f),_(t,n,f),u&&u.m(n,null),k(n,o),k(n,i),k(i,s),k(i,r),d&&d.m(i,null),k(n,l),h&&h.m(n,null),c=!0},p(t,[s]){t[0]?a?(a.p(t,s),1&s&&kt(a,1)):(a=On(t),a.c(),kt(a,1),a.m(e.parentNode,e)):a&&(bt(),_t(a,1,1,(()=>{a=null})),xt()),t[2]?u?(u.p(t,s),4&s&&kt(u,1)):(u=En(t),u.c(),kt(u,1),u.m(n,o)):u&&(bt(),_t(u,1,1,(()=>{u=null})),xt()),t[0]?d?d.p(t,s):(d=Dn(t),d.c(),d.m(i,null)):d&&(d.d(1),d=null),t[1]?h?(h.p(t,s),2&s&&kt(h,1)):(h=Bn(t),h.c(),kt(h,1),h.m(n,null)):h&&(bt(),_t(h,1,1,(()=>{h=null})),xt())},i(t){c||(kt(a),kt(u),kt(h),c=!0)},o(t){_t(a),_t(u),_t(h),c=!1},d(t){a&&a.d(t),t&&P(e),t&&P(n),u&&u.d(),d&&d.d(),h&&h.d()}}}function Wn(t,e,n){let o;u(t,$e,(t=>n(0,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};function s(t){return i(this,void 0,void 0,(function*(){console.log("getting album list");const t=yield _e("/album/list",{authorize:!0});t.success?n(1,r=t.data):console.error(t)}))}let r,l=!1;Y((()=>{s()}));return t.$$.update=()=>{1&t.$$.dirty&&s()},[o,r,l,s,function(t){t.detail.numFiles>0&&Ut("/album/Unsorted")},()=>n(2,l=!1),()=>{n(2,l=!1),s()},()=>n(2,l=!0)]}class Jn extends At{constructor(t){super(),Nt(this,t,Wn,Fn,l,{})}}function Vn(t){let e,n,o,i,s,r,l,c,a,u,d,h,f,p=!t[1]&&Gn(t);return{c(){e=H("div"),n=H("div"),p&&p.c(),o=C(),i=H("img"),A(i,"alt",s=t[0].title),A(i,"srcset",r=Oe(Xn,t[0].hash,t[0].uniq)+", "+`${Oe(Xn+"2x",t[0].hash,t[0].uniq)} 2x`),i.src!==(l=Oe(Xn,t[0].hash,t[0].uniq))&&A(i,"src",l),A(i,"style",c=`width: ${t[4]}px; height: ${t[5]}px;`),A(i,"class","svelte-e1g5xm"),A(n,"class","doubleLoader svelte-e1g5xm"),A(n,"style",a=`width: ${t[4]}px; height: ${t[5]}px;`),A(e,"class","fullPhoto svelte-e1g5xm"),dt((()=>t[8].call(e)))},m(s,r){_(s,e,r),k(e,n),p&&p.m(n,null),k(n,o),k(n,i),u=B(e,t[8].bind(e)),d=!0,h||(f=M(i,"load",t[7]),h=!0)},p(t,e){t[1]?p&&(bt(),_t(p,1,1,(()=>{p=null})),xt()):p?(p.p(t,e),2&e&&kt(p,1)):(p=Gn(t),p.c(),kt(p,1),p.m(n,o)),(!d||1&e&&s!==(s=t[0].title))&&A(i,"alt",s),(!d||1&e&&r!==(r=Oe(Xn,t[0].hash,t[0].uniq)+", "+`${Oe(Xn+"2x",t[0].hash,t[0].uniq)} 2x`))&&A(i,"srcset",r),(!d||1&e&&i.src!==(l=Oe(Xn,t[0].hash,t[0].uniq)))&&A(i,"src",l),(!d||48&e&&c!==(c=`width: ${t[4]}px; height: ${t[5]}px;`))&&A(i,"style",c),(!d||48&e&&a!==(a=`width: ${t[4]}px; height: ${t[5]}px;`))&&A(n,"style",a)},i(t){d||(kt(p),d=!0)},o(t){_t(p),d=!1},d(t){t&&P(e),p&&p.d(),u(),h=!1,f()}}}function Gn(t){let e,n,o,i,s,r;return{c(){e=H("img"),A(e,"class","preload svelte-e1g5xm"),A(e,"alt",n=t[0].title),e.src!==(o="data:image/jpeg;base64,"+t[0].tinyJPEG)&&A(e,"src",o),A(e,"style",i=`width: ${t[4]}px; height: ${t[5]}px;`)},m(t,n){_(t,e,n),r=!0},p(t,s){(!r||1&s&&n!==(n=t[0].title))&&A(e,"alt",n),(!r||1&s&&e.src!==(o="data:image/jpeg;base64,"+t[0].tinyJPEG))&&A(e,"src",o),(!r||48&s&&i!==(i=`width: ${t[4]}px; height: ${t[5]}px;`))&&A(e,"style",i)},i(t){r||(s&&s.end(1),r=!0)},o(t){s=Rt(e,fe,{duration:200}),r=!1},d(t){t&&P(e),t&&s&&s.end()}}}function Kn(t){let e,n,o=t[0]&&Vn(t);return{c(){o&&o.c(),e=I()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&kt(o,1)):(o=Vn(t),o.c(),kt(o,1),o.m(e.parentNode,e)):o&&(bt(),_t(o,1,1,(()=>{o=null})),xt())},i(t){n||(kt(o),n=!0)},o(t){_t(o),n=!1},d(t){o&&o.d(t),t&&P(e)}}}const Xn="large";function Yn(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function l(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,l)}c((o=o.apply(t,e||[])).next())}))};Y((()=>o(void 0,void 0,void 0,(function*(){null==s&&(yield function(){return o(this,void 0,void 0,(function*(){const t=yield _e(`/photo/view/${i}`,{method:"POST",params:{preview:1}});t.success?n(0,s=t.data):console.error("Couldn't load photo.",t)}))}(),l/c>1?(n(5,u=c),n(4,a=c*s.aspect)):(n(4,a=l),n(5,u=l/s.aspect)))}))));let{photoID:i}=e,{photo:s}=e,r=!1,l=0,c=0,a=0,u=0;return t.$$set=t=>{"photoID"in t&&n(6,i=t.photoID),"photo"in t&&n(0,s=t.photo)},[s,r,l,c,a,u,i,()=>n(1,r=!0),function(){l=this.clientWidth,c=this.clientHeight,n(2,l),n(3,c)}]}class Zn extends At{constructor(t){super(),Nt(this,t,Yn,Kn,l,{photoID:6,photo:0})}}function Qn(t){let e;return{c(){e=H("h1"),e.textContent="Pozzo",A(e,"class","svelte-1mw4kur")},m(t,n){_(t,e,n)},d(t){t&&P(e)}}}function to(t){let e,n,o,i,s,r,l,c,a,u,d,h,f,p;return n=new he({props:{to:"/",$$slots:{default:[Qn]},$$scope:{ctx:t}}}),i=new Ie({}),l=new ae({props:{path:"album/:identifier",component:Tn}}),a=new ae({props:{path:"album/:albumIdentifier/:photoID",component:Zn}}),d=new ae({props:{path:"photo/:photoID",component:Zn}}),f=new ae({props:{component:Jn}}),{c(){e=H("nav"),It(n.$$.fragment),o=C(),It(i.$$.fragment),s=C(),r=H("main"),It(l.$$.fragment),c=C(),It(a.$$.fragment),u=C(),It(d.$$.fragment),h=C(),It(f.$$.fragment),A(e,"class","svelte-1mw4kur")},m(t,m){_(t,e,m),Mt(n,e,null),k(e,o),Mt(i,e,null),_(t,s,m),_(t,r,m),Mt(l,r,null),k(r,c),Mt(a,r,null),k(r,u),Mt(d,r,null),k(r,h),Mt(f,r,null),p=!0},p(t,e){const o={};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){p||(kt(n.$$.fragment,t),kt(i.$$.fragment,t),kt(l.$$.fragment,t),kt(a.$$.fragment,t),kt(d.$$.fragment,t),kt(f.$$.fragment,t),p=!0)},o(t){_t(n.$$.fragment,t),_t(i.$$.fragment,t),_t(l.$$.fragment,t),_t(a.$$.fragment,t),_t(d.$$.fragment,t),_t(f.$$.fragment,t),p=!1},d(t){t&&P(e),zt(n),zt(i),t&&P(s),t&&P(r),zt(l),zt(a),zt(d),zt(f)}}}function eo(t){let e,n;return e=new ee({props:{url:t[0],$$slots:{default:[to]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(t,o){Mt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.url=t[0]),2&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function no(t,e,n){let{url:o=""}=e;return t.$$set=t=>{"url"in t&&n(0,o=t.url)},[o]}return new class extends At{constructor(t){super(),Nt(this,t,no,eo,l,{url:0})}}({target:document.body,props:{}})}();
