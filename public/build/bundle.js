var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function u(){return l(" ")}function g(){return l("")}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function f(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}let p;function m(t){p=t}function w(){if(!p)throw new Error("Function called outside component initialization");return p}const x=[],$=[],y=[],b=[],R=Promise.resolve();let _=!1;function v(t){y.push(t)}let H=!1;const k=new Set;function C(){if(!H){H=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];m(e),P(e.$$)}for(m(null),x.length=0;$.length;)$.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];k.has(e)||(k.add(e),e())}y.length=0}while(x.length);for(;b.length;)b.pop()();_=!1,H=!1,k.clear()}}function P(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(v)}}const N=new Set;let j;function S(){j={r:0,c:[],p:j}}function I(){j.r||i(j.c),j=j.p}function L(t,e){t&&t.i&&(N.delete(t),t.i(e))}function M(t,e,n,i){if(t&&t.o){if(N.has(t))return;N.add(t),j.c.push((()=>{N.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function E(t,e){const n=e.token={};function i(t,i,o,s){if(e.token!==n)return;e.resolved=s;let r=e.ctx;void 0!==o&&(r=r.slice(),r[o]=s);const a=t&&(e.current=t)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==i&&t&&(S(),M(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),I())})):e.block.d(1),a.c(),L(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[i]=a),c&&C()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=w();if(t.then((t=>{m(n),i(e.then,1,e.value,t),m(null)}),(t=>{if(m(n),i(e.catch,2,e.error,t),m(null),!e.hasCatch)throw t})),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}var o}function z(t){t&&t.c()}function A(t,n,s){const{fragment:r,on_mount:a,on_destroy:c,after_update:h}=t.$$;r&&r.m(n,s),v((()=>{const n=a.map(e).filter(o);c?c.push(...n):i(n),t.$$.on_mount=[]})),h.forEach(v)}function O(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function T(t,e){-1===t.$$.dirty[0]&&(x.push(t),_||(_=!0,R.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,o,s,r,a,h,l=[-1]){const u=p;m(e);const g=e.$$={fragment:null,ctx:null,props:h,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:l,skip_bound:!1};let d=!1;if(g.ctx=s?s(e,o.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return g.ctx&&a(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),d&&T(e,t)),n})):[],g.update(),d=!0,i(g.before_update),g.fragment=!!r&&r(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(c)}else g.fragment&&g.fragment.c();o.intro&&L(e.$$.fragment),A(e,o.target,o.anchor),C()}m(u)}class F{$destroy(){O(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */
var W,q=(function(t){(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,n,i,o=this.items.concat(t),s=this.width-(o.length-1)*this.spacing,r=o.reduce((function(t,e){return t+e.aspectRatio}),0),a=s/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(s/t.aspectRatio,"justify"),!0):r<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):r>this.maxAspectRatio?0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,n=this.items.reduce((function(t,e){return t+e.aspectRatio}),0),i=e/this.targetRowHeight,Math.abs(r-a)>Math.abs(n-i)?(this.completeLayout(e/n,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)):(this.items.push(Object.assign({},t)),this.completeLayout(s/r,"justify"),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,e){var n,i,o,s,r,a=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===e||["justify","center","left"].indexOf(e)<0)&&(e="left"),t!==(i=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)))?(this.height=i,n=c/i/(c/t)):(this.height=t,n=1),this.items.forEach((function(t){t.top=this.top,t.width=t.aspectRatio*this.height*n,t.height=this.height,t.left=a,a+=t.width+this.spacing}),this),"justify"===e?(a-=this.spacing+this.left,o=(a-this.width)/this.items.length,s=this.items.map((function(t,e){return Math.round((e+1)*o)})),1===this.items.length?this.items[0].width-=Math.round(o):this.items.forEach((function(t,e){e>0?(t.left-=s[e-1],t.width-=s[e]-s[e-1]):t.width-=s[e]}))):"center"===e&&(r=(this.width-a)/2,this.items.forEach((function(t){t.left+=r+this.spacing}),this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}}(W={exports:{}},W.exports),W.exports);
/*!
     * Copyright 2019 SmugMug, Inc.
     * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
     * @license
     */function V(t,e){var n;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(n=!0),new q({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:n,widowLayoutStyle:t.widowLayoutStyle})}function Y(t,e,n){return e._rows.push(n),e._layoutItems=e._layoutItems.concat(n.getItems()),e._containerHeight+=n.height+t.boxSpacing.vertical,n.items}var D=function(t,e){var n={},i={},o={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},s={},r={};return e=e||{},n=Object.assign(o,e),s.top=isNaN(parseFloat(n.containerPadding.top))?n.containerPadding:n.containerPadding.top,s.right=isNaN(parseFloat(n.containerPadding.right))?n.containerPadding:n.containerPadding.right,s.bottom=isNaN(parseFloat(n.containerPadding.bottom))?n.containerPadding:n.containerPadding.bottom,s.left=isNaN(parseFloat(n.containerPadding.left))?n.containerPadding:n.containerPadding.left,r.horizontal=isNaN(parseFloat(n.boxSpacing.horizontal))?n.boxSpacing:n.boxSpacing.horizontal,r.vertical=isNaN(parseFloat(n.boxSpacing.vertical))?n.boxSpacing:n.boxSpacing.vertical,n.containerPadding=s,n.boxSpacing=r,i._layoutItems=[],i._awakeItems=[],i._inViewportItems=[],i._leadingOrphans=[],i._trailingOrphans=[],i._containerHeight=n.containerPadding.top,i._rows=[],i._orphans=[],n._widowCount=0,function(t,e,n){var i,o,s,r=[];return t.forceAspectRatio&&n.forEach((function(e){e.forcedAspectRatio=!0,e.aspectRatio=t.forceAspectRatio})),n.some((function(n,s){if(isNaN(n.aspectRatio))throw new Error("Item "+s+" has an invalid aspect ratio");if(o||(o=V(t,e)),i=o.addItem(n),o.isLayoutComplete()){if(r=r.concat(Y(t,e,o)),e._rows.length>=t.maxNumRows)return o=null,!0;if(o=V(t,e),!i&&(i=o.addItem(n),o.isLayoutComplete())){if(r=r.concat(Y(t,e,o)),e._rows.length>=t.maxNumRows)return o=null,!0;o=V(t,e)}}})),o&&o.getItems().length&&t.showWidows&&(e._rows.length?(s=e._rows[e._rows.length-1].isBreakoutRow?e._rows[e._rows.length-1].targetRowHeight:e._rows[e._rows.length-1].height,o.forceComplete(!1,s)):o.forceComplete(!1),r=r.concat(Y(t,e,o)),t._widowCount=o.getItems().length),e._containerHeight=e._containerHeight-t.boxSpacing.vertical,e._containerHeight=e._containerHeight+t.containerPadding.bottom,{containerHeight:e._containerHeight,widowCount:t._widowCount,boxes:e._layoutItems}}(n,i,t.map((function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}})))};function G(t){let e,n,i,o,s,l,u,g;return{c(){e=h("div"),n=h("img"),d(n,"alt",i=t[0].title),n.src!==(o=`/img/${t[1]}/${t[0].hash}.jpg`)&&d(n,"src",o),d(n,"srcset",s=`/img/${t[1]}/${t[0].hash}.jpg, /img/${t[1]}2x/${t[0].hash}.jpg 2x`),d(n,"width",l=t[2].width+"px"),d(n,"height",u=t[2].height+"px"),d(e,"class","albumPhoto svelte-c71vc2"),d(e,"style",g=`width: ${t[2].width}px; height: ${t[2].height}px; top: ${t[2].top}px; left: ${t[2].left}px;`)},m(t,i){a(t,e,i),r(e,n)},p(t,r){1&r&&i!==(i=t[0].title)&&d(n,"alt",i),3&r&&n.src!==(o=`/img/${t[1]}/${t[0].hash}.jpg`)&&d(n,"src",o),3&r&&s!==(s=`/img/${t[1]}/${t[0].hash}.jpg, /img/${t[1]}2x/${t[0].hash}.jpg 2x`)&&d(n,"srcset",s),4&r&&l!==(l=t[2].width+"px")&&d(n,"width",l),4&r&&u!==(u=t[2].height+"px")&&d(n,"height",u),4&r&&g!==(g=`width: ${t[2].width}px; height: ${t[2].height}px; top: ${t[2].top}px; left: ${t[2].left}px;`)&&d(e,"style",g)},d(t){t&&c(e)}}}function J(e){let n,i=e[0]&&e[2]&&G(e);return{c(){i&&i.c(),n=g()},m(t,e){i&&i.m(t,e),a(t,n,e)},p(t,[e]){t[0]&&t[2]?i?i.p(t,e):(i=G(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:t,o:t,d(t){i&&i.d(t),t&&c(n)}}}function K(t,e,n){let{photo:i}=e,{size:o="medium"}=e,{dims:s}=e;return t.$$set=t=>{"photo"in t&&n(0,i=t.photo),"size"in t&&n(1,o=t.size),"dims"in t&&n(2,s=t.dims)},[i,o,s]}class Q extends F{constructor(t){super(),B(this,t,K,J,s,{photo:0,size:1,dims:2})}}function U(t,e,n){const i=t.slice();return i[5]=e[n],i[7]=n,i}function X(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Z(t){let e,n,i,o,s,g=t[4].title+"",p=t[4].photos,m=[];for(let e=0;e<p.length;e+=1)m[e]=tt(U(t,p,e));const w=t=>M(m[t],1,1,(()=>{m[t]=null}));return{c(){e=h("h2"),n=l(g),i=u(),o=h("div");for(let t=0;t<m.length;t+=1)m[t].c();d(e,"class","svelte-tq026l"),d(o,"class","albumPhotos svelte-tq026l"),f(o,"height",t[0].containerHeight+"px"),f(o,"width","1600px")},m(t,c){a(t,e,c),r(e,n),a(t,i,c),a(t,o,c);for(let t=0;t<m.length;t+=1)m[t].m(o,null);s=!0},p(t,e){if((!s||2&e)&&g!==(g=t[4].title+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,g),3&e){let n;for(p=t[4].photos,n=0;n<p.length;n+=1){const i=U(t,p,n);m[n]?(m[n].p(i,e),L(m[n],1)):(m[n]=tt(i),m[n].c(),L(m[n],1),m[n].m(o,null))}for(S(),n=p.length;n<m.length;n+=1)w(n);I()}(!s||1&e)&&f(o,"height",t[0].containerHeight+"px")},i(t){if(!s){for(let t=0;t<p.length;t+=1)L(m[t]);s=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)M(m[t]);s=!1},d(t){t&&c(e),t&&c(i),t&&c(o),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(m,t)}}}function tt(t){let e,n;return e=new Q({props:{photo:t[5],size:"medium",dims:t[0].boxes[t[7]]}}),{c(){z(e.$$.fragment)},m(t,i){A(e,t,i),n=!0},p(t,n){const i={};2&n&&(i.photo=t[5]),1&n&&(i.dims=t[0].boxes[t[7]]),e.$set(i)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function et(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function nt(t){let e,n,i,o={ctx:t,current:null,token:null,hasCatch:!1,pending:et,then:Z,catch:X,value:4,blocks:[,,,]};return E(n=t[1],o),{c(){e=g(),o.block.c()},m(t,n){a(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,i=!0},p(e,[i]){if(t=e,o.ctx=t,2&i&&n!==(n=t[1])&&E(n,o));else{const e=t.slice();e[4]=o.resolved,o.block.p(e,i)}},i(t){i||(L(o.block),i=!0)},o(t){for(let t=0;t<3;t+=1){M(o.blocks[t])}i=!1},d(t){t&&c(e),o.block.d(t),o.token=null,o=null}}}function it(t,e,n){let i;var o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};let s=null;return n(1,i=function(){return o(this,void 0,void 0,(function*(){const t=yield fetch(`${location.origin}/api/album/view/1`);if(t.ok){const e=yield t.json(),i=e.photos.map((t=>t.aspect));return n(0,s=D(i,{containerWidth:1600})),console.log(s),e}{const e=yield t.json();throw new Error(e)}}))}()),[s,i]}class ot extends F{constructor(t){super(),B(this,t,it,nt,s,{})}}function st(e){let n,i,o,s,l;return s=new ot({}),{c(){n=h("main"),i=h("h1"),i.textContent="Pozzo",o=u(),z(s.$$.fragment),d(i,"class","svelte-1mxtwu8"),d(n,"class","svelte-1mxtwu8")},m(t,e){a(t,n,e),r(n,i),r(n,o),A(s,n,null),l=!0},p:t,i(t){l||(L(s.$$.fragment,t),l=!0)},o(t){M(s.$$.fragment,t),l=!1},d(t){t&&c(n),O(s)}}}return new class extends F{constructor(t){super(),B(this,t,null,st,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
