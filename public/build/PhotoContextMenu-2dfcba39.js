import{S as e,i as t,s as n,c as o,m as l,x as r,t as s,a as i,d as c,a6 as u,A as d,w as a,e as m,b as p,g as f,f as $,h,H as k,y as w,z as g,M as v,N as x,U as y,B as C,V as j,j as b,T as I,l as M,F as A,a7 as B,R as H,p as N,q as T,L as G,I as L,a9 as P}from"./main-1f341ec6.js";function D(e,t,n){const o=e.slice();return o[22]=t[n],o}function S(e){let t,n;return t=new G({props:{loader:"NewAlbumPrompt"}}),t.$on("dismissed",e[9]),t.$on("done",e[10]),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p:r,i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function V(e){let t,n,o,l,r,c=1==e[6].length&&X(e);const u=[U,z],d=[];function k(e,t){return 1==e[6].length?0:1}return n=k(e),o=d[n]=u[n](e),{c(){c&&c.c(),t=a(),o.c(),l=m()},m(e,o){c&&c.m(e,o),p(e,t,o),d[n].m(e,o),p(e,l,o),r=!0},p(e,r){1==e[6].length?c?(c.p(e,r),64&r&&s(c,1)):(c=X(e),c.c(),s(c,1),c.m(t.parentNode,t)):c&&(f(),i(c,1,1,(()=>{c=null})),$());let a=n;n=k(e),n===a?d[n].p(e,r):(f(),i(d[a],1,1,(()=>{d[a]=null})),$(),o=d[n],o?o.p(e,r):(o=d[n]=u[n](e),o.c()),s(o,1),o.m(l.parentNode,l))},i(e){r||(s(c),s(o),r=!0)},o(e){i(c),i(o),r=!1},d(e){c&&c.d(e),e&&h(t),d[n].d(e),e&&h(l)}}}function X(e){let t,n;return t=new k({props:{$$slots:{default:[Y]},$$scope:{ctx:e}}}),t.$on("click",e[12]),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p(e,n){const o={};33554624&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function Y(e){let t,n,o,l,r,s,i,c,u,d=e[7].coverPhoto?.id===e[6][0].id?"Unset":"Set";return{c(){t=w("div"),n=L("svg"),o=L("rect"),l=L("polyline"),r=L("path"),s=a(),i=w("div"),c=y(d),u=y(" as Cover Photo"),g(o,"width","256"),g(o,"height","256"),g(o,"fill","none"),g(l,"points","200 176 127.993 136 56 176"),g(l,"fill","none"),g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width","24"),g(r,"d","M200,224l-72.0074-40L56,224V40a8,8,0,0,1,8-8H192a8,8,0,0,1,8,8Z"),g(r,"fill","none"),g(r,"stroke","currentColor"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(r,"stroke-width","24"),g(n,"xmlns","http://www.w3.org/2000/svg"),g(n,"fill","currentColor"),g(n,"viewBox","0 0 256 256"),g(n,"class","svelte-1lmumdt"),g(t,"class","cover menuItem svelte-1lmumdt")},m(e,d){p(e,t,d),C(t,n),C(n,o),C(n,l),C(n,r),C(t,s),C(t,i),C(i,c),C(i,u)},p(e,t){192&t&&d!==(d=e[7].coverPhoto?.id===e[6][0].id?"Unset":"Set")&&j(c,d)},d(e){e&&h(t)}}}function z(e){let t,n;return t=new k({props:{$$slots:{default:[W]},$$scope:{ctx:e}}}),t.$on("click",e[14]),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p(e,n){const o={};33554432&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function U(e){let t,n;return t=new k({props:{$$slots:{default:[_]},$$scope:{ctx:e}}}),t.$on("click",e[13]),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p(e,n){const o={};33554432&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function W(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256" class="svelte-1lmumdt"><rect width="256" height="256" fill="none"></rect><polyline points="168 167.993 216 167.993 216 39.993 88 39.993 88 87.993" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><rect x="39.99902" y="87.99414" width="128" height="128" stroke-width="16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect></svg> \n                    <div>Make Separate Group</div>',g(t,"class","makeNewGroup menuItem svelte-1lmumdt")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function _(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256" class="svelte-1lmumdt"><rect width="256" height="256" fill="none"></rect><line x1="128" y1="40" x2="128" y2="216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="88" y1="128" x2="12" y2="128" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><polyline points="44 96 12 128 44 160" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></polyline><line x1="168" y1="128" x2="244" y2="128" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><polyline points="212 160 244 128 212 96" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></polyline></svg> \n                    <div>Split Group Here</div>',g(t,"class","splitGroup menuItem svelte-1lmumdt")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function q(e){let t,n,o;return{c(){t=L("svg"),n=L("rect"),o=L("polyline"),g(n,"width","256"),g(n,"height","256"),g(n,"fill","none"),g(o,"points","208 96 128 176 48 96"),g(o,"fill","none"),g(o,"stroke","currentColor"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(o,"stroke-width","24"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"fill","currentColor"),g(t,"viewBox","0 0 256 256"),g(t,"class","svelte-1lmumdt")},m(e,l){p(e,t,l),C(t,n),C(t,o)},d(e){e&&h(t)}}}function F(e){let t,n,o;return{c(){t=L("svg"),n=L("rect"),o=L("polyline"),g(n,"width","256"),g(n,"height","256"),g(n,"fill","none"),g(o,"points","96 48 176 128 96 208"),g(o,"fill","none"),g(o,"stroke","currentColor"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(o,"stroke-width","24"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"fill","currentColor"),g(t,"viewBox","0 0 256 256"),g(t,"class","svelte-1lmumdt")},m(e,l){p(e,t,l),C(t,n),C(t,o)},d(e){e&&h(t)}}}function O(e){let t;return{c(){t=w("div"),t.textContent="Move To",g(t,"class","label svelte-1lmumdt")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function R(e){let t;return{c(){t=w("div"),t.textContent="Add To",g(t,"class","label svelte-1lmumdt")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Z(e){let t,n;function o(e,t){return e[4]?q:F}let l=o(e),r=l(e);function s(e,t){return e[7].type==d.Dynamic&&"all"==e[7].slug?R:O}let i=s(e),c=i(e);return{c(){t=w("div"),r.c(),n=a(),c.c(),g(t,"class","move menuItem svelte-1lmumdt")},m(e,o){p(e,t,o),r.m(t,null),C(t,n),c.m(t,null)},p(e,u){l!==(l=o(e))&&(r.d(1),r=l(e),r&&(r.c(),r.m(t,n))),i!==(i=s(e))&&(c.d(1),c=i(e),c&&(c.c(),c.m(t,null)))},d(e){e&&h(t),r.d(),c.d()}}}function E(e){let t,n,r,u,d,y,C;n=new k({props:{$$slots:{default:[J]},$$scope:{ctx:e}}});let j=e[3],b=[];for(let t=0;t<j.length;t+=1)b[t]=ee(D(e,j,t));const I=e=>i(b[e],1,1,(()=>{b[e]=null}));return{c(){t=w("div"),o(n.$$.fragment),r=a();for(let e=0;e<b.length;e+=1)b[e].c();u=m(),g(t,"class","album menuItem svelte-1lmumdt")},m(o,s){p(o,t,s),l(n,t,null),p(o,r,s);for(let e=0;e<b.length;e+=1)b[e].m(o,s);p(o,u,s),d=!0,y||(C=v(t,"click",e[16]),y=!0)},p(e,t){const o={};if(33554432&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o),392&t){let n;for(j=e[3],n=0;n<j.length;n+=1){const o=D(e,j,n);b[n]?(b[n].p(o,t),s(b[n],1)):(b[n]=ee(o),b[n].c(),s(b[n],1),b[n].m(u.parentNode,u))}for(f(),n=j.length;n<b.length;n+=1)I(n);$()}},i(e){if(!d){s(n.$$.fragment,e);for(let e=0;e<j.length;e+=1)s(b[e]);d=!0}},o(e){i(n.$$.fragment,e),b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)i(b[e]);d=!1},d(e){e&&h(t),c(n),e&&h(r),x(b,e),e&&h(u),y=!1,C()}}}function J(e){let t,n,o,l,r,s,i;return{c(){t=L("svg"),n=L("rect"),o=L("circle"),l=L("line"),r=L("line"),s=a(),i=w("div"),i.textContent="New Albumâ€¦",g(n,"width","256"),g(n,"height","256"),g(n,"fill","none"),g(o,"cx","128"),g(o,"cy","128"),g(o,"r","96"),g(o,"fill","none"),g(o,"stroke","currentColor"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(o,"stroke-width","24"),g(l,"x1","88"),g(l,"y1","128"),g(l,"x2","168"),g(l,"y2","128"),g(l,"fill","none"),g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"stroke-width","24"),g(r,"x1","128"),g(r,"y1","88"),g(r,"x2","128"),g(r,"y2","168"),g(r,"fill","none"),g(r,"stroke","currentColor"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(r,"stroke-width","24"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"fill","currentColor"),g(t,"viewBox","0 0 256 256"),g(t,"class","svelte-1lmumdt"),g(i,"class","label svelte-1lmumdt")},m(e,c){p(e,t,c),C(t,n),C(t,o),C(t,l),C(t,r),p(e,s,c),p(e,i,c)},d(e){e&&h(t),e&&h(s),e&&h(i)}}}function K(e){let t,n;return t=new k({props:{$$slots:{default:[Q]},$$scope:{ctx:e}}}),t.$on("click",(function(...t){return e[17](e[22],...t)})),{c(){o(t.$$.fragment)},m(e,o){l(t,e,o),n=!0},p(n,o){e=n;const l={};33554440&o&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){n||(s(t.$$.fragment,e),n=!0)},o(e){i(t.$$.fragment,e),n=!1},d(e){c(t,e)}}}function Q(e){let t,n,o,l,r,s,i,c,u,d,m=e[22].title+"";return{c(){t=w("div"),n=L("svg"),o=L("rect"),l=L("rect"),r=L("path"),s=L("circle"),i=a(),c=w("div"),u=y(m),d=a(),g(o,"width","256"),g(o,"height","256"),g(o,"fill","none"),g(l,"x","32"),g(l,"y","48"),g(l,"width","192"),g(l,"height","160"),g(l,"rx","8"),g(l,"stroke-width","24"),g(l,"stroke","currentColor"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"fill","none"),g(r,"d","M32,167.99982l50.343-50.343a8,8,0,0,1,11.31371,0l44.68629,44.6863a8,8,0,0,0,11.31371,0l20.68629-20.6863a8,8,0,0,1,11.31371,0L223.99982,184"),g(r,"fill","none"),g(r,"stroke","currentColor"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(r,"stroke-width","24"),g(s,"cx","156"),g(s,"cy","100"),g(s,"r","16"),g(n,"xmlns","http://www.w3.org/2000/svg"),g(n,"fill","currentColor"),g(n,"viewBox","0 0 256 256"),g(n,"class","svelte-1lmumdt"),g(c,"class","label svelte-1lmumdt"),g(t,"class","album menuItem svelte-1lmumdt")},m(e,a){p(e,t,a),C(t,n),C(n,o),C(n,l),C(n,r),C(n,s),C(t,i),C(t,c),C(c,u),p(e,d,a)},p(e,t){8&t&&m!==(m=e[22].title+"")&&j(u,m)},d(e){e&&h(t),e&&h(d)}}}function ee(e){let t,n,o=e[22].id!=e[7].id&&K(e);return{c(){o&&o.c(),t=m()},m(e,l){o&&o.m(e,l),p(e,t,l),n=!0},p(e,n){e[22].id!=e[7].id?o?(o.p(e,n),136&n&&s(o,1)):(o=K(e),o.c(),s(o,1),o.m(t.parentNode,t)):o&&(f(),i(o,1,1,(()=>{o=null})),$())},i(e){n||(s(o),n=!0)},o(e){i(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function te(e){let t;return{c(){t=w("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256" class="svelte-1lmumdt"><rect width="256" height="256" fill="none"></rect><line x1="215.99609" y1="60" x2="39.99609" y2="60.00005" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="104" y1="104" x2="104" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="152" y1="104" x2="152" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><path d="M199.99609,60.00005V208a8,8,0,0,1-8,8h-128a8,8,0,0,1-8-8v-148" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></path><path d="M168,60V36a16,16,0,0,0-16-16H104A16,16,0,0,0,88,36V60" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></path></svg> \n            <div class="label svelte-1lmumdt">Delete</div>',g(t,"class","delete menuItem svelte-1lmumdt")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function ne(e){let t,n,r,m,v,x,b,I,M,A,B,H,N,T,G,L,P,D=e[6].length+"",X=1==e[6].length?"":"s",Y=e[5]&&S(e);n=new u({props:{isInvisible:!0,zIndex:1300,fadeTime:0}}),n.$on("clickedOutside",e[11]);let z=e[7].type==d.Album&&V(e);H=new k({props:{$$slots:{default:[Z]},$$scope:{ctx:e}}}),H.$on("click",e[15]);let U=e[4]&&E(e);return G=new k({props:{$$slots:{default:[te]},$$scope:{ctx:e}}}),G.$on("click",e[18]),{c(){Y&&Y.c(),t=a(),o(n.$$.fragment),r=a(),m=w("div"),v=w("div"),x=y(D),b=y(" photo"),I=y(X),M=y(" selected"),A=a(),z&&z.c(),B=a(),o(H.$$.fragment),N=a(),U&&U.c(),T=a(),o(G.$$.fragment),g(v,"class","header menuItem svelte-1lmumdt"),g(m,"class","contextMenu svelte-1lmumdt"),g(m,"style",L=`left: ${e[0]}px; top: ${e[1]}px`)},m(o,s){Y&&Y.m(o,s),p(o,t,s),l(n,o,s),p(o,r,s),p(o,m,s),C(m,v),C(v,x),C(v,b),C(v,I),C(v,M),C(m,A),z&&z.m(m,null),C(m,B),l(H,m,null),C(m,N),U&&U.m(m,null),C(m,T),l(G,m,null),e[19](m),P=!0},p(e,[n]){e[5]?Y?(Y.p(e,n),32&n&&s(Y,1)):(Y=S(e),Y.c(),s(Y,1),Y.m(t.parentNode,t)):Y&&(f(),i(Y,1,1,(()=>{Y=null})),$()),(!P||64&n)&&D!==(D=e[6].length+"")&&j(x,D),(!P||64&n)&&X!==(X=1==e[6].length?"":"s")&&j(I,X),e[7].type==d.Album?z?(z.p(e,n),128&n&&s(z,1)):(z=V(e),z.c(),s(z,1),z.m(m,B)):z&&(f(),i(z,1,1,(()=>{z=null})),$());const o={};33554576&n&&(o.$$scope={dirty:n,ctx:e}),H.$set(o),e[4]?U?(U.p(e,n),16&n&&s(U,1)):(U=E(e),U.c(),s(U,1),U.m(m,T)):U&&(f(),i(U,1,1,(()=>{U=null})),$());const l={};33554432&n&&(l.$$scope={dirty:n,ctx:e}),G.$set(l),(!P||3&n&&L!==(L=`left: ${e[0]}px; top: ${e[1]}px`))&&g(m,"style",L)},i(e){P||(s(Y),s(n.$$.fragment,e),s(z),s(H.$$.fragment,e),s(U),s(G.$$.fragment,e),P=!0)},o(e){i(Y),i(n.$$.fragment,e),i(z),i(H.$$.fragment,e),i(U),i(G.$$.fragment,e),P=!1},d(o){Y&&Y.d(o),o&&h(t),c(n,o),o&&h(r),o&&h(m),z&&z.d(),c(H),U&&U.d(),c(G),e[19](null)}}}function oe(e,t,n){let o,l;b(e,I,(e=>n(6,o=e))),b(e,M,(e=>n(7,l=e)));var r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(l,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((o=o.apply(e,t||[])).next())}))};const s=A();let{posX:i}=t,{posY:c}=t,u=null,d=[],a=!1,m=!1;B((()=>{!function(){r(this,void 0,void 0,(function*(){const e=yield H("/album/list",{authorize:!0});e.success?n(3,d=e.data):console.error(e)}))}(),u.clientWidth+i>document.body.clientWidth&&n(0,i-=u.clientWidth),u.clientHeight+c>document.body.clientHeight&&n(1,c-=u.clientHeight)})),N((()=>{1==o.length&&T(I,o=[],o)}));return e.$$set=e=>{"posX"in e&&n(0,i=e.posX),"posY"in e&&n(1,c=e.posY)},[i,c,u,d,a,m,o,l,s,()=>n(5,m=!1),e=>s("move",{targetAlbumID:e.detail.newAlbumID}),()=>s("dismissed"),()=>s("coverPhotoClicked",{}),()=>s("splitGroup",{}),()=>s("makeNewGroup",{}),()=>n(4,a=!a),()=>n(5,m=!0),(e,t)=>s("move",{targetAlbumID:e.id}),()=>s("delete",{}),function(e){P[e?"unshift":"push"]((()=>{u=e,n(2,u)}))}]}export default class extends e{constructor(e){super(),t(this,e,oe,ne,n,{posX:0,posY:1})}}
