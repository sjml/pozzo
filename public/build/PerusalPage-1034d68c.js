import{S as e,i as t,s as o,y as r,z as n,b as s,x as l,h as c,a7 as a,a4 as i,w as u,U as p,B as h,V as d,t as m,c as g,m as f,ad as $,a as P,d as v,g as y,f as w,e as k,N as L,j as q,k as C,l as x,ae as I,o as G,p as M,q as N,H as b,I as j,L as V,af as O,ag as S,r as A,ah as W}from"./main-4a895478.js";import{M as R}from"./Markdown-772db670.js";function U(e){let t,o;return{c(){t=r("video"),n(t,"class","main svelte-18nqc1q"),t.src!==(o=e[0])&&n(t,"src",o),t.controls=!0,n(t,"poster",e[1])},m(e,o){s(e,t,o)},p(e,[r]){1&r&&t.src!==(o=e[0])&&n(t,"src",o),2&r&&n(t,"poster",e[1])},i:l,o:l,d(e){e&&c(t)}}}function z(e,t,o){let r,n,{photoWhichIsReallyAVideo:s}=t;return a((()=>{o(1,n=i("large",s.hash,s.uniq));const e=s.originalFilename.split(".").pop();o(0,r=i("orig",s.hash,s.uniq,e))})),e.$$set=e=>{"photoWhichIsReallyAVideo"in e&&o(2,s=e.photoWhichIsReallyAVideo)},[r,n,s]}class T extends e{constructor(e){super(),t(this,e,z,U,o,{photoWhichIsReallyAVideo:2})}}function F(e,t,o){const r=e.slice();return r[7]=t[o],r}function _(e){let t,o,l;return o=new R({props:{markdown:e[0].currentGroup.description}}),{c(){t=r("div"),g(o.$$.fragment),n(t,"class","interstitial svelte-1ys6eqe")},m(e,r){s(e,t,r),f(o,t,null),l=!0},p(e,t){const r={};1&t&&(r.markdown=e[0].currentGroup.description),o.$set(r)},i(e){l||(m(o.$$.fragment,e),l=!0)},o(e){P(o.$$.fragment,e),l=!1},d(e){e&&c(t),v(o)}}}function B(e){let t,o,r,n;const l=[H,D],a=[];function i(e,t){return e[0].currentPhoto.isVideo?1:0}return t=i(e),o=a[t]=l[t](e),{c(){o.c(),r=k()},m(e,o){a[t].m(e,o),s(e,r,o),n=!0},p(e,n){let s=t;t=i(e),t===s?a[t].p(e,n):(y(),P(a[s],1,1,(()=>{a[s]=null})),w(),o=a[t],o?o.p(e,n):(o=a[t]=l[t](e),o.c()),m(o,1),o.m(r.parentNode,r))},i(e){n||(m(o),n=!0)},o(e){P(o),n=!1},d(e){a[t].d(e),e&&c(r)}}}function D(e){let t,o;return t=new T({props:{photoWhichIsReallyAVideo:e[0].currentPhoto}}),{c(){g(t.$$.fragment)},m(e,r){f(t,e,r),o=!0},p(e,o){const r={};1&o&&(r.photoWhichIsReallyAVideo=e[0].currentPhoto),t.$set(r)},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){P(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function H(e){let t,o;return t=new W({props:{photo:e[0].currentPhoto,lazy:!1,size:ee,objectFit:"contain"}}),{c(){g(t.$$.fragment)},m(e,r){f(t,e,r),o=!0},p(e,o){const r={};1&o&&(r.photo=e[0].currentPhoto),t.$set(r)},i(e){o||(m(t.$$.fragment,e),o=!0)},o(e){P(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function E(e){let t,o,l,a,i,g,f,$,v,k,q,C,x,I,G,M,N,b,j,V,O,S,A,W=e[0].currentPhoto.title+"",R=(e[0].currentPhoto.tags.length>0?e[0].currentPhoto.tags.join(", "):"(None)")+"",U=e[0].currentPhoto.uploadTimeStamp+"",z=e[2].contentLicense.length>0&&J(e),T=e[0].currentPhoto.gpsLat&&e[0].currentPhoto.gpsLon&&Q(e),_=e[3],B=[];for(let t=0;t<_.length;t+=1)B[t]=Y(F(e,_,t));return{c(){t=r("div"),o=r("div"),l=r("span"),l.textContent="Title:",a=u(),i=p(W),g=u(),z&&z.c(),f=u(),$=r("hr"),v=u(),T&&T.c(),k=u(),q=r("table"),C=r("tr"),x=r("td"),x.textContent="Tags",I=u(),G=r("td"),M=p(R),N=u();for(let e=0;e<B.length;e+=1)B[e].c();b=u(),j=r("tr"),V=r("td"),V.textContent="Uploaded: ",O=r("td"),S=p(U),n(l,"class","label svelte-1ys6eqe"),n(o,"class","title svelte-1ys6eqe"),n(x,"class","label svelte-1ys6eqe"),n(G,"class","value"),n(V,"class","label svelte-1ys6eqe"),n(q,"class","photoMeta svelte-1ys6eqe"),n(t,"class","metadata svelte-1ys6eqe")},m(e,r){s(e,t,r),h(t,o),h(o,l),h(o,a),h(o,i),h(t,g),z&&z.m(t,null),h(t,f),h(t,$),h(t,v),T&&T.m(t,null),h(t,k),h(t,q),h(q,C),h(C,x),h(C,I),h(C,G),h(G,M),h(q,N);for(let e=0;e<B.length;e+=1)B[e].m(q,null);h(q,b),h(q,j),h(j,V),h(j,O),h(O,S),A=!0},p(e,o){if((!A||1&o)&&W!==(W=e[0].currentPhoto.title+"")&&d(i,W),e[2].contentLicense.length>0?z?(z.p(e,o),4&o&&m(z,1)):(z=J(e),z.c(),m(z,1),z.m(t,f)):z&&(y(),P(z,1,1,(()=>{z=null})),w()),e[0].currentPhoto.gpsLat&&e[0].currentPhoto.gpsLon?T?(T.p(e,o),1&o&&m(T,1)):(T=Q(e),T.c(),m(T,1),T.m(t,k)):T&&(y(),P(T,1,1,(()=>{T=null})),w()),(!A||1&o)&&R!==(R=(e[0].currentPhoto.tags.length>0?e[0].currentPhoto.tags.join(", "):"(None)")+"")&&d(M,R),9&o){let t;for(_=e[3],t=0;t<_.length;t+=1){const r=F(e,_,t);B[t]?B[t].p(r,o):(B[t]=Y(r),B[t].c(),B[t].m(q,b))}for(;t<B.length;t+=1)B[t].d(1);B.length=_.length}(!A||1&o)&&U!==(U=e[0].currentPhoto.uploadTimeStamp+"")&&d(S,U)},i(e){A||(m(z),m(T),A=!0)},o(e){P(z),P(T),A=!1},d(e){e&&c(t),z&&z.d(),T&&T.d(),L(B,e)}}}function J(e){let t,o,l,a,i,y,w,k,L,q,C,x,I,G,M,N,j,V,O,S,A,W,R,U,z=e[0].currentPhoto.width+"",T=e[0].currentPhoto.height+"",F=$(e[0].currentPhoto.size)+"",_=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`;return W=new b({props:{margin:"0 10px 0 0",$$slots:{default:[K]},$$scope:{ctx:e}}}),{c(){t=r("tr"),o=r("td"),o.textContent="Original: ",l=r("td"),a=p(z),i=p("Ã—"),y=p(T),w=p(" ("),k=p(F),L=p(")"),q=u(),C=r("div"),x=r("a"),I=r("img"),N=u(),j=p(_),O=u(),S=r("div"),A=r("a"),g(W.$$.fragment),n(o,"class","label svelte-1ys6eqe"),I.src!==(G=`/img/licenses/${e[2].contentLicense.slice(3)}.svg`)&&n(I,"src",G),n(I,"alt",M=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`),n(I,"class","svelte-1ys6eqe"),n(x,"href",V=`https://creativecommons.org/licenses/${e[2].contentLicense.slice(3)}/4.0/`),n(x,"target","_"),n(x,"class","svelte-1ys6eqe"),n(C,"class","license svelte-1ys6eqe"),n(A,"href",R="/api/photo/orig/"+e[0].currentPhoto.id),n(A,"class","svelte-1ys6eqe"),n(S,"class","dlOrig svelte-1ys6eqe")},m(e,r){s(e,t,r),h(t,o),h(t,l),h(l,a),h(l,i),h(l,y),h(l,w),h(l,k),h(l,L),s(e,q,r),s(e,C,r),h(C,x),h(x,I),h(x,N),h(x,j),s(e,O,r),s(e,S,r),h(S,A),f(W,A,null),U=!0},p(e,t){(!U||1&t)&&z!==(z=e[0].currentPhoto.width+"")&&d(a,z),(!U||1&t)&&T!==(T=e[0].currentPhoto.height+"")&&d(y,T),(!U||1&t)&&F!==(F=$(e[0].currentPhoto.size)+"")&&d(k,F),(!U||4&t&&I.src!==(G=`/img/licenses/${e[2].contentLicense.slice(3)}.svg`))&&n(I,"src",G),(!U||4&t&&M!==(M=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`))&&n(I,"alt",M),(!U||4&t)&&_!==(_=`Creative Commons ${e[2].contentLicense.slice(3).toUpperCase()} 4.0`)&&d(j,_),(!U||4&t&&V!==(V=`https://creativecommons.org/licenses/${e[2].contentLicense.slice(3)}/4.0/`))&&n(x,"href",V);const o={};1024&t&&(o.$$scope={dirty:t,ctx:e}),W.$set(o),(!U||1&t&&R!==(R="/api/photo/orig/"+e[0].currentPhoto.id))&&n(A,"href",R)},i(e){U||(m(W.$$.fragment,e),U=!0)},o(e){P(W.$$.fragment,e),U=!1},d(e){e&&c(t),e&&c(q),e&&c(C),e&&c(O),e&&c(S),v(W)}}}function K(e){let t,o,l,a,i,p,d;return{c(){t=j("svg"),o=j("rect"),l=j("polyline"),a=j("line"),i=j("path"),p=u(),d=r("div"),d.textContent="Download Original",n(o,"width","256"),n(o,"height","256"),n(o,"fill","none"),n(l,"points","86 110 128 152 170 110"),n(l,"fill","none"),n(l,"stroke","currentColor"),n(l,"stroke-linecap","round"),n(l,"stroke-linejoin","round"),n(l,"stroke-width","24"),n(a,"x1","128"),n(a,"y1","39.97056"),n(a,"x2","128"),n(a,"y2","151.97056"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-linecap","round"),n(a,"stroke-linejoin","round"),n(a,"stroke-width","24"),n(i,"d","M224,136v72a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V136"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-linecap","round"),n(i,"stroke-linejoin","round"),n(i,"stroke-width","24"),n(t,"xmlns","http://www.w3.org/2000/svg"),n(t,"fill","currentColor"),n(t,"viewBox","0 0 256 256"),n(t,"class","svelte-1ys6eqe")},m(e,r){s(e,t,r),h(t,o),h(t,l),h(t,a),h(t,i),s(e,p,r),s(e,d,r)},d(e){e&&c(t),e&&c(p),e&&c(d)}}}function Q(e){let t,o,l,a,i,d,$,y,w,k,L,q,C,x,I,G;return o=new V({props:{loader:"PhotoMap",photos:[e[0].currentPhoto],exploreIconOnly:!0,popups:!1}}),{c(){t=r("div"),g(o.$$.fragment),l=u(),a=r("div"),i=p("{"),d=u(),$=r("a"),y=p("OpenStreetMap"),k=p("\n                | "),L=r("a"),q=p("Google Maps"),x=u(),I=p("}"),n(t,"class","photoMap svelte-1ys6eqe"),n($,"target","_"),n($,"href",w="https://www.openstreetmap.org/?mlat="+e[0].currentPhoto.gpsLat+"&mlon="+e[0].currentPhoto.gpsLon+"#map=18/"+e[0].currentPhoto.gpsLat+"/"+e[0].currentPhoto.gpsLon),n($,"class","svelte-1ys6eqe"),n(L,"target","_"),n(L,"href",C="https://www.google.com/maps/search/?api=1&query="+e[0].currentPhoto.gpsLat+","+e[0].currentPhoto.gpsLon),n(L,"class","svelte-1ys6eqe"),n(a,"class","mapLinks svelte-1ys6eqe")},m(e,r){s(e,t,r),f(o,t,null),s(e,l,r),s(e,a,r),h(a,i),h(a,d),h(a,$),h($,y),h(a,k),h(a,L),h(L,q),h(a,x),h(a,I),G=!0},p(e,t){const r={};1&t&&(r.photos=[e[0].currentPhoto]),o.$set(r),(!G||1&t&&w!==(w="https://www.openstreetmap.org/?mlat="+e[0].currentPhoto.gpsLat+"&mlon="+e[0].currentPhoto.gpsLon+"#map=18/"+e[0].currentPhoto.gpsLat+"/"+e[0].currentPhoto.gpsLon))&&n($,"href",w),(!G||1&t&&C!==(C="https://www.google.com/maps/search/?api=1&query="+e[0].currentPhoto.gpsLat+","+e[0].currentPhoto.gpsLon))&&n(L,"href",C)},i(e){G||(m(o.$$.fragment,e),G=!0)},o(e){P(o.$$.fragment,e),G=!1},d(e){e&&c(t),v(o),e&&c(l),e&&c(a)}}}function X(e){let t,o,l,a,i,m,g=e[7].value+"",f=(null==e[7].filter?e[0].currentPhoto[e[7].key]:e[7].filter(e[0].currentPhoto[e[7].key]))+"";return{c(){t=r("tr"),o=r("td"),l=p(g),a=u(),i=r("td"),m=p(f),n(o,"class","label svelte-1ys6eqe"),n(i,"class","value")},m(e,r){s(e,t,r),h(t,o),h(o,l),h(t,a),h(t,i),h(i,m)},p(e,t){1&t&&f!==(f=(null==e[7].filter?e[0].currentPhoto[e[7].key]:e[7].filter(e[0].currentPhoto[e[7].key]))+"")&&d(m,f)},d(e){e&&c(t)}}}function Y(e){let t,o=null!=e[0].currentPhoto[e[7].key]&&X(e);return{c(){o&&o.c(),t=k()},m(e,r){o&&o.m(e,r),s(e,t,r)},p(e,r){null!=e[0].currentPhoto[e[7].key]?o?o.p(e,r):(o=X(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&c(t)}}}function Z(e){let t,o,l,a,i,p;const h=[B,_],d=[];function g(e,t){return e[0].currentPhoto?0:e[0].currentGroup?1:-1}~(o=g(e))&&(l=d[o]=h[o](e));let f=e[0].currentPhoto&&e[1]&&E(e);return{c(){t=r("div"),l&&l.c(),a=u(),f&&f.c(),i=k(),n(t,"class","fullPerusal svelte-1ys6eqe")},m(e,r){s(e,t,r),~o&&d[o].m(t,null),s(e,a,r),f&&f.m(e,r),s(e,i,r),p=!0},p(e,[r]){let n=o;o=g(e),o===n?~o&&d[o].p(e,r):(l&&(y(),P(d[n],1,1,(()=>{d[n]=null})),w()),~o?(l=d[o],l?l.p(e,r):(l=d[o]=h[o](e),l.c()),m(l,1),l.m(t,null)):l=null),e[0].currentPhoto&&e[1]?f?(f.p(e,r),3&r&&m(f,1)):(f=E(e),f.c(),m(f,1),f.m(i.parentNode,i)):f&&(y(),P(f,1,1,(()=>{f=null})),w())},i(e){p||(m(l),m(f),p=!0)},o(e){P(l),P(f),p=!1},d(e){e&&c(t),~o&&d[o].d(),e&&c(a),f&&f.d(e),e&&c(i)}}}const ee="large";function te(e,t,o){let r,n,s,l;q(e,C,(e=>o(0,r=e))),q(e,x,(e=>o(5,n=e))),q(e,I,(e=>o(1,s=e))),q(e,G,(e=>o(2,l=e)));const c=[{key:"creationDate",value:"Taken",filter:O},{key:"mime",value:"Format"},{key:"make",value:"Camera Make"},{key:"model",value:"Camera Model"},{key:"lens",value:"Lens"},{key:"aperture",value:"Aperture",filter:e=>`f/${e}`},{key:"iso",value:"ISO"},{key:"shutterSpeed",value:"Shutter Speed",filter:S}];let{perusalIdentifier:a}=t;return M((()=>{N(C,r.currentIdx=-1,r),N(C,r.currentPhoto=null,r),N(C,r.currentGroup=null,r)})),e.$$set=e=>{"perusalIdentifier"in e&&o(4,a=e.perusalIdentifier)},e.$$.update=()=>{16&e.$$.dirty&&function(e){if(e.startsWith("g")){N(C,r.currentPhoto=null,r);const t=parseInt(e.slice(1));if(isNaN(t))r.currentGroup;else{const e=r.nodes.findIndex((e=>!e.hasOwnProperty("hash")&&(e.id==t||void 0)));-1==e?N(C,r.currentGroup=null,r):(N(C,r.currentIdx=e,r),N(C,r.currentGroup=r.nodes[e],r))}}else{N(C,r.currentGroup=null,r);const t=parseInt(e);if(isNaN(t))N(C,r.currentPhoto=null,r);else{const e=r.nodes.findIndex((e=>!!e.hasOwnProperty("hash")&&(e.id==t||void 0)));-1==e?N(C,r.currentPhoto=null,r):(N(C,r.currentIdx=e,r),N(C,r.currentPhoto=r.nodes[e],r))}}null==r.currentPhoto&&null==r.currentGroup&&A(`/${n.type}/${n.slug}`)}(a)},[r,s,l,c,a]}export default class extends e{constructor(e){super(),t(this,e,te,Z,o,{perusalIdentifier:4})}}
